<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Integrate Applications (Default App Checks)</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d40bfcded91c.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="26547-6862-monitor-log-files.html" title="Monitor Log Files"></link><link rel="next" href="26547-6897-create-a-custom-app-check.html" title="Create a Custom App Check"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
				$(document).ready(function(){
				var lang = hljs.listLanguages();
				$('pre:not(.embedcode)').each(function(){
				if ($(this).data('language') && $.inArray($(this).data('language'), lang) > -1) {
					var code = hljs.highlight($(this).data('language'), $(this).text());
						$(this).empty().append(code.value).addClass("hljs").addClass(code.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://478h5m1yrfsa3bbe262u7muv-wpengine.netdna-ssl.com/wp-content/themes/sysdig/assets/images/logo-sysdig-black.svg" target="_blank"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="https://478h5m1yrfsa3bbe262u7muv-wpengine.netdna-ssl.com/wp-content/themes/sysdig/assets/images/logo-sysdig-black.svg" target="_blank"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Sysdig Documentation</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="26547-6862-monitor-log-files.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="26547-6897-create-a-custom-app-check.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">Sysdig Documentation</span></li><li class="breadcrumb-link"><a href="26547-6498-sysdig-monitor.html">Sysdig Monitor</a></li><li class="breadcrumb-link"><a href="26547-6857-sysdig-integrations.html">Sysdig Integrations</a></li><li class="breadcrumb-node">Integrate Applications (Default App Checks)</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-c887ad94-fd13-e0c3-37a3-bc79bbc23ffa" data-permalink="26547-6863-integrate-applications--default-app-checks-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2"><div class="titlepage"><div><div class="title"><h4 class="title">Integrate Applications (Default App Checks)</h4></div></div></div><p>The Sysdig agent supports additional application monitoring capabilities with application check scripts or 'app checks'. These are a set of plugins that poll for custom metrics from the specific applications which export them via status or management pages: e.g. NGINX, Redis, MongoDB, Memcached and more.</p><p> <span class="bold bold"><strong>Many app checks are enabled by default in the agent and when a supported application is found, the correct app check script will be called and metrics polled automatically.</strong></span> </p><p>However if default connection parameters are changed in your application, you will need to modify the app check connection parameters in the Sysdig Agent configuration file (<code class="code">dragent.yaml)</code> to match your application.</p><p>In some cases you may also need to enable the metrics reporting functionality in the application before the agent can poll them.</p><p>This page details how to make configuration changes in the agent's configuration file, and provides an application integration example. Click the Supported Applications links for application-specific details.</p><h6 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>  Edit dragent.yaml to Integrate or Modify Application Checks </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> Find the default settings  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> Sample format  </p></li></ul></div></li><li class="listitem"><p>  Change the default settings  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>  Example 1: Change Name and Add Password </p></li><li class="listitem"><p>  Example 2: Increase Polling Interval </p></li></ul></div></li><li class="listitem"><p> Disabling  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>  Disable a Single Application Check </p></li><li class="listitem"><p>  Disable ALL Application Checks </p></li></ul></div></li><li class="listitem"><p>  Optional: Configure a Custom App-Check </p></li></ul></div></li><li class="listitem"><p> Metrics Limit </p></li><li class="listitem"><p> Supported Applications  </p></li></ul></div><h6 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-EditdragentyamltoIntegrateorModifyApplicationChecks" class="bridgehead">Edit dragent.yaml to Integrate or Modify Application Checks</h6><p>Out of the box, the Sysdig agent will gather and report on a wide variety of pre-defined metrics. It can also accommodate any number of custom parameters for additional metrics collection.</p><p>The agent relies on a pair of configuration files to define metrics collection parameters:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><tbody><tr><td class="td"><p> <code class="code">dragent.default.yaml</code> </p></td><td class="td"><p>The core configuration file. You can look at it to understand more about the default configurations provided.</p><p>Location: "<code class="code">/opt/draios/etc/dragent.default.yaml</code>."</p><p> <span class="bold bold"><strong>CAUTION. This file should never be edited. </strong></span> </p></td></tr><tr><td class="td"><p> <code class="code">dragent.yaml</code> </p></td><td class="td"><p>The configuration file where parameters can be added, either directly in YAML as <code class="code">name/value</code> pairs, or using environment variables such as '<code class="code">ADDITIONAL_CONF." </code>Location: "<code class="code">/opt/draios/etc/dragent.yaml</code>."</p></td></tr></tbody></table></div><p>The "<code class="code">dragent.yaml</code>" file can be accessed and edited in several ways, depending on how the agent was installed.</p><p>Review <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/198934553/Understanding+the+Agent+Config+Files" target="_blank">Understanding the Agent Config Files</a> for details.</p><p>The examples in this section presume you are entering YAML code directly into<code class="code">dragent.yaml,</code> under the <code class="code">app_checks</code> section.</p><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-Findthedefaultsettings" class="bridgehead">Find the default settings</h5><p>To find the default app-checks for already supported applications, check the <code class="code">dragent.default.yaml</code> file.</p><p>(Location: <code class="code">/opt/draios/etc/dragent.default.yaml</code>.)</p><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-Sampleformat" class="bridgehead">Sample format</h5><pre class="programlisting">app_checks: 
  - name: APP_NAME
    check_module: APP_CHECK_SCRIPT
    pattern: 
      comm: PROCESS_NAME 
    conf: 
      host: IP_ADDR
      port: PORT</pre><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col><col></col><col></col></colgroup><thead><tr><th class="th"><p>Parameter</p></th><th class="th"><p>Parameter 2</p></th><th class="th"><p>Description</p></th><th class="th"><p>Sample Value</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">app_checks</code> </strong></span> </p></td><td class="td"></td><td class="td"><p>The main section of <span class="bold bold"><strong> <code class="code">dragent.default.yaml</code> </strong></span> that contains a list of pre-configured checks.</p></td><td class="td"><p>n/a</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">name</code> </strong></span> </p></td><td class="td"></td><td class="td"><p>Every check should have a unique<code class="code">name:</code> which will be displayed on Sysdig Monitor as the process name of the integrated application.</p></td><td class="td"><p>e.g. <span class="bold bold"><strong>MongoDB</strong></span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">check_module</code> </strong></span> </p></td><td class="td"></td><td class="td"><p>The name of the Python plugin that polls the data from the designated application.</p><p>All the app check scripts can be found inside the <span class="bold bold"><strong> <code class="code">/opt/draios/lib/python/checks.d</code> </strong></span> directory.</p></td><td class="td"><p>e.g. <span class="bold bold"><strong>elastic</strong></span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">pattern</code> </strong></span> </p></td><td class="td"></td><td class="td"><p>This section is used by the Sysdig agent to match a process with a check. Four kinds of keys can be specified along with any arguments to help distinguish them.</p></td><td class="td"><p>n/a</p></td></tr><tr><td class="td"></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">comm</code> </strong></span> </p></td><td class="td"><p>Matches process name as seen in /proc/<code class="code">PID</code>/status</p></td><td class="td"></td></tr><tr><td class="td"></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">port</code> </strong></span> </p></td><td class="td"><p>Matches process name as seen in /proc/<code class="code">PID</code>/status</p></td><td class="td"></td></tr><tr><td class="td"></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">arg</code> </strong></span> </p></td><td class="td"><p>Matches any process arguments</p></td><td class="td"></td></tr><tr><td class="td"></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">exe</code> </strong></span> </p></td><td class="td"><p>Matches the process exe as seen in /proc/<code class="code">PID</code>/exe link</p></td><td class="td"></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">conf</code> </strong></span> </p></td><td class="td"></td><td class="td"><p>This section is specific for each plugin. You can specify any key/values that the plugins support.</p></td><td class="td"></td></tr><tr><td class="td"></td><td class="td"><p> <code class="code">host</code> </p></td><td class="td"><p>Application-specific. A URL or IP address</p></td><td class="td"></td></tr><tr><td class="td"></td><td class="td"><p> <code class="code">port</code> </p></td><td class="td"></td><td class="td"></td></tr></tbody></table></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p> <span class="bold bold"><strong> <code class="code">{...}</code> tokens</strong></span> can be used as values, which will be substituted with values from process info.</p></div><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-Changethedefaultsettings" class="bridgehead">Change the default settings</h5><p>To override the defaults:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Copy relevant code blocks from <span class="bold bold"><strong> <code class="code">dragent.default.yaml</code> </strong></span> into <span class="bold bold"><strong> <code class="code">dragent.yaml</code> </strong></span>. (Or copy the code from the appropriate app check integration page in this documentation section.)</p><p>Any entries copied into <code class="code">dragent.yaml</code> file will override similar entries in <code class="code">dragent.default.yaml</code>.</p><p>Never modify <code class="code">dragent.default.yaml</code>, as it will be overwritten whenever the agent is updated.</p></li><li class="step"><p>Modify the parameters as needed.</p><p>Be sure to use proper YAML. Pay attention to consistent spacing for indents (as shown) and list all check entries under an<code class="code"> app_checks:</code> section title.</p></li><li class="step"><p>Save the changes and restart the agent.</p><p>Use <code class="code">service restart agent</code> or <code class="code">docker restart sysdig-agent</code>.</p></li></ol></div><p>Metrics for the relevant application should appear in the Sysdig Monitor interface under the appropriate name.</p><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-Example1ChangeNameandAddPassword" class="bridgehead">Example 1: Change Name and Add Password</h5><p>Here is a sample app-check entry for Redis. The <code class="code">app_checks</code> section was copied from the <code class="code">dragent.default.yaml</code> file and modified for a specific instance.</p><pre class="programlisting">customerid: 831f3-Your-Access-Key-9401
tags: local:sf,acct:dev,svc:db
app_checks: 
  - name: redis-6380
    check_module: redisdb
    pattern: 
      comm: redis-server 
    conf: 
      host: 127.0.0.1
      port: PORT
      password: PASSWORD</pre><p>Edits made:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The name to be displayed in the interface</p></li><li class="listitem"><p>A required password.</p></li></ul></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>As the token <code class="code">PORT</code> is used, it will be translated to the actual port where Redis is listening.</p></div><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-Example2IncreasePollingInterval" class="bridgehead">Example 2: Increase Polling Interval</h5><p>The default interval for an application check to be run by the agent is set to every second. You can increase the interval per application check by adding the interval: parameter (under the -name section) and the number of seconds to wait before each run of the script.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p> <code class="code">interval:</code> must be put into each app check entry that should run less often; there is no global setting.</p></div><p>Example: Run the NTP check once per minute:</p><pre class="programlisting">app_checks:
  - name: ntp
    interval: 60
    pattern:
      comm: systemd
    conf:
      host: us.pool.ntp.org</pre><pre class="programlisting"></pre><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-Disabling" class="bridgehead">Disabling</h5><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-DisableaSingleApplicationCheck" class="bridgehead">Disable a Single Application Check</h5><p>Sometimes the default configuration shipped with the Sysdig agent does not work for you or you may not be interested in checks for a single application. To turn a single check off, add an entry like this to disable it:</p><pre class="programlisting">app_checks: 
 - name: nginx
   enabled: false</pre><p>This entry overrides the default configuration of the <span class="bold bold"><strong> <code class="code">nginx</code> </strong></span> check, disabling it.</p><p>If you are using the<code class="code"> ADDITIONAL_CONF</code> parameter to modify your container agent's configuration, you would add an entry like this to your Docker run command (or Kubernetes manifest):</p><pre class="programlisting">
-e ADDITIONAL_CONF="app_checks:\n  - name: nginx\n    enabled: false\n"</pre><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-DisableALLApplicationChecks" class="bridgehead">Disable ALL Application Checks</h5><p>If you do not need it or otherwise want to disable the application check functionality, you can add the following entry to the agent's user settings configuration file <code class="code">/opt/draios/etc/dragent.yaml</code>:</p><pre class="programlisting">app_checks_enabled: false</pre><p>Restart the agent as shown immediately above for either the native Linux agent installation or the container agent installation.</p><h5 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-OptionalConfigureaCustomApp-Check" class="bridgehead">Optional: Configure a Custom App-Check</h5><p>Sysdig allows custom application check-script configurations to be created for each individual container in the infrastructure, via the environment variable <code class="code">SYSDIG_AGENT_CONF</code>. This avoids the need for multiple edits and entries to achieve the container-specific customization, by enabling application teams to configure their own checks.</p><p>The <code class="code">SYSDIG_AGENT_CONF</code> variable stores a YAML-formatted configuration for the app check, and is used to match app-check configurations. It can be stored directly within the Docker file.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>The syntax is the same as <code class="code">dragent.yaml</code> syntax.</p></div><p>The example below defines a per container app-check for Redis in the Dockerfile, using the <code class="code">SYSDIG_AGENT_CONF </code>environment variable:</p><pre class="programlisting">FROM redis
# This config file adds a password for accessing redis instance
ADD redis.conf /

ENV SYSDIG_AGENT_CONF { "app_checks": [{ "name": "redis", "check_module": "redisdb", "pattern": {"comm": "redis-server"}, "conf": { "host": "127.0.0.1", "port": "6379", "password": "protected"} }] }
ENTRYPOINT ["redis-server"]
CMD [ "/redis.conf" ]</pre><p>The example below shows how parameters can be added to a container started with <code class="code">docker run</code>, by either using the <code class="code">-e/–envflag</code> variable, or injecting the parameters using an orchestration system (for example, Kubernetes):</p><pre class="programlisting">
PER_CONTAINER_CONF='{ "app_checks": [{ "name": "redis", "check_module": "redisdb", "pattern": {"comm": "redis-server"}, "conf": { "host": "127.0.0.1", "port": "6379", "password": "protected"} }] }'

docker run --name redis -v /tmp/redis.conf:/etc/redis.conf -e SYSDIG_AGENT_CONF="${PER_CONTAINER_CONF}" -d redis /etc/redis.conf</pre><h6 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-MetricsLimit" class="bridgehead">Metrics Limit</h6><p>Metric limits are defined by your payment plan. If more metrics are needed please contact your sales representative with your use case.</p><p>Note that a metric with the same name but different tag name will count as a unique metric by the agent. Example: a metric <code class="code">'user.clicks'</code> with the tag <code class="code">'country=us'</code> and another <span class="bold bold"><strong> <code class="code">'user.clicks'</code> </strong></span> with the <code class="code">'tag country=it'</code>are considered two metrics which count towards the limit.</p><h6 id="UUID-dca0930e-142c-ecba-011a-ead60d8238e2_id_IntegrateApplicationsDefaultAppChecks-SupportedApplications" class="bridgehead">Supported Applications</h6><p>Below is the supported list of applications the agent will automatically poll.</p><p>Some app-check scripts will need to be configured since no defaults exist, while some applications may need to be configured to output their metrics. Click a highlighted link to see application-specific notes.</p><p>Active MQ</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-2679422e-591e-4da2-313e-978c0646cf26" title="Apache">Apache</a> </p><p>Apache CouchDB</p><p>Apache HBase</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564" title="Apache Kafka">Apache Kafka</a> </p><p>Apache Zookeeper</p><p>Cassandra</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab" title="Consul">Consul</a> </p><p>CEPH</p><p> <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Monitor/pages/297369637/Couchbase" target="_blank">Couchbase</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5" title="Elasticsearch">Elasticsearch</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436" title="etcd">etcd</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0" title="fluentd">fluentd</a> </p><p>Gearman</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ecd9263a-2552-744b-d83f-b34d42b5266e" title="Go">Go</a> </p><p>Gunicorn</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8" title="HAProxy">HAProxy</a> </p><p>HDFS</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6" title="HTTP">HTTP</a> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4619941f-bedb-ea16-a22c-62e2dfec751f" title="Jenkins">Jenkins</a> </p><p>JVMKyoto</p><p>Tycoon</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7" title="Lighttpd">Lighttpd</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb" title="Memcached">Memcached</a> </p><p>MemSQL</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e" title="Mesos/Marathon">Mesos/Marathon </a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3" title="MongoDB">MongoDB</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0" title="MySQL">MySQL</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13" title="NGINX and NGINX Plus">NGINX and NGINX Plus</a> <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Monitor/pages/297828360/NTP" target="_blank">NTP</a> </p><p>OracleDB</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64" title="PGBouncer">PGBouncer</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe" title="PHP-FPM">PHP-FPM</a> </p><p>Postfix</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790" title="PostgreSQL">PostgreSQL</a> </p><p> <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/204603650/Integrate+Prometheus+Metrics" target="_blank">Prometheus</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d" title="RabbitMQ">RabbitMQ</a> </p><p> <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Monitor/pages/297468021/RedisDB" target="_blank">Redis</a> </p><p>Riak</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-3f95785a-dfe2-8963-f37f-ff1adac03558" title="Riak CS">Riak CS</a> </p><p>Supervisord</p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d" title="SNMP">SNMP</a> </p><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627" title="TCP">TCP</a> </p><p>TokuMX</p><p> <span class="bold bold"><strong>NOTE: It is also possible to:</strong></span> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6897-create-a-custom-app-check.html" title="Create a Custom App Check">Create a Custom App Check</a> from scratch, or</p></li><li class="listitem"><p> <a class="link" href="26547-6898-create-per-container-custom-app-checks.html" title="Create Per-Container Custom App Checks">Create Per-Container Custom App Checks</a> </p></li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-bf0efbe0-abcd-85c1-1cb6-806f8f3ac73b" data-publication-date="" id="UUID-2679422e-591e-4da2-313e-978c0646cf26"><div class="titlepage"><div><div class="title"><h5 class="title">Apache</h5></div></div></div><p> <a class="link" href="https://httpd.apache.org/" target="_blank">Apache</a> web server is an open-source, web server creation, deployment, and management software. If Apache is installed on your environment, the Sysdig agent will connect using the <code class="code">mod_status</code> module on Apache. You may need to edit the default entries in the agent configuration file to connect. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-ApacheSetup" title="Apache Setup">Apache Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-Example1" title="Example 1">Example 1</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-MetricsAvailable" title="Metrics Available">Metrics Available</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-UIExamples" title="UI Examples">UI Examples</a> </p></li></ul></div></li></ul></div><h6 id="UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-ApacheSetup" class="bridgehead">Apache Setup</h6><p>Install <code class="code">mod_status</code> on your Apache servers and enable <code class="code">ExtendedStatus. </code> </p><p>The following configuration is required. If it is already present, then un-comment the lines, otherwise add the configuration.</p><pre class="programlisting">LoadModule status_module modules/mod_status.so
...

&lt;Location /server-status&gt;
    SetHandler server-status
    Order Deny,Allow
    Deny from all
    Allow from localhost
&lt;/Location&gt;
...

ExtendedStatus On</pre><h6 id="UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><p>Apache has a common default for exposing metrics. The process command name can be either <code class="code">apache2</code> or <code class="code">httpd</code>. By default, the Sysdig agent will look for the process <code class="code">apache2</code>. If named differently in your environment (e.g. <code class="code">httpd</code>), edit the configuration file to match the process name as shown in Example 1.</p><h6 id="UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with Apache and collect all metrics.</p><pre class="programlisting">app_checks:
  - name: apache
    check_module: apache
    pattern: 
      comm: apache2
    conf:
      apache_status_url: "http://localhost:{port}/server-status?auto"
    log_errors: false </pre><h6 id="UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-Example1" class="bridgehead">Example 1</h6><p>If it is necessary to edit <code class="code">dragent.yaml</code> to change the process name, use the following example and update the <code class="code">comm</code> with the value <code class="code">httpd.</code> </p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><pre class="programlisting">app_checks:
  - name: apache
    check_module: apache
    pattern:
      comm: httpd
    conf:
      apache_status_url: "http://localhost/server-status?auto"
    log_errors: false


</pre><h6 id="UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>The Apache metrics are listed in the metrics dictionary here: <a class="link" href="26547-6901-applications.html#UUID-fd5c9e25-8f68-fbe1-8b24-ad975707b356" title="Apache Metrics">Apache Metrics</a>.</p><h6 id="UUID-2679422e-591e-4da2-313e-978c0646cf26_id_Apache-UIExamples" class="bridgehead">UI Examples</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="573px"><tr style="height: 250px"><td><img src="image/uuid-f656e575-e68b-bb62-1bf4-eff410fa5735-en.png" style="max-width: 573px; max-height: 250px; " alt="309362703.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-96949c65-c4c8-dcb6-188a-2913429c89e3-en.png" style="max-width: 575px; " alt="309362711.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-eb8ad655-5102-9dc0-2955-3f2c0f687363-en.png" style="max-width: 575px; " alt="309362719.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-c61ed85e-6ed1-892b-ad7e-dac196737fae-en.png" style="max-width: 575px; " alt="309362727.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-712537eb-7492-15e5-3fc5-3b96d86c9b69-en.png" style="max-width: 575px; " alt="309362735.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-9f13122f-cc62-b48f-af5b-955e5c5cc05f" data-publication-date="" id="UUID-42479547-5849-0f10-b06b-9377a4614564"><div class="titlepage"><div><div class="title"><h5 class="title">Apache Kafka</h5></div></div></div><p> <a class="link" href="https://kafka.apache.org/" target="_blank">Apache Kafka</a> is a distributed streaming platform. Kafka is used for building real-time data pipelines and streaming apps. It is horizontally scalable, fault-tolerant, wicked fast, and runs in production in thousands of companies. If Kafka is installed on your environment, the Sysdig agent will automatically connect. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>The Sysdig agent automatically collects metrics from Kafka via JMX polling. You need to provide consumer names and topics in the agent config file to collect consumer-based Kafka metrics.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-KafkaSetup" title="Kafka Setup">Kafka Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-Example1BasicConfiguration" title="Example 1: Basic Configuration">Example 1: Basic Configuration </a> </p></li><li class="listitem"><p> Example 2: Store Consumer Group Info (Kafka 9+)  </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-Example3AggregatePartitionsattheTopicLevel" title="Example 3: Aggregate Partitions at the Topic Level">Example 3: Aggregate Partitions at the Topic Level</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-Example4CustomTags" title="Example 4: Custom Tags">Example 4: Custom Tags</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> Kafka Consumer Metrics (App Checks) </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-JMXMetrics" title="JMX Metrics">JMX Metrics</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-KafkaSetup" class="bridgehead">Kafka Setup</h6><p>Kafka will automatically expose all metrics. You do not need to add anything on the Kafka instance.</p><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><p>Metrics from Kafka via JMX polling are already configured in the agent's default-settings configuration file. Metrics for consumers, however, need to use app-checks to poll the Kafka and Zookeeper API. You need to provide consumer names and topics in <code class="code">dragent.yaml</code> file.</p><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>Since consumer names and topics are environment-specific, a default configuration is not present in <code class="code">dragent.default.yaml</code>.</p><p>Refer to the following examples for adding Kafka checks to <code class="code">dragent.yaml. </code> </p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-Example1BasicConfiguration" class="bridgehead">Example 1: Basic Configuration</h6><p>A basic example with sample consumer and topic names:</p><pre class="programlisting">app_checks:
  - name: kafka
    check_module: kafka_consumer
    pattern:
      comm: java
      arg: kafka.Kafka
    conf:
      kafka_connect_str: "127.0.0.1:9092" # kafka address, usually localhost as we run the check on the same instance
      zk_connect_str: "localhost:2181" # zookeeper address, may be different than localhost
      zk_prefix: /
    consumer_groups:
      sample-consumer-1: # sample consumer name
        sample-topic-1: [0, ] # sample topic name and partitions
      sample-consumer-2: # sample consumer name
        sample-topic-2: [0, 1, 2, 3] # sample topic name and partitions</pre><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-Example2StoreConsumerGroupInfoKafka9" class="bridgehead">Example 2: Store Consumer Group Info (Kafka 9+)</h6><p>From Kafka 9 onwards, you can store consumer group config info inside Kafka itself for better performance.</p><pre class="programlisting">app_checks:
  - name: kafka
    check_module: kafka_consumer
    pattern: 
      comm: java
      arg: kafka.Kafka
    conf: 
      kafka_connect_str: "localhost:9092"
      zk_connect_str: "localhost:2181"
      zk_prefix: /
      kafka_consumer_offsets: true
      consumer_groups: 
        sample-consumer-1: # sample consumer name
          sample-topic-1: [0, ] # sample topic name and partitions</pre><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>If <code class="code">kafka_consumer_offsets entry is </code>set to <code class="code">true</code> the app check will look for consumer offsets in Kafka. The appcheck will also look in Kafka if <code class="code">zk_connect_str</code> is not set.</p></div><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-Example3AggregatePartitionsattheTopicLevel" class="bridgehead">Example 3: Aggregate Partitions at the Topic Level</h6><p>To enable aggregation of partitions at the topic level, use <code class="code">kafka_consumer_topics</code> with <code class="code">aggregate_partitions</code> = <code class="code">true</code>.</p><p>In this case the app check will aggregate the <code class="code">lag</code> &amp; <code class="code">offset</code> values at the partition level, reducing the number of metrics collected.</p><p>Set <code class="code">aggregate_partitions</code> =<code class="code"> false</code> to disable metrics aggregation at the partition level. In this case, the appcheck will show <code class="code">lag</code> and <code class="code">offset</code> values for each partition.</p><pre class="programlisting">app_checks:
  - name: kafka
    check_module: kafka_consumer
    pattern: 
      comm: java
      arg: kafka.Kafka
    conf: 
      kafka_connect_str: "localhost:9092"
      zk_connect_str: "localhost:2181"
      zk_prefix: /
      kafka_consumer_offsets: true
      kafka_consumer_topics:
        aggregate_partitions: true
      consumer_groups:
        sample-consumer-1: # sample consumer name
          sample-topic-1: [0, ] # sample topic name and partitions
        sample-consumer-2: # sample consumer name
          sample-topic-2: [0, 1, 2, 3] # sample topic name and partitions</pre><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-Example4CustomTags" class="bridgehead">Example 4: Custom Tags</h6><p>Optional tags can be applied to every emitted metric, service check, and/or event.</p><pre class="programlisting">app_checks:
  - name: kafka
    check_module: kafka_consumer
    pattern: 
      comm: java
      arg: kafka.Kafka
    conf: 
      kafka_connect_str: "localhost:9092"
      zk_connect_str: "localhost:2181"
      zk_prefix: /
      consumer_groups:
        sample-consumer-1: # sample consumer name
          sample-topic-1: [0, ] # sample topic name and partitions
    tags:  ["key_first_tag:value_1", "key_second_tag:value_2", "key_third_tag:value_3"]

</pre><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-MetricsAvailable" class="bridgehead">Metrics Available</h6><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-KafkaConsumerMetricsAppChecks" class="bridgehead">Kafka Consumer Metrics (App Checks)</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-918c63b5-5844-2d6e-c8f8-b39c459ed3be" title="Apache Kafka Consumer Metrics">Apache Kafka Consumer Metrics</a>.</p><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-JMXMetrics" class="bridgehead">JMX Metrics</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-72b9c651-0718-55aa-31cb-e67dc51752c4" title="Apache Kafka JMX Metrics">Apache Kafka JMX Metrics</a>.</p><h6 id="UUID-42479547-5849-0f10-b06b-9377a4614564_id_ApacheKafka-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-712ec600-65d3-6fa6-c668-9133aeb6af98-en.png" style="max-width: 500px; " alt="307298371.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-6f6b67d1-d64d-d669-e74f-cdd1570b5227-en.png" style="max-width: 500px; " alt="307298375.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-9ef3498c-6f32-8fcc-f8f8-6b14d79a299b-en.png" style="max-width: 500px; " alt="307298379.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-966a47dd-6cdd-cd08-1e4c-f9e93b871fdb-en.png" style="max-width: 500px; " alt="307298383.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-ac1f5c85-47f7-e457-73a5-4a2c8ea2b564-en.png" style="max-width: 500px; " alt="307298387.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-43c86bf5-155a-90ef-77df-593d85765930" data-publication-date="" id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab"><div class="titlepage"><div><div class="title"><h5 class="title">Consul</h5></div></div></div><p> <a class="link" href="https://www.consul.io/" target="_blank">Consul</a> is a distributed service mesh to connect, secure, and configure services across any runtime platform and public or private cloud. If Consul is installed on your environment, the Sysdig agent will automatically connect and collect basic metrics. If the Consul Access Control List (ACL) is configured, you may need to edit the default entries to connect. Also, additional latency metrics can be collected by modifying default entries. See the <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration</a> section.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>It's easy! Sysdig automatically detects metrics from this app based on standard default configurations.</p></div><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-ConsulConfiguration" title="Consul Configuration">Consul Configuration</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-Example1EnableLeaderChangeEvent" title="Example 1: Enable Leader Change Event">Example 1: Enable Leader Change Event</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-Example2EnableLatencyMetrics" title="Example 2: Enable Latency Metrics">Example 2: Enable Latency Metrics</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-Example3EnableACLToken" title="Example 3: Enable ACL Token">Example 3: Enable ACL Token</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-StatsDMetrics" title="StatsD Metrics">StatsD Metrics</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-ConsulConfiguration" class="bridgehead">Consul Configuration</h6><p>Consul is ready to expose metrics without any special configuration.</p><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> <code class="code"></code>uses the following code to connect with Consul and collect basic metrics.</p><pre class="programlisting">app_checks:
  - name: consul
    pattern:
      comm: consul
    conf:
      url: "http://localhost:8500"
      catalog_checks: yes</pre><p>With the <code class="code">dragent.default.yaml</code> file, the below set of metrics are available in the Sysdig Monitor UI:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col></colgroup><thead><tr><th class="th"><p>Metrics name</p></th></tr></thead><tbody><tr><td class="td"><p>consul.catalog.nodes_critical</p></td></tr><tr><td class="td"><p>consul.catalog.nodes_passing</p></td></tr><tr><td class="td"><p>consul.catalog.nodes_up</p></td></tr><tr><td class="td"><p>consul.catalog.nodes_warning</p></td></tr><tr><td class="td"><p>consul.catalog.total_nodes</p></td></tr><tr><td class="td"><p>consul.catalog.services_critical</p></td></tr><tr><td class="td"><p>consul.catalog.services_passing</p></td></tr><tr><td class="td"><p>consul.catalog.services_up</p></td></tr><tr><td class="td"><p>consul.catalog.services_warning</p></td></tr><tr><td class="td"><p>consul.peers</p></td></tr></tbody></table></div><p>Additional metrics and event can be collected by adding configuration in <code class="code">dragent.yaml</code> file. The ACL token must be provided if enabled. See the following examples.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> <code class="code"></code>directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-Example1EnableLeaderChangeEvent" class="bridgehead">Example 1: Enable Leader Change Event</h6><p> <code class="code">self_leader_check</code> An enabled node will watch for itself to become the leader and will emit an event when that happens. It can be enabled on all nodes.</p><pre class="programlisting">app_checks:
  - name: consul
    pattern:
      comm: consul
    conf:
      url: "http://localhost:8500"
      catalog_checks: yes
      self_leader_check: yes
    logs_enabled: true</pre><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-Example2EnableLatencyMetrics" class="bridgehead">Example 2: Enable Latency Metrics</h6><p>If the <code class="code">network_latency_checks </code>flag is enabled, then the Consul network coordinates will be retrieved and the latency calculated for each node and between data centers.</p><pre class="programlisting">app_checks:
  - name: consul
    pattern:
      comm: consul
    conf:
      url: "http://localhost:8500"
      catalog_checks: yes
      network_latency_checks: yes
    logs_enabled: true</pre><p>With the above changes, you can see the following additional metrics:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><thead><tr><th class="th"><p>Metrics name</p></th></tr></thead><tbody><tr><td class="td"><p> <a class="link" href="http://consul.net" target="_blank">consul.net</a>.node.latency.min</p></td></tr><tr><td class="td"><p> <a class="link" href="http://consul.net" target="_blank">consul.net</a>.node.latency.p25</p></td></tr><tr><td class="td"><p> <a class="link" href="http://consul.net" target="_blank">consul.net</a>.node.latency.median</p></td></tr><tr><td class="td"><p> <a class="link" href="http://consul.net" target="_blank">consul.net</a>.node.latency.p75</p></td></tr><tr><td class="td"><p> <a class="link" href="http://consul.net" target="_blank">consul.net</a>.node.latency.p90</p></td></tr><tr><td class="td"><p> <a class="link" href="http://consul.net" target="_blank">consul.net</a>.node.latency.p95</p></td></tr><tr><td class="td"><p> <a class="link" href="http://consul.net" target="_blank">consul.net</a>.node.latency.p99</p></td></tr><tr><td class="td"><p> <a class="link" href="http://consul.net" target="_blank">consul.net</a>.node.latency.max</p></td></tr></tbody></table></div><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-Example3EnableACLToken" class="bridgehead">Example 3: Enable ACL Token</h6><p>When the <code class="code"> <a class="link" href="https://www.consul.io/docs/guides/acl.html" target="_blank">ACL System</a> </code>is enabled in Consul, the <code class="code">ACL Agent Token</code> must be added in <code class="code">dragent.yaml</code> in order to collect metrics.</p><p>Follow Consul's official documentation to <a class="link" href="">Configure ACL</a>, <a class="link" href="">Bootstrap ACL</a> and <a class="link" href="">Create Agent Token</a>.</p><pre class="programlisting">app_checks:
  - name: consul
    pattern:
      comm: consul
    conf:
      url: "http://localhost:8500"
      acl_token: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" #Add agent token
      catalog_checks: yes
      logs_enabled: true</pre><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-StatsDMetrics" class="bridgehead">StatsD Metrics</h6><p>In addition to the metrics from the Sysdig app-check, there are many other metrics that Consul can send using StatsD. Those metrics will be automatically collected by the Sysdig agent's StatsD integration if Consul is configured to send them.</p><p>Add <code class="code">statsd_address </code>under <code class="code">telemetry </code>to the Consul config file. The default config file location is <code class="code">/consul/config/local.json</code> </p><pre class="programlisting">{
...
  "telemetry": {
     "statsd_address": "127.0.0.1:8125"
  }
...
}</pre><p>See <a class="link" href="https://www.consul.io/docs/agent/telemetry.html" target="_blank">Telemetry Metrics</a> for more details.</p><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-35edee3f-e20a-3b3d-b6c0-f15d9583ab14" title="Consul Metrics">Consul Metrics</a>.</p><h6 id="UUID-ee0b1eb5-4354-4541-bd19-ea763230deab_id_Consul-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr style="height: 305px"><td><img src="image/uuid-5c6b2241-943e-42eb-cf0e-e3b8e163a8eb-en.png" style="max-width: 500px; max-height: 305px; " alt="307069000.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-ce17ae50-5c81-7ffd-1e99-93c81304fd04-en.png" style="max-width: 500px; " alt="307069004.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr style="height: 301px"><td><img src="image/uuid-a55c2b3f-d13d-b393-0acb-d1a800a3d069-en.png" style="max-width: 500px; max-height: 301px; " alt="307069008.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-47591b86-58d5-733b-8987-ee5f6aa77355-en.png" style="max-width: 500px; " alt="307069012.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-07a0d06d-19da-ee89-1701-c18d4647a2e1" data-publication-date="" id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d"><div class="titlepage"><div><div class="title"><h5 class="title">Couchbase</h5></div></div></div><p> <a class="link" href="https://www.couchbase.com/" target="_blank">Couchbase</a> Server is a distributed, open-source, <a class="link" href="https://en.wikipedia.org/wiki/NoSQL" target="_blank">NoSQL</a> database engine. The core architecture is designed to simplify building modern applications with a flexible data model and simpler high availability, high scalability, high performance, and advanced security. If Couchbase is installed on your environment, the Sysdig agent will automatically connect. If authentication is configured, you may need to edit the default entries to connect. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>The Sysdig agent automatically collects all bucket and node metrics. You can also edit the configuration to collect query metrics.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-CouchbaseSetup" title="Couchbase Setup">Couchbase Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-Example1Authentication" title="Example 1: Authentication">Example 1: Authentication</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-Example2QueryStats" title="Example 2: Query Stats">Example 2: Query Stats</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-MetricsAvailable" title="Metrics Available">Metrics Available</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-CouchbaseSetup" class="bridgehead">Couchbase Setup</h6><p>Couchbase will automatically expose all metrics. You do not need to configure anything on the Couchbase instance.</p><h6 id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with Couchbase and collect all bucket and node metrics.</p><pre class="programlisting">app_checks:
  - name: couchbase
    pattern:
      comm: beam.smp
      arg: couchbase
      port: 8091
    conf:
      server: http://localhost:8091</pre><p>If authentication is enabled, you need to edit <code class="code">dragent.yaml</code> file to connect with Couchbase. See Example 1.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-Example1Authentication" class="bridgehead">Example 1: Authentication</h6><p>Replace <code class="code">&lt;username&gt; </code>and <code class="code">&lt;password&gt; </code>with appropriate values and update the <code class="code">dragent.yaml</code> file.</p><pre class="programlisting">app_checks:
  - name: couchbase
    pattern:
      comm: beam.smp
      arg: couchbase
      port: 8091
    conf:
      server: http://localhost:8091
      user: &lt;username&gt;
      password: &lt;password&gt;
      # The following block is optional and required only if the 'path' and
      # 'port' need to be set to non-default values specified here
      cbstats:
        port: 11210
        path: /opt/couchbase/bin/cbstats</pre><h6 id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-Example2QueryStats" class="bridgehead">Example 2: Query Stats</h6><p>Additionally, you can configure <code class="code">query_monitoring_url </code>to get query monitoring stats. This is available from Couchbase version 4.5. See <a class="link" href="https://developer.couchbase.com/documentation/server/4.5/tools/query-monitoring.html" target="_blank">Query Monitoring</a> for more detail.</p><pre class="programlisting">app_checks:
  - name: couchbase
    pattern:
      comm: beam.smp
      arg: couchbase
      port: 8091
    conf:
      server: http://localhost:8091
      query_monitoring_url: http://localhost:8093</pre><h6 id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-344a33a3-0273-e5d8-a144-026748fcd04e" title="Couchbase Metrics">Couchbase Metrics</a>.</p><h6 id="UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d_id_Couchbase-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-6183f668-e1d8-c017-5100-3e43906dd4ab-en.png" style="max-width: 600px; " alt="298680325.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-7ef9a6be-1cc1-b12d-6736-25d6f89a369a-en.png" style="max-width: 600px; " alt="298647573.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-ec8e1e98-4d60-89cd-2606-d72d430d023b-en.png" style="max-width: 600px; " alt="298647578.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-58e20c34-771a-5501-dab9-5bfa339f203b-en.png" style="max-width: 600px; " alt="298582030.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-6b8702c7-f4ff-78b2-5818-74af13c2a6d2" data-publication-date="" id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5"><div class="titlepage"><div><div class="title"><h5 class="title">Elasticsearch</h5></div></div></div><p> <a class="link" href="https://www.elastic.co" target="_blank">Elasticsearch</a> is an open-source, distributed, document storage and search engine that stores and retrieves data structures in near real-time.Elasticsearch represents data in the form of structured JSON documents, and makes full-text search accessible via RESTful API and web clients for languages like PHP, Python, and Ruby. It’s also <span class="italic italic">elastic</span> in the sense that it’s easy to scale horizontally—simply add more nodes to distribute the load. If <a class="link" href="https://www.elastic.co/products/elasticsearch" target="_blank">Elasticsearch</a> is installed on your environment, the Sysdig agent willautomatically connect in most of the cases. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>The Sysdig Agent automatically collects default metrics. You can also edit the configuration to collect <a class="link" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.5/glossary.html" target="_blank">Primary Shard</a> stats.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-ElasticsearchSetup" title="Elasticsearch Setup">Elasticsearch Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-Example1EnablePrimaryshardStatistics" title="Example 1: Enable Primary shard Statistics">Example 1: Enable Primary shard Statistics</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-pshard-specificMetrics" title="pshard-specific Metrics">pshard-specific Metrics</a> </p></li></ul></div></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-AllAvailableMetrics" title="All Available Metrics">All Available Metrics</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-ElasticsearchSetup" class="bridgehead">Elasticsearch Setup</h6><p>Elasticsearch is ready to expose metrics without any special configuration.</p><h6 id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with Elasticsearch and collect basic metrics.</p><pre class="programlisting">app_checks:
  - name: elasticsearch
    check_module: elastic
    pattern:
      port: 9200
      comm: java
    conf:
      url: http://localhost:9200</pre><p>For more metrics, you may need to change the elasticsearch default setting in <code class="code">dragent.yaml</code>:</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-Example1EnablePrimaryshardStatistics" class="bridgehead">Example 1: Enable Primary shard Statistics</h6><pre class="programlisting">app_checks:
  - name: elasticsearch
    check_module: elastic
    pattern:
      port: 9200
      comm: java
    conf:
      url: http://localhost:9200
      pshard_stats : true</pre><h6 id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-pshard-specificMetrics" class="bridgehead">pshard-specific Metrics</h6><p>Enable <code class="code">pshard_stats</code> to monitor the following additional metrics:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col></colgroup><thead><tr><th class="th"><p>Metric Name</p></th></tr></thead><tbody><tr><td class="td"><p>elasticsearch.primaries.flush.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.flush.total.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.docs.count</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.docs.deleted</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.get.current</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.get.exists.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.get.exists.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.get.missing.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.get.missing.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.get.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.get.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.indexing.delete.current</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.indexing.delete.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.indexing.delete.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.indexing.index.current</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.indexing.index.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.indexing.index.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.merges.current</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.merges.current.docs</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.merges.current.size</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.merges.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.merges.total.docs</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.merges.total.size</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.merges.total.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.refresh.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.refresh.total.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.search.fetch.current</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.search.fetch.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.search.fetch.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.search.query.current</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.search.query.time</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.search.query.total</p></td></tr><tr><td class="td"><p>elasticsearch.primaries.store.size</p></td></tr></tbody></table></div><h6 id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-AllAvailableMetrics" class="bridgehead">All Available Metrics</h6><p>With the default settings and the <code class="code">pshard</code> setting, the total available metrics are listed here: <a class="link" href="26547-6901-applications.html#UUID-e8d67003-f67a-eec6-7419-7d434f93c66d" title="Elasticsearch Metrics">Elasticsearch Metrics</a>.</p><h6 id="UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5_id_Elasticsearch-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-466e40f4-3e18-d242-f2e1-4828cd1fc584-en.png" style="max-width: 500px; " alt="309297159.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-0a5eba39-5406-9393-01ee-001fe98601a5-en.png" style="max-width: 500px; " alt="309297163.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-81d62226-2c7a-40bc-66e1-809883c151cf-en.png" style="max-width: 500px; " alt="309297167.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-2106780d-8297-7071-8970-28580ce229f6-en.png" style="max-width: 500px; " alt="309297171.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr style="height: 278px"><td><img src="image/uuid-50abc509-ca29-0dbb-215d-5bfdd5a1fa1a-en.png" style="max-width: 500px; max-height: 278px; " alt="309297175.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-88b8466f-2ed9-b0aa-66d8-2071646c3f08" data-publication-date="" id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436"><div class="titlepage"><div><div class="title"><h5 class="title">etcd</h5></div></div></div><p> <a class="link" href="https://coreos.com/etcd/" target="_blank">etcd</a>is a distributed key-value store that provides a reliable way to store data across a cluster of machines. If etcd is installed on your environment, the Sysdig agent will automatically connect. If you are using ectd older than version 2, you may need to edit the default entries to connect. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>The Sysdig Agent automatically collects all metrics.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-etcdSetup" title="etcd Setup">etcd Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-Example1" title="Example 1">Example 1</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-Example2SSLTLSCertificate" title="Example 2: SSL/TLS Certificate">Example 2: SSL/TLS Certificate</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-etcdSetup" class="bridgehead">etcd Setup</h6><p>etcd will automatically expose all metrics. You do not need to add anything to the etcd instance.</p><h6 id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><p>The default agent configuration for etcd will look for the application on <code class="code">localhost, port 2379.</code> No customization is required.</p><h6 id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml </code>uses the following code to connect with etcd and collect all metrics.</p><pre class="programlisting">app_checks:
  - name: etcd
    pattern:
      comm: etcd
    conf:
      url: "http://localhost:2379" </pre><p>etcd (before version 2) does not listen on <code class="code">localhost</code>, so the Sysdig agent will not connect to it automatically. In such case, you may need edit the <code class="code">dragent.yaml</code> file with the hostname and port. See Example 1.</p><p>Alternatively, you can add the option <code class="code">-bind-addr 0.0.0.0:4001</code> to the etcd command line to allow the agent to connect.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-Example1" class="bridgehead">Example 1</h6><p>You can use <code class="code">{hostname}</code> and <code class="code">{port}</code> as a tokens in the <code class="code">conf:</code> section. This is the recommended setting for Kubernetes customers.</p><pre class="programlisting">app_checks:
  - name: etcd 
    pattern: 
      comm: etcd 
    conf: 
      url: "http://{hostname}:{port}"</pre><p>Alternatively you can specify the real hostname and port.</p><pre class="programlisting">app_checks:
  - name: etcd 
    pattern: 
      comm: etcd 
    conf: 
      url: "http://my_hostname:4000"  #etcd service listening on port 4000</pre><h6 id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-Example2SSLTLSCertificate" class="bridgehead">Example 2: SSL/TLS Certificate</h6><p>If encryption is used, add the appropriate SSL/TLS entries. Provide correct path of SSL/TLS key and certificates used in etcd configuration in fields <code class="code">ssl_keyfile, ssl_certfile, ssl_ca_certs</code>.</p><pre class="programlisting">app_checks:
  - name: etcd
    pattern:
      comm: etcd
    conf:
      url: "https://localhost:PORT"
      ssl_keyfile:  /etc/etcd/peer.key  # Path to key file
      ssl_certfile: /etc/etcd/peer.crt  # Path to SSL certificate
      ssl_ca_certs: /etc/etcd/ca.crt    # Path to CA certificate
      ssl_cert_validation: True</pre><h6 id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-ad86152f-e2d6-2fd7-8f72-dd8dbddb6710" title="etcd Metrics">etcd Metrics</a>.</p><h6 id="UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436_id_etcd-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-7c39eb42-3d33-345e-f37d-01be07c32e16-en.png" style="max-width: 500px; " alt="307134492.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-0ba73c8c-a3c5-22f2-5b07-e0a992cab603-en.png" style="max-width: 500px; " alt="307134496.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-2683c247-a3da-d192-2d35-f7df7d0ecf16-en.png" style="max-width: 500px; " alt="307134500.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-42cbeb85-7eeb-fc4e-ed89-d187e86da58a-en.png" style="max-width: 500px; " alt="307134504.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-b985fd65-f2d9-63df-2b4a-e78a4c145db6" data-publication-date="" id="UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0"><div class="titlepage"><div><div class="title"><h5 class="title">fluentd</h5></div></div></div><p> <a class="link" href="https://www.fluentd.org/" target="_blank">Fluentd</a> is an open source data collector, which allows unifying data collection and consumption to better use and understand data. Fluentd structures data as JSON as much as possible, to unify all facets of processing log data: collecting, filtering, buffering, and outputting logs across multiple sources and destinations. If Fluentd is installed on your environment, the Sysdig agent will automatically connect. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-DefaultConfiguration" title="Default Configuration">Default Configuration</a>. The Sysdig agent automatically collects default metrics.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-FluentdSetup" title="Fluentd Setup">Fluentd Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-Example1" title="Example1:">Example1:</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-FluentdSetup" class="bridgehead">Fluentd Setup</h6><p>Fluentd can be installed as a package (.deb, .rpm, etc) depending on the OS flavor, or it can be deployed in a Docker container. Fluentd installation is documented <a class="link" href="https://docs.fluentd.org/v0.12/categories/installation" target="_blank">here</a>. For the examples on this page, a <a class="link" href="https://docs.fluentd.org/v0.12/articles/install-by-deb" target="_blank">.deb package installation</a> is used.</p><p>After installing Fluentd, add following lines in <span class="bold bold"><strong> <code class="code">fluentd.conf</code> </strong></span>:</p><pre class="programlisting">&lt;source&gt;
  @type monitor_agent
  bind 0.0.0.0
  port 24220
&lt;/source&gt;</pre><h6 id="UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's<code class="code">dragent.default.yaml </code>uses the following code to connect with Fluentd and collect default metrics.</p><p>(If you use a non-standard port for <span class="bold bold"><strong> <code class="code">monitor_agent</code> </strong></span>, you can configure it as usual in the agent config file <span class="bold bold"><strong> <code class="code">dragent.yaml.)</code> </strong></span> </p><pre class="programlisting">  - name: fluentd
    pattern:
      comm: fluentd
    conf:
      monitor_agent_url: http://localhost:24220/api/plugins.json</pre><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-Example1" class="bridgehead">Example1:</h6><p>To generate the metric data, it is necessary to generate some logs through an application. In the following example, HTTP is used. (For more information, see <a class="link" href="https://docs.fluentd.org/v0.12/articles/life-of-a-fluentd-event" target="_blank">Life of a Fluentd event</a>.)</p><p>Execute following command on in the Fluentd environment:</p><pre class="programlisting">
$ curl -i -X POST -d 'json={"action":"login","user":2}' http://localhost:8888/test.cycle</pre><p>Expected output: (Note: Here the status code is 200 OK, as HTTP traffic is successfully generated; it will vary per application.)</p><pre class="programlisting">HTTP/1.1 200 OK
Content-type: text/plain
Connection: Keep-Alive
Content-length: 0</pre><p>Metrics Available</p><p>See <a class="link" href="26547-6901-applications.html#UUID-1461a1b0-a58b-b0a0-bf3a-5b4dc8973fc7" title="fluentd Metrics">fluentd Metrics</a>.</p><h6 id="UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0_id_fluentd-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-d31fc7b7-419f-0453-610d-d1992fee5a98-en.png" style="max-width: 550px; " alt="307429396.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-f4b729ed-f09f-8578-cebc-f4962c53dbd8-en.png" style="max-width: 550px; " alt="307429400.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-c71683d0-1c8f-8589-45ac-2f3afe467762-en.png" style="max-width: 550px; " alt="307429404.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-a14dc414-fd6c-d2d4-ea54-57f26bdd7247-en.png" style="max-width: 550px; " alt="307429408.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-d35fffd8-e0cb-a2af-09aa-0a2f06a5b6e0-en.png" style="max-width: 550px; " alt="307429412.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-e2c00e72-ebdc-c721-296e-c8e3be58fb80" data-publication-date="" id="UUID-ecd9263a-2552-744b-d83f-b34d42b5266e"><div class="titlepage"><div><div class="title"><h5 class="title">Go</h5></div></div></div><p> <a class="link" href="https://golang.org/pkg/expvar/" target="_blank">Golang expvar</a>is the standard interface designed to instrument and expose custom metrics from a <code class="code">Go</code> program via <code class="code">HTTP</code>. In addition to custom metrics, it also exports some metrics out-of-the-box, such as command line arguments, allocation stats, heap stats, and garbage collection metrics.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-Go_expvarSetup" title="Go_expvar Setup">Go_expvar Setup</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-Example1" title="Example 1">Example 1</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-MetricsAvailable" title="Metrics Available">Metrics Available</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-Go_expvarSetup" class="bridgehead">Go_expvar Setup</h6><p>You will need to create a custom entry in the user settings config file for your Go application, due to the difficulty in determining if an application is written in Go by looking at process names or arguments. Be sure your app has <code class="code">expvars</code> enabled, which means importing the <span class="bold bold"><strong> <code class="code">expvar</code> </strong></span>module and having an HTTP server started from inside your app, as follows:</p><pre class="programlisting">import (
    ...
    "net/http"
    "expvar"
    ...
)

// If your application has no http server running for the DefaultServeMux,
// you'll have to have a http server running for expvar to use, for example
// by adding the following to your init function
func init() {
    go http.ServeAndListen(":8080", nil)
}

// You can also expose variables that are specific to your application
// See http://golang.org/pkg/expvar/ for more information

var (
    exp_points_processed = expvar.NewInt("points_processed")
)

func processPoints(p RawPoints) {
    points_processed, err := parsePoints(p)
    exp_points_processed.Add(points_processed)
    ...
}</pre><p>See also the following blog entry: <a class="link" href="https://sysdig.com/blog/golang-expvar-custom-metrics/" target="_blank">How to instrument Go code with custom expvar metrics</a>.</p><p>Sysdig Agent Configuration</p><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>No default configuration for Go is provided in the Sysdig agent <code class="code">dragent.default.yaml</code> file. You must edit the agent config file as described in Example 1.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-Example1" class="bridgehead">Example 1</h6><p>Add the following code sample to <code class="code">dragent.yaml</code> to collect Go metrics.</p><pre class="programlisting">app_checks:
  - name: go-expvar
    check_module: go_expvar
    pattern:
          comm: go-expvar
    conf:
      expvar_url: "http://localhost:8080/debug/vars" # automatically match url using the listening port
      # Add custom metrics if you want
      metrics:
        - path: system.numberOfSeconds
          type: gauge # gauge or rate
          alias: go_expvar.system.numberOfSeconds
        - path: system.lastLoad
          type: gauge
          alias: go_expvar.system.lastLoad
        - path: system.numberOfLoginsPerUser/.* # You can use / to get inside the map and use .* to match any record inside
          type: gauge
        - path: system.allLoad/.*
          type: gauge</pre><h6 id="UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-f961e5c4-6349-0ed6-cdba-8a7f7000411a" title="Go Metrics">Go Metrics</a>.</p><h6 id="UUID-ecd9263a-2552-744b-d83f-b34d42b5266e_id_Go-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr style="height: 250px"><td><img src="image/uuid-a307abde-c5c6-44b2-dc43-d0f1b9494ddd-en.png" style="max-width: 575px; max-height: 250px; " alt="309297213.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-0234778c-1f35-5335-2573-aca6d656ad9d-en.png" style="max-width: 575px; " alt="309297217.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr style="height: 250px"><td><img src="image/uuid-2d67a4f2-7adf-3d25-43dd-db029eac76e0-en.png" style="max-width: 575px; max-height: 250px; " alt="309297221.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="574px"><tr style="height: 250px"><td><img src="image/uuid-4f6e99ef-57c0-cf97-7261-34cf081fec45-en.png" style="max-width: 574px; max-height: 250px; " alt="309297225.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-a3155073-9770-b756-e973-ec0be7373865-en.png" style="max-width: 575px; " alt="309297229.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="577px"><tr style="height: 250px"><td><img src="image/uuid-9814a818-7b4b-c59b-c724-b16bb9c33242-en.png" style="max-width: 577px; max-height: 250px; " alt="309297233.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-85906d5d-e1b7-0f0a-8eba-127904a10f72-en.png" style="max-width: 575px; " alt="309297237.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="574px"><tr style="height: 250px"><td><img src="image/uuid-6673282e-8afc-06d9-a836-ea33a1bb1b0a-en.png" style="max-width: 574px; max-height: 250px; " alt="309297241.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-cb86df66-f1d0-9f73-05d2-4a469b6d0e84" data-publication-date="" id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8"><div class="titlepage"><div><div class="title"><h5 class="title">HAProxy</h5></div></div></div><p> <a class="link" href="http://www.haproxy.org/" target="_blank">HAProxy</a> provides a high-availability load balancer and proxy server for TCP- and HTTP-based applications which spreads requests across multiple servers.</p><p>The Sysdig agent automatically collects <code class="code">haproxy</code> metrics. You can also edit the agent configuration file to collect additional metrics.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-HAProxySetup" title="HAProxy Setup">HAProxy Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-Example1CollectStatusMetricsPerService" title="Example 1 Collect Status Metrics Per Service">Example 1 Collect Status Metrics Per Service </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-Example3CollectHAProxyStatsbyUNIXSocket" title="Example 3 Collect HAProxy Stats by UNIX Socket">Example 3 Collect HAProxy Stats by UNIX Socket </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-SetupHAProxyConfigFile" title="Set up HAProxy Config File">Set up HAProxy Config File </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-Editdragentyamlurl" title="Edit dragent.yaml url">Edit dragent.yaml url </a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-HAProxySetup" class="bridgehead">HAProxy Setup</h6><p>The <code class="code">stats</code> feature must be enabled on your HAProxy instance. This can be done by adding the following entry to the HAProxy configuration file <span class="bold bold"><strong> <code class="code">/etc/haproxy/haproxy.cfg</code> </strong></span> </p><pre class="programlisting">listen stats
  bind :1936
  mode http
  stats enable
  stats hide-version
  stats realm Haproxy\ Statistics
  stats uri /haproxy_stats
  stats auth stats:stats</pre><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with HAProxy and collect <code class="code">haproxy metrics:</code> </p><pre class="programlisting">app_checks:
  - name: haproxy
    pattern:
      comm: haproxy
      port: 1936
    conf:
      username: stats
      password: stats
      url: http://localhost:1936/
      collect_aggregates_only: True
    log_errors: false</pre><p>You can get a few additional status metrics by editing the configuration in <code class="code">dragent.yaml,</code>as in the following examples.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember! </strong></span>Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code> </p></div><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-Example1CollectStatusMetricsPerService" class="bridgehead">Example 1 Collect Status Metrics Per Service</h6><p>Enable the <span class="bold bold"><strong> <code class="code">collect_status_metrics</code> </strong></span> flag to collect the metrics <code class="code">haproxy.count_per_status</code>, and <code class="code">haproxy.backend_hosts</code>.</p><pre class="programlisting">app_checks:
  - name: haproxy
    pattern:
      comm: haproxy
      port: 1936
    conf:
      username: stats
      password: stats
      url: http://localhost:1936/haproxy_stats
      collect_aggregates_only: True
      collect_status_metrics: True
    log_errors: false</pre><p>Example 2 Collect Status Metrics Per Host</p><p>Enable:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <span class="bold bold"><strong> <code class="code">collect_status_metrics_by_host:</code> </strong></span>Instructs the check to collect status metrics per host, instead of per service. This only applies if <code class="code">`collect_status_metrics`</code> is <code class="code">true</code>.</p></li><li class="listitem"><p> <span class="bold bold"><strong> <code class="code">tag_service_check_by_host:</code> </strong></span> When this flag is set, the hostname is also passed with the service check '<code class="code">haproxy.backend_up</code>'.</p><p>By default, only the backend name and service name are associated with it.</p></li></ul></div><pre class="programlisting">app_checks:
  - name: haproxy
    pattern:
      comm: haproxy
      port: 1936
    conf:
      username: stats
      password: stats
      url: http://localhost:1936/haproxy_stats
      collect_aggregates_only: True
      collect_status_metrics: True
      collect_status_metrics_by_host: True
      tag_service_check_by_host: True
    log_errors: false</pre><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-Example3CollectHAProxyStatsbyUNIXSocket" class="bridgehead">Example 3 Collect HAProxy Stats by UNIX Socket</h6><p>If you’ve configured HAProxy to report statistics to a UNIX socket, you can set the <code class="code">url</code> in <code class="code">dragent.yaml</code> to the socket’s path (e.g., unix:///var/run/haproxy.sock).</p><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-SetupHAProxyConfigFile" class="bridgehead">Set up HAProxy Config File</h6><p>Edit your HAProxy configuration file (<span class="bold bold"><strong> <code class="code">/etc/haproxy/haproxy.cfg</code> </strong></span>) to add the following lines to the <code class="code">global</code> section:</p><pre class="programlisting">global
    [snip]
       stats socket /run/haproxy/admin.sock mode 660 level admin
       stats timeout 30s
    [snip]</pre><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-Editdragentyamlurl" class="bridgehead">Edit dragent.yaml url</h6><p>Add the socket URL from the HAProxy config to the dragent.yaml file:</p><pre class="programlisting">app_checks:
      - name: haproxy
        pattern:
          comm: haproxy
        conf:
          url: unix:///run/haproxy/admin.sock
        log_errors: True</pre><p>Metrics Available</p><p>See <a class="link" href="26547-6901-applications.html#UUID-4e74da53-084d-59a8-1755-b375c043cd7a" title="HAProxy Metrics">HAProxy Metrics</a>.</p><h6 id="UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8_id_HAProxy-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-3b05d66e-0a24-69ff-ceb1-1c05267b7ec0-en.png" style="max-width: 600px; " alt="309526556.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-076735fe-f593-e538-d5b5-6854d0dbf02c-en.png" style="max-width: 600px; " alt="309526560.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-6da377b5-0ffe-3345-fde8-86bd963acf9d-en.png" style="max-width: 600px; " alt="309526564.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-137abf49-d72a-41fb-f4ad-429d0036157a-en.png" style="max-width: 600px; " alt="309526568.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-7e2c4bcb-6db6-e809-0193-eaa3f49603fb-en.png" style="max-width: 600px; " alt="309526572.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-f6a81ab7-e86a-91b2-711b-b28acebbab9f-en.png" style="max-width: 600px; " alt="309526576.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-db660971-9193-f76f-d072-dbea72dc7431" data-publication-date="" id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6"><div class="titlepage"><div><div class="title"><h5 class="title">HTTP</h5></div></div></div><p>The HTTP check monitors HTTP-based applications for URL availability.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-HTTPSetup" title="HTTP Setup">HTTP Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-Example1" title="Example 1">Example 1</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-Example2" title="Example 2">Example 2</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-ServiceChecks" title="Service Checks">Service Checks</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-HTTPSetup" class="bridgehead">HTTP Setup</h6><p>You do not need to configure anything on HTTP-based applications for the Sysdig agent to connect.</p><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>No default entry is present in the <code class="code">dragent.default.yaml </code>for the HTTP check. You need to add an entry in <code class="code">dragent.yaml</code> as shown in following examples.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-Example1" class="bridgehead">Example 1</h6><p>First you must identify the process pattern (<code class="code">comm:</code>). It must match an actively running process for the HTTP check to work. Sysdig recommends the process be the one that is serving the URL being checked.</p><p>If the URL is is remote from the agent, the user should use a process that is always running, such as "<code class="code">systemd</code>".</p><p>Confirm the "<code class="code">comm</code>" value using the following command:</p><pre class="programlisting">cat /proc/1/comm</pre><p>Add the following entry to the <span class="bold bold"><strong> <code class="code">dragent.yaml</code> </strong></span> file and modify the <code class="code">'name:''comm:'</code> and <code class="code">'url:'</code> parameters as needed:</p><pre class="programlisting">app_checks:
  - name: EXAMPLE_WEBSITE
    check_module: http_check
    pattern:
      comm:  systemd
    conf:
      url: https://www.MYEXAMPLE.com</pre><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-Example2" class="bridgehead">Example 2</h6><p>There are multiple configuration options available with the HTTP check. A full list is provided in the table following Example 2. These keys should be listed under the <code class="code">conf: </code>section of the configuration in Example 1.</p><pre class="programlisting">app_checks:
  - name: EXAMPLE_WEBSITE
    check_module: http_check
    pattern:
      comm:  systemd
    conf:
      url: https://www.MYEXAMPLE.com
      # timeout: 1
      #  method: get
      #  data:
      #    &lt;KEY&gt;: &lt;VALUE&gt;
      #  content_match: '&lt;REGEX&gt;''
      #  reverse_content_match: false
      #  username: &lt;USERNAME&gt;
      #  ntlm_domain: &lt;DOMAIN&gt;
      #  password: &lt;PASSWORD&gt;
      #  client_cert: /opt/client.crt
      #  client_key: /opt/client.key
      #  http_response_status_code: (1|2|3)\d\d
      #  include_content: false
      #  collect_response_time: true
      #  disable_ssl_validation: true
      #  ignore_ssl_warning: false
      #  ca_certs: /etc/ssl/certs/ca-certificates.crt
      #  check_certificate_expiration: true
      #  days_warning: &lt;THRESHOLD_DAYS&gt;
      #  check_hostname: true
      #  ssl_server_name: &lt;HOSTNAME&gt;
      #  headers:
      #    Host: alternative.host.example.com
      #    X-Auth-Token: &lt;AUTH_TOKEN&gt;
      #  skip_proxy: false
      #  allow_redirects: true
      #  include_default_headers: true
      #  tags:
      #    - &lt;KEY_1&gt;:&lt;VALUE_1&gt;
      #    - &lt;KEY_2&gt;:&lt;VALUE_2&gt;</pre><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Key</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p> <code class="code">url</code> </p></td><td class="td"><p>The URL to test.</p></td></tr><tr><td class="td"><p> <code class="code">timeout</code> </p></td><td class="td"><p>The time in seconds to allow for a response.</p></td></tr><tr><td class="td"><p> <code class="code">method</code> </p></td><td class="td"><p>The HTTP method. This setting defaults to GET, though many other HTTP methods are supported, including POST and PUT.</p></td></tr><tr><td class="td"><p> <code class="code">data</code> </p></td><td class="td"><p>The data option is only available when using the POST method. Data should be included as key-value pairs and will be sent in the body of the request.</p></td></tr><tr><td class="td"><p> <code class="code">content_match</code> </p></td><td class="td"><p>A string or Python regular expression. The HTTP check will search for this value in the response and will report as DOWN if the string or expression is not found.</p></td></tr><tr><td class="td"><p> <code class="code">reverse_content_match</code> </p></td><td class="td"><p>When true, reverses the behavior of the <code class="code">content_match</code>option, i.e. the HTTP check will report as DOWN if the string or expression in <code class="code">content_match</code> IS found. (default is false)</p></td></tr><tr><td class="td"><p> <code class="code">username</code> &amp; <code class="code">password</code> </p></td><td class="td"><p>If your service uses basic authentication, you can provide the username and password here.</p></td></tr><tr><td class="td"><p> <code class="code">http_response_status_code</code> </p></td><td class="td"><p>A string or Python regular expression for an HTTP status code. This check will report DOWN for any status code that does not match. This defaults to 1xx, 2xx and 3xx HTTP status codes. For example: <code class="code">401</code> or <code class="code">4\d\d</code>.</p></td></tr><tr><td class="td"><p> <code class="code">include_content</code> </p></td><td class="td"><p>When set to <code class="code">true</code>, the check will include the first 200 characters of the HTTP response body in notifications. The default value is <code class="code">false</code>.</p></td></tr><tr><td class="td"><p> <code class="code">collect_response_time</code> </p></td><td class="td"><p>By default, the check will collect the response time (in seconds) as the metric <code class="code">network.http.response_time</code>. To disable, set this value to <code class="code">false</code>.</p></td></tr><tr><td class="td"><p> <code class="code">disable_ssl_validation</code> </p></td><td class="td"><p>This setting will skip SSL certificate validation and is enabled by default. If you require SSL certificate validation, set this to <code class="code">false</code>. This option is only used when gathering the response time/aliveness from the specified endpoint. Note this setting doesn’t apply to the <code class="code">check_certificate_expiration</code>option.</p></td></tr><tr><td class="td"><p> <code class="code">ignore_ssl_warning</code> </p></td><td class="td"><p>When SSL certificate validation is enabled (see setting above), this setting allows you to disable security warnings.</p></td></tr><tr><td class="td"><p> <code class="code">ca_certs</code> </p></td><td class="td"><p>This setting allows you to override the default certificate path as specified in <code class="code">init_config</code> </p></td></tr><tr><td class="td"><p> <code class="code">check_certificate_expiration</code> </p></td><td class="td"><p>When <code class="code">check_certificate_expiration</code> is enabled, the service check will check the expiration date of the SSL certificate.</p><p>Note that this will cause the SSL certificate to be validated, regardless of the value of the <code class="code">disable_ssl_validation</code> setting.</p></td></tr><tr><td class="td"><p> <code class="code">days_warning</code> </p></td><td class="td"><p>When <code class="code">check_certificate_expiration</code> is enabled, these settings will raise a warning alert when the SSL certificate is within the specified number of days from expiration.</p></td></tr><tr><td class="td"><p> <code class="code">check_hostname</code> </p></td><td class="td"><p>When <code class="code">check_certificate_expiration</code> is enabled, this setting will raise a warning if the hostname on the SSL certificate does not match the host of the given URL.</p></td></tr><tr><td class="td"><p> <code class="code">headers</code> </p></td><td class="td"><p>This parameter allows you to send additional headers with the request. e.g. <code class="code">X-Auth-Token: &lt;AUTH_TOKEN&gt;</code> </p></td></tr><tr><td class="td"><p> <code class="code">skip_proxy</code> </p></td><td class="td"><p>If set, the check will bypass proxy settings and attempt to reach the check URL directly. This defaults to <code class="code">false</code>.</p></td></tr><tr><td class="td"><p> <code class="code">allow_redirects</code> </p></td><td class="td"><p>This setting allows the service check to follow HTTP redirects and defaults to <code class="code">true</code>.</p></td></tr><tr><td class="td"><p> <code class="code">tags</code> </p></td><td class="td"><p>A list of arbitrary tags that will be associated with the check.</p></td></tr></tbody></table></div><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>HTTP metrics concern response time and SSL certificate expiry information.</p><p>See <a class="link" href="26547-6901-applications.html#UUID-b96bf53f-4a08-afa9-887e-c06f9c56dbfe" title="HTTP Metrics">HTTP Metrics</a>.</p><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-ServiceChecks" class="bridgehead">Service Checks</h6><p> <span class="bold bold"><strong>http.can_connect:</strong></span> </p><p>Returns DOWN when any of the following occur:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the request to URL times out</p></li><li class="listitem"><p>the response code is <code class="code">4xx/5xx,</code> or it doesn’t match the pattern provided in the <code class="code">http_response_status_code</code> </p></li><li class="listitem"><p>the response body does not contain the pattern in <code class="code">content_match</code> </p></li><li class="listitem"><p> <code class="code">reverse_content_match</code> is <code class="code">true</code> and the response body does contain the pattern in <code class="code">content_match</code> </p></li><li class="listitem"><p>URI contains <code class="code">https</code> and <code class="code">disable_ssl_validation</code> is <code class="code">false</code>, and the SSL connection cannot be validated</p></li><li class="listitem"><p>Otherwise, returns UP.</p></li></ul></div><p>Segmentation of the <code class="code">http.can_connect</code> can be done by URL.</p><p> <span class="bold bold"><strong>http.ssl_cert:</strong></span> </p><p>The check returns:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>DOWN if the URL's certificate has already expired</p></li><li class="listitem"><p>WARNING if the URL's certificate expires in less than <code class="code">days_warning</code> days</p></li><li class="listitem"><p>Otherwise, returns UP.</p></li></ul></div><p>To disable this check, set <code class="code">check_certificate_expiration</code> to <code class="code">false</code>.</p><h6 id="UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6_id_HTTP-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-378ebfcf-cdd4-e42e-4c64-d18a7be4b24f-en.png" style="max-width: 550px; " alt="309592147.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-542db4ae-4a30-f427-6c3d-40de18425495-en.png" style="max-width: 550px; " alt="309592151.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-50ebfc07-63c7-c737-e743-45f79b81e909-en.png" style="max-width: 550px; " alt="309592155.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-53c77fb0-cba6-5189-2fd4-fc3d16a853b8" data-publication-date="" id="UUID-4619941f-bedb-ea16-a22c-62e2dfec751f"><div class="titlepage"><div><div class="title"><h5 class="title">Jenkins</h5></div></div></div><p> <a class="link" href="https://jenkins.io/" target="_blank">Jenkins</a> is an open-source automation server which helps to automate part of the software development process, permitting continuous integration and facilitating the technical aspects of continuous delivery. It supports version control tools (such as Subversion, Git, Mercurial, etc), can execute Apache Ant, Apache Maven and SBT-based projects, and allows shell scripts and Windows batch commands. If Jenkins is installed on your environment, the Sysdig agent will automatically connect and collect all Jenkins metrics. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>This page describes the default configuration settings, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-JenkinsSetup" title="Jenkins Setup">Jenkins Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-JenkinsSetup" class="bridgehead">Jenkins Setup</h6><p>Requires the standard Jenkins server setup with one or more Jenkins Jobs running on it.</p><h6 id="UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with Jenkins and collect basic metrics.</p><pre class="programlisting">  - name: jenkins
    pattern:
      comm: java
      port: 50000
    conf:
      name: default
      jenkins_home: /var/lib/jenkins #this depends on your environment</pre><h6 id="UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>The following metrics will be available only after running one or more Jenkins jobs. They handle queue size, job duration, and job waiting time.</p><p>See <a class="link" href="26547-6901-applications.html#UUID-8649b6d6-1b42-e274-5dd1-a00c2f95a9e2" title="Jenkins Metrics">Jenkins Metrics</a>.</p><h6 id="UUID-4619941f-bedb-ea16-a22c-62e2dfec751f_id_Jenkins-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-3c8bb148-d368-efcd-8157-940224bebb45-en.png" style="max-width: 550px; " alt="309362794.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-225ac5d4-346b-02f6-d11d-282247c1493c-en.png" style="max-width: 550px; " alt="309362798.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-38a05182-f4de-19fb-575e-2dff20fe3339" data-publication-date="" id="UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7"><div class="titlepage"><div><div class="title"><h5 class="title">Lighttpd</h5></div></div></div><p> <a class="link" href="https://www.lighttpd.net/" target="_blank">Lighttpd </a>is a secure, fast, compliant, and very flexible web server that has been optimized for high-performance environments. It has a very low memory footprint compared to other web servers and takes care of CPU load. Its advanced feature set (FastCGI, CGI, Auth, Output Compression, URL Rewriting, and many more) make Lighttpd the perfect web server software for every server that suffers load problems. If Lighttpd is installed on your environment, the Sysdig agent will automatically connect. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-DefaultConfiguration" title="Default Configuration">Default Configuration</a>. The Sysdig agent automatically collects the default metrics.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>At this time, the Sysdig app check for Lighttpd supports Lighttpd version 1.x.x only.</p></div><h6 id="UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-LighttpdSetup" title="Lighttpd Setup">Lighttpd Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-LighttpdSetup" class="bridgehead">Lighttpd Setup</h6><p>For Lighttpd, the status page must be enabled. Add <span class="bold bold"><strong> <code class="code">mod_status</code> </strong></span> in the <code class="code">/etc/lighttpd/lighttpd.conf</code> config file:</p><pre class="programlisting">
server.modules = ( ..., "mod_status", ... )</pre><p>Then configure an endpoint for it. If (for security purposes) you want to open the status page only to users from the local network, it can be done by adding the following lines in the <code class="code">/etc/lighttpd/lighttpd.conf file</code> :</p><pre class="programlisting">$HTTP["remoteip"] == "127.0.0.1/8" {
    status.status-url = "/server-status" 
  }</pre><p>If you want an endpoint to be open for remote users based on authentication, then the <span class="bold bold"><strong>mod_auth</strong></span> module should be enabled in the <code class="code">/etc/lighttpd/lighttpd.conf</code> config file:</p><pre class="programlisting">server.modules = ( ..., "mod_auth", ... )</pre><p>Then you can add the <span class="bold bold"><strong>auth.require</strong></span> parameter in the <code class="code">/etc/lighttpd/lighttpd.conf</code> config file:</p><pre class="programlisting">
auth.require = ( "/server-status" =&gt; ( "method"  =&gt; ... , "realm"   =&gt; ... , "require" =&gt; ... ) ) </pre><p>For more information on the <code class="code">auth.require</code> parameter, see the <a class="link" href="https://redmine.lighttpd.net/projects/1/wiki/docs_modauth" target="_blank">Lighttpd documentation.</a>.</p><h6 id="UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with Lighttpd and collect basic metrics.</p><pre class="programlisting">app_checks:
  - name: lighttpd
    pattern:
      comm: lighttpd
    conf:
      lighttpd_status_url: "http://localhost:{port}/server-status?auto"
    log_errors: false</pre><h6 id="UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>These metrics are supported for Lighttpd version 1.x.x only. Lighttpd version <a class="link" href="https://redmine.lighttpd.net/projects/lighttpd2" target="_blank">2.x.x</a> is being built and is NOT ready for use as of this publication.</p><p>See <a class="link" href="26547-6901-applications.html#UUID-1ac0ab77-d6ae-924c-fd6e-ca03e880a438" title="Lighttpd Metrics">Lighttpd Metrics</a>.</p><h6 id="UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7_id_Lighttpd-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr style="height: 258px"><td><img src="image/uuid-c79ef41f-daf9-6eea-c007-5a4e43bd6860-en.png" style="max-width: 575px; max-height: 258px; " alt="309231681.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-3ecfb610-0261-633d-3d61-f3ee67e0beee-en.png" style="max-width: 575px; " alt="309231685.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-c857746b-eeac-63f8-ba77-46dacd909503-en.png" style="max-width: 575px; " alt="309231689.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-5d471de0-3853-3e18-23be-5a8cd5fcf4a6-en.png" style="max-width: 575px; " alt="309231693.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr style="height: 315px"><td><img src="image/uuid-907ced17-0f02-5996-dbd5-decce3b97cb1-en.png" style="max-width: 575px; max-height: 315px; " alt="309231697.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-3342639b-c424-709a-bc0f-7723c6227e39" data-publication-date="" id="UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb"><div class="titlepage"><div><div class="title"><h5 class="title">Memcached</h5></div></div></div><p> <a class="link" href="https://memcached.org/" target="_blank">Memcached</a> is an in-memory key-value store for small chunks of arbitrary data (strings, objects) from the results of database calls, API calls, or page rendering. If Memcached is installed on your environment, the Sysdig agent will automatically connect. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-DefaultConfiguration" title="Default Configuration">Default Configuration</a>. The Sysdig agent automatically collects basic metrics. You can also edit the configuration to collect additional metrics related to items and slabs.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-MemcachedSetup" title="Memcached Setup">Memcached Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-Example1AdditionalMetrics" title="Example 1: Additional Metrics">Example 1: Additional Metrics</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-Example2SASL" title="Example 2: SASL">Example 2: SASL</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-MetricsAvailable" title="Metrics Available">Metrics Available</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-MemcachedSetup" class="bridgehead">Memcached Setup</h6><p>Memcached will automatically expose all metrics. You do not need to add anything on Memcached instance.</p><h6 id="UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with Memcached and collect basic metrics:</p><pre class="programlisting">app_checks:
  - name: memcached
    check_module: mcache
    pattern:
      comm: memcached
    conf:
      url: localhost
      port: "{port}"</pre><p>Additional metrics can be collected by editing Sysdig's configuration file <code class="code">dragent.yaml</code>. If <a class="link" href="https://en.wikipedia.org/wiki/Simple_Authentication_and_Security_Layer" target="_blank">SASL</a> is enabled, authentication parameters must be added to <code class="code">dragent.yaml.</code> </p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-Example1AdditionalMetrics" class="bridgehead">Example 1: Additional Metrics</h6><p> <code class="code"> memcache.items.*</code> and <code class="code">memcache.slabs.* </code>can be collected by setting flags in the <code class="code">options</code> section, as follows . Either value can be set to <code class="code">false</code> if you do not want to collect metrics from them.</p><pre class="programlisting">app_checks:
  - name: memcached
    check_module: mcache
    pattern:
      comm: memcached
    conf:
      url: localhost
      port: "{port}"
    options:
      items: true       # Default is false
      slabs: true       # Default is false</pre><h6 id="UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-Example2SASL" class="bridgehead">Example 2: SASL</h6><p>SASL authentication can be enabled with Memcached (see instructions <a class="link" href="https://blog.couchbase.com/sasl-memcached-now-available/" target="_blank">here</a>). If enabled, credentials must be provided against <code class="code">username</code> and <code class="code">password</code> fields as shown in Example 2.</p><pre class="programlisting">app_checks:
  - name: memcached
    check_module: mcache
    pattern:
      comm: memcached
    conf:
      url: localhost
      port: "{port}"
      username: &lt;username&gt; 
      # Some memcached version will support &lt;username&gt;@&lt;hostname&gt;.
      # If memcached is installed as a container, hostname of memcached container will be used as username
      password: &lt;password&gt;</pre><h6 id="UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-ab3b982c-9323-92a2-452a-c64e2eecbe5e" title="Memcached Metrics">Memcached Metrics</a>.</p><h6 id="UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb_id_Memcached-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-1979fcae-2720-2a4d-12dd-d71da131bd0e-en.png" style="max-width: 550px; " alt="298450998.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-d87db82d-356c-783e-ec7d-f6a0789f8db7-en.png" style="max-width: 550px; " alt="298647598.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-620a74ce-0ea3-6ac0-6973-531036f6b86b-en.png" style="max-width: 550px; " alt="298451004.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-7d1bb80f-31ca-c122-944d-3a3805876c60-en.png" style="max-width: 550px; " alt="298549327.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-3eedbb79-8d65-2d59-42a3-c01d36ab4812-en.png" style="max-width: 550px; " alt="298811438.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-1d4cbfd1-8e0d-babc-3b8f-d54ba58f7e0e" data-publication-date="" id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e"><div class="titlepage"><div><div class="title"><h5 class="title">Mesos/Marathon</h5></div></div></div><p> <a class="link" href="http://mesos.apache.org/" target="_blank">Mesos </a>is built using the same principles as the Linux kernel, only at a different level of abstraction. The Mesos kernel runs on every machine and provides applications (e.g., Hadoop, Spark, Kafka, Elasticsearch) with APIs for resource management and scheduling across entire datacenter and cloud environments. The Mesos metrics are divided into master and <a class="link" href="https://stackoverflow.com/questions/45033994/what-is-the-difference-between-mesos-slave-and-mesos-agent" target="_blank">agent</a>. <a class="link" href="https://mesosphere.github.io/marathon/" target="_blank">Marathon </a>is a production-grade container orchestration platform for Apache Mesos.</p><p>If Mesos and Marathon are installed in your environment, the Sysdig agent will automatically connect and start collecting metrics.You may need to edit the default entries to add a custom configuration if the default does not work. See <a class="link" href="">Default Configuration</a>.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-Contents" title="Contents">Contents </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-MesosMarathonSetup" title="Mesos/Marathon Setup">Mesos/Marathon Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-MesosMaster" title="Mesos Master">Mesos Master</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-Marathon" title="Marathon">Marathon</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-MesosMaster1" title="Mesos Master">Mesos Master</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-MesosAgent" title="Mesos Agent">Mesos Agent</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-Marathon1" title="Marathon">Marathon</a> </p></li></ul></div></li></ul></div></li></ul></div><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-MesosMarathonSetup" class="bridgehead">Mesos/Marathon Setup</h6><p>Both Mesos and Marathon will automatically expose all metrics. You do not need to add anything to the Mesos/Marathon instance.</p><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><p>The Sysdig agent has different entries for <code class="code">mesos-master, mesos-slave</code> and <code class="code">marathon</code> in its configuration file. Default entries are present in Sysdig's <code class="code">dragent.default.yaml </code>file and collect all metrics for Mesos. For Marathon, it collects basic metrics. You may need add configuration to collect additional metrics.</p><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>In the URLs for <code class="code">mesos-master</code> and <code class="code">mesos-slave, {mesos_url}</code> will be replaced with either the hostname of the auto-detected mesos master/slave (if auto-detection is enabled), or with an explicit value from <code class="code">mesos_state_uri</code> otherwise.</p><p>In the URLs for <code class="code">marathon, {marathon_url}</code> will be replaced with the hostname of the first configured/discovered Marathon framework.</p><p>For all Mesos and Marathon apps, <code class="code">{auth_token}</code> will either be blank or an auto-generated token obtained via the <code class="code">/acs/api/v1/auth/login</code> endpoint.</p><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-MesosMaster" class="bridgehead">Mesos Master</h6><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows" style="text-align: left;"><tbody><tr><td class="td"><p> <code class="code">app_checks:</code> <code class="code"></code> <code class="code">- name: mesos-master</code> <code class="code"></code> <code class="code">check_module: mesos_master</code> <code class="code"></code> <code class="code">interval: </code> <code class="code">30</code> <code class="code"></code> <code class="code">pattern:</code> <code class="code"></code> <code class="code">comm: mesos-master</code> <code class="code"></code> <code class="code">conf:</code> <code class="code"></code> <code class="code">url: </code> <code class="code">"{mesos_url}:{port}"</code> <code class="code"></code> <code class="code">auth_token: </code> <code class="code">"{auth_token}"</code> <code class="code"></code> <code class="code">mesos_creds: </code> <code class="code">"{mesos_creds}"</code> </p></td></tr></tbody></table></div><p> <span class="bold bold"><strong>Mesos Agent</strong></span> </p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows" style="text-align: left;"><colgroup><col></col></colgroup><tbody><tr><td class="td"><p> <code class="code">app_checks:</code> <code class="code"></code> <code class="code">- name: mesos-slave</code> <code class="code"></code> <code class="code">check_module: mesos_slave</code> <code class="code"></code> <code class="code">pattern:</code> <code class="code"></code> <code class="code">comm: mesos-slave</code> <code class="code"></code> <code class="code">interval: </code> <code class="code">30</code> <code class="code"></code> <code class="code">conf:</code> <code class="code"></code> <code class="code">url: </code> <code class="code">"{mesos_url}:{port}"</code> <code class="code"></code> <code class="code">auth_token: </code> <code class="code">"{auth_token}"</code> <code class="code"></code> <code class="code">mesos_creds: </code> <code class="code">"{mesos_creds}"</code> <code class="code"></code> <code class="code"># Name of individual tasks to monitor, </code> <code class="code">if</code> <code class="code">needed</code> <code class="code"></code> <code class="code"># tasks:</code> <code class="code"></code> <code class="code"># - mongo</code> <code class="code"></code> <code class="code"># - cassandra</code> </p></td></tr></tbody></table></div><p> <span class="bold bold"><strong>Marathon</strong></span> </p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows" style="text-align: left;"><colgroup><col></col></colgroup><tbody><tr><td class="td"><p> <code class="code">app_checks:</code> <code class="code"></code> <code class="code">- name: marathon</code> <code class="code"></code> <code class="code">check_module: marathon</code> <code class="code"></code> <code class="code">interval: </code> <code class="code">30</code> <code class="code"></code> <code class="code">pattern:</code> <code class="code"></code> <code class="code">arg: mesosphere.marathon.Main</code> <code class="code"></code> <code class="code">conf:</code> <code class="code"></code> <code class="code">url: </code> <code class="code">"{marathon_url}"</code> <code class="code"></code> <code class="code">auth_token: </code> <code class="code">"{auth_token}"</code> <code class="code"></code> <code class="code">marathon_creds: </code> <code class="code">"{marathon_creds}"</code> </p></td></tr></tbody></table></div><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><p>Example 1</p><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-Marathon" class="bridgehead">Marathon</h6><p>Enable the flag <code class="code">full_metrics</code> to collect all metrics for marathon.</p><p>The following additional metrics are collected with this configuration:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <code class="code">marathon.cpus</code> </p></li><li class="listitem"><p> <code class="code">marathon.disk</code> </p></li><li class="listitem"><p> <code class="code">marathon.instances</code> </p></li><li class="listitem"><p> <code class="code">marathon.mem</code> </p></li></ul></div><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows" style="text-align: left;"><colgroup><col></col></colgroup><tbody><tr><td class="td"><p> <code class="code">app_checks:</code> <code class="code"></code> <code class="code">- name: marathon</code> <code class="code"></code> <code class="code">check_module: marathon</code> <code class="code"></code> <code class="code">interval: </code> <code class="code">30</code> <code class="code"></code> <code class="code">pattern:</code> <code class="code"></code> <code class="code">arg: mesosphere.marathon.Main</code> <code class="code"></code> <code class="code">conf:</code> <code class="code"></code> <code class="code">url: </code> <code class="code">"{marathon_url}"</code> <code class="code"></code> <code class="code">auth_token: </code> <code class="code">"{auth_token}"</code> <code class="code"></code> <code class="code">marathon_creds: </code> <code class="code">"{marathon_creds}"</code> <code class="code"></code> <code class="code">full_metrics: </code> <code class="code">true</code> </p></td></tr></tbody></table></div><p>Metrics Available</p><p>See <a class="link" href="26547-6901-applications.html#UUID-f21a98c3-f810-e32e-ff5a-f64a18242d62" title="Mesos Master Metrics">Mesos Master Metrics</a>.</p><p>See <a class="link" href="26547-6901-applications.html#UUID-9ed8c5ea-8774-24e3-fc6d-ebde209bdfe8" title="Mesos Agent Metrics">Mesos Agent Metrics</a>.</p><p>See <a class="link" href="26547-6901-applications.html#UUID-8cf37955-87e4-59fd-f858-d06505bd9d41" title="Marathon Metrics">Marathon Metrics</a>.</p><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-MesosMaster1" class="bridgehead">Mesos Master</h6><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-MesosAgent" class="bridgehead">Mesos Agent</h6><h6 id="UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e_id_MesosMarathon-Marathon1" class="bridgehead">Marathon</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-3fbd38f4-5a31-bbf8-545e-ec91e3a1b0a7-en.png" style="max-width: 550px; " alt="306511912.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-846f92e0-f7db-b2fd-c71c-b41f71b40dd6-en.png" style="max-width: 550px; " alt="306741288.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-bd105484-f3ac-9d33-dc9c-1a315623b8be" data-publication-date="" id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3"><div class="titlepage"><div><div class="title"><h5 class="title">MongoDB</h5></div></div></div><p> <a class="link" href="https://www.mongodb.com/" target="_blank">MongoDB</a> is an open-source database management system (DBMS) that uses a document-oriented database model which supports various forms of data. If MongoDB is installed in your environment, the Sysdig agent will automatically connect and collect basic metrics (if <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/205389944/Authentication+and+Authorization+SaaS" target="_blank">authentication</a> is not used). You may need to edit the default entries to connect and collect additional metrics. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-MongoDBSetup" title="MongoDB Setup">MongoDB Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-Example1WithAuthentication" title="Example 1: With Authentication">Example 1: With Authentication</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-Example2AdditionalMetrics" title="Example 2: Additional Metrics">Example 2: Additional Metrics</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-MongoDBSetup" class="bridgehead">MongoDB Setup</h6><p>Create a read-only user for the Sysdig agent.</p><pre class="programlisting"># Authenticate as the admin user.
use admin
db.auth("admin", "&lt;YOUR_MONGODB_ADMIN_PASSWORD&gt;")

# On MongoDB 2.x, use the addUser command.
db.addUser("sysdig-cloud", "sysdig-cloud-password", true)

# On MongoDB 3.x or higher, use the createUser command.
db.createUser({
  "user":"sysdig-cloud",
  "pwd": "sysdig-cloud-password",
  "roles" : [
    {role: 'read', db: 'admin' },
    {role: 'clusterMonitor', db: 'admin'},
    {role: 'read', db: 'local' }
  ]
})</pre><h6 id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with MongoDB.</p><pre class="programlisting">app_checks:
  - name: mongodb
    check_module: mongo
    pattern:
      comm: mongod
    conf:
      server: "mongodb://localhost:{port}/admin"</pre><p>The default MongoDB entry should work for without modification if <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/205389944/Authentication+and+Authorization+SaaS" target="_blank">authentication</a> is not configured. If you have enabled password authentication, the entry will need to be changed.</p><p>Some metrics are not available by default. Additional configuration needs to be provided to collect them as shown in following examples.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-Example1WithAuthentication" class="bridgehead">Example 1: With Authentication</h6><p>Replace &lt;username&gt; and &lt;password&gt; with actual username and password.</p><pre class="programlisting">app_checks:
  - name: mongodb
    check_module: mongo
    pattern:
      comm: mongod
    conf:
      server: mongodb://&lt;username&gt;:&lt;password&gt;@localhost:{port}/admin
      replica_check: true</pre><h6 id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-Example2AdditionalMetrics" class="bridgehead">Example 2: Additional Metrics</h6><p>Some metrics are not collected by default. These can be collected by adding <code class="code">additional_metrics </code>section in the <code class="code">dragent.yaml</code> file under the <code class="code">app_checks mongodb </code> configuration.</p><p>Available options are:</p><p> <code class="code">collection</code> - Metrics of the specified collections</p><p> <code class="code">metrics.commands</code> - Use of database commands</p><p> <code class="code">tcmalloc</code> - TCMalloc memory allocator</p><p> <code class="code">top</code> - Usage statistics for each collection</p><pre class="programlisting">app_checks:
  - name: mongodb
    check_module: mongo
    pattern:
      comm: mongod
    conf:
      server: mongodb://&lt;username&gt;:&lt;password&gt;@localhost:{port}/admin
      replica_check: true
      additional_metrics:
        - collection       
        - metrics.commands
        - tcmalloc
        - top</pre><p>List of metrics with respective entries in <code class="code">dragent.yam</code>l:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>metric prefix</p></th><th class="th"><p>Entry under <code class="code">additional_metrics</code> </p></th></tr></thead><tbody><tr><td class="td"><p>mongodb.collection</p></td><td class="td"><p>collection</p></td></tr><tr><td class="td"><p>mongodb.usage.commands</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.getmore</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.insert</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.queries</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.readLock</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.writeLock</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.remove</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.total</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.update</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.usage.writeLock</p></td><td class="td"><p>top</p></td></tr><tr><td class="td"><p>mongodb.tcmalloc</p></td><td class="td"><p>tcmalloc</p></td></tr><tr><td class="td"><p>mongodb.metrics.commands</p></td><td class="td"><p>metrics.commands</p></td></tr></tbody></table></div><h6 id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-38055b4f-c601-075d-06da-32394a6708b5" title="MongoDB Metrics">MongoDB Metrics</a>.</p><h6 id="UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3_id_MongoDB-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-d6862df9-fc07-276c-709c-63aa60563137-en.png" style="max-width: 550px; " alt="307068929.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-f7c05f1e-625f-2bb6-1d32-5f21f4e8ae99-en.png" style="max-width: 550px; " alt="307068933.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-327d489d-776e-ae93-73fd-af78e733b4fe-en.png" style="max-width: 550px; " alt="307068937.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-03a3d140-89c8-e709-6e71-c768d45bfbe0-en.png" style="max-width: 550px; " alt="307068941.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-b8cab65b-5b71-691e-bc05-164300b7055f-en.png" style="max-width: 550px; " alt="307068945.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-8686c789-9de1-89ce-a4c7-03b3a8bd844c-en.png" style="max-width: 550px; " alt="307068949.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-4a04e116-9486-6d90-ca11-53e0efa91db9" data-publication-date="" id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0"><div class="titlepage"><div><div class="title"><h5 class="title">MySQL</h5></div></div></div><p> <a class="link" href="https://www.mysql.com" target="_blank">MySQL</a> is the world’s most popular open-source database. With its proven performance, reliability, and ease-of-use, MySQL has become the leading database choice for web-based applications, used by high profile web properties including Facebook, Twitter, YouTube. Additionally, it is an extremely popular choice as embedded database, distributed by thousands of ISVs and OEMs.</p><h6 id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-SupportedDistribution" title="Supported Distribution">Supported Distribution</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-MySQLSetup" title="MySQL Setup">MySQL Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-DefaultDashboard" title="Default Dashboard">Default Dashboard</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-AdditionalViews" title="Additional Views">Additional Views </a> </p></li></ul></div></li></ul></div></li></ul></div><h6 id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-SupportedDistribution" class="bridgehead">Supported Distribution</h6><p>The MySQL AppCheck is supported for following MySQL versions.</p><p> <span class="bold bold"><strong>If the Sysdig agent is installed as a Process:</strong></span> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <span class="bold bold"><strong>Host with Python 2.7:</strong></span> MySQL versions supported - 5.5 to 8</p></li><li class="listitem"><p> <span class="bold bold"><strong>Host with Python 2.6:</strong></span> MySQL versions supported - 4.1 to 5.7 (tested with v5.x only)</p><p> <span class="bold bold"><strong>NOTE:</strong></span> This implies that MySQL 5.5, 5.6 and 5.7 are supported on both the Python 2.6 and 2.7 environments.</p></li></ul></div><p> <span class="bold bold"><strong>If the Sysdig agent is installed as a Docker container:</strong></span> </p><p>The Docker container of the Sysdig agent has Python 2.7 installed. If it is installed, respective versions against Python 2.7 will be supported.</p><p>The following environments have been tested and are supported. Tests environments include both the Host/Process and Docker environment.</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th rowspan="2" class="th"><p>Python</p></th><th colspan="5" class="th"><p>MySQL</p></th></tr><tr><th class="th"><p>5.1</p></th><th class="th"><p>5.5</p></th><th class="th"><p>5.6</p></th><th class="th"><p>5.7</p></th><th class="th"><p>8</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong>2.7</strong></span> (Ubuntu 16/ CentOS 7)</p></td><td class="td"><p>No</p></td><td class="td"><p>Yes</p></td><td class="td"><p>Yes</p></td><td class="td"><p>Yes</p></td><td class="td"><p>Yes</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>2.6</strong></span> (CentOS 6)</p></td><td class="td"><p>Yes</p></td><td class="td"><p>Yes</p></td><td class="td"><p>Yes</p></td><td class="td"><p>Yes</p></td><td class="td"><p>No</p></td></tr></tbody></table></div><h6 id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-MySQLSetup" class="bridgehead">MySQL Setup</h6><p>A user must be created on MySQL so the Sysdig agent can collect metrics. To configure credentials, run the following commands on your server, replacing the <span class="bold bold"><strong> <code class="code">sysdig-clouc-password</code> </strong></span> parameter.</p><p>MySQL version-specific commands to create a user are provided below.</p><pre class="programlisting"># MySQL 5.6 and earlier
CREATE USER 'sysdig-cloud'@'127.0.0.1' IDENTIFIED BY 'sysdig-cloud-password';
GRANT PROCESS, REPLICATION CLIENT ON *.* TO 'sysdig-cloud'@'127.0.0.1' WITH MAX_USER_CONNECTIONS 5;

## OR ##

# MySQL 5.7 and 8
CREATE USER 'sysdig-cloud'@'127.0.0.1' IDENTIFIED BY 'sysdig-cloud-password' WITH MAX_USER_CONNECTIONS 5;
GRANT PROCESS, REPLICATION CLIENT ON *.* TO 'sysdig-cloud'@'127.0.0.1';
</pre><h6 id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><p>There is no default configuration for MySQL, as a unique user and password are required for metrics polling.</p><p>Add the entry for MySQL into <span class="bold bold"><strong> <code class="code">dragent.yaml</code> </strong></span>, updating the <code class="code">user</code> and <code class="code">pass</code> field credentials.</p><pre class="programlisting">app_checks:
  - name: mysql
    pattern:
      comm: mysqld
    conf:
      server: 127.0.0.1
      user: sysdig-cloud
      pass: sysdig-cloud-password

</pre><h6 id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-e5ba2cbc-cf8e-af00-951d-af2cf7b3c764" title="MySQL Metrics">MySQL Metrics</a>.</p><h6 id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><h6 id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-DefaultDashboard" class="bridgehead">Default Dashboard</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-fd66c1ae-00f9-f6c7-a1af-0f05fd22c7b7-en.png" style="max-width: 600px; " alt="307331075.png"></img></td></tr></table></div><h6 id="UUID-72da56ef-bd63-6824-dfc0-f343b89564a0_id_MySQL-AdditionalViews" class="bridgehead">Additional Views</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-586f2d43-7162-9212-850d-72ddc130523f-en.png" style="max-width: 600px; " alt="307331079.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-381ba62a-4447-af5d-a2c4-51c71a9280e1-en.png" style="max-width: 600px; " alt="307331083.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-b66979da-71e4-0069-c2fb-e8345e4ed759-en.png" style="max-width: 600px; " alt="307331087.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-409c7ff3-0c03-4bd0-c119-a8b3d1e17c4e-en.png" style="max-width: 600px; " alt="307331091.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-53f435aa-2292-196c-d325-340054744554-en.png" style="max-width: 600px; " alt="307331095.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-1e1ed163-876b-b1a5-a51e-14d92de3cca4" data-publication-date="" id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13"><div class="titlepage"><div><div class="title"><h5 class="title">NGINX and NGINX Plus</h5></div></div></div><p> <a class="link" href="https://www.nginx.com/resources/glossary/nginx/" target="_blank">NGINX</a> is open source software for web serving, reverse proxying, caching, load balancing, media streaming, and more. It started out as a web server designed for maximum performance and stability. In addition to its HTTP server capabilities, NGINX can also function as a proxy server for email (IMAP, POP3, and SMTP) and a reverse proxy and load balancer for HTTP, TCP, and UDP servers.</p><p> <a class="link" href="https://www.nginx.com/products/nginx/" target="_blank">NGINX Plus</a> isa software load balancer, web server, and content cache built on top of open source NGINX. NGINX Plus has exclusive enterprise‑grade features beyond what's available in the open source offering, including session persistence, configuration via API, and active health checks.</p><p>The Sysdig agent has a default configuration to collect metrics for open-source NGINX, provided that you have the HTTP stub status module enabled. NGINX exposes basic metrics about server activity on a simple status page with this status module. If NGINX Plus is installed, a wide range of metrics are available with the NGINX Plus API.</p><p>This page describes the setup steps for NGINX/NGINX Plus, the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and sample results in the Sysdig Monitor UI.</p><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXNGINXPlusSetup" title="NGINX/ NGINX Plus Setup">NGINX/ NGINX Plus Setup</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXStubStatusModuleConfiguration" title="NGINX Stub Status Module Configuration">NGINX Stub Status Module Configuration</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXPlusAPIConfiguration" title="NGINX Plus API Configuration">NGINX Plus API Configuration</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-Example1DefaultConfiguration" title="Example 1: Default Configuration">Example 1: Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-Example2NGINXPlusonly" title="Example 2: NGINX Plus only">Example 2: NGINX Plus only</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-Example3NGINXandNGINXPlus" title="Example 3: NGINX and NGINX Plus">Example 3: NGINX and NGINX Plus</a> </p></li><li class="listitem"><p> NGINX (Open Source) </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXPlus" title="NGINX Plus">NGINX Plus</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li><li class="listitem"></li><li class="listitem"></li><li class="listitem"></li><li class="listitem"></li></ul></div></li></ul></div><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXNGINXPlusSetup" class="bridgehead">NGINX/ NGINX Plus Setup</h6><p>This section describes the configuration required on the NGINX server.</p><p>The Sysdig agent will not collect metrics until the required endpoint is added to the NGINX configuration, per one of the following methods:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <span class="bold bold"><strong>For NGINX (Open Source): </strong></span>use the stub status module</p></li><li class="listitem"><p> <span class="bold bold"><strong>For NGINX Plus:</strong></span> use the Plus API</p></li></ul></div><p>Configuration examples of each are provided below</p><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXStubStatusModuleConfiguration" class="bridgehead">NGINX Stub Status Module Configuration</h6><p>The <code class="code">ngx_http_stub_status_module</code> provides access to basic status information. It is compiled by default on most distributions. If not, it should be enabled with the <code class="code">--with-http_stub_status_module</code> configuration parameter.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>To check if the module is already compiled, run the following command:</p><pre class="programlisting">
nginx -V 2&gt;&amp;1 | grep -o with-http_stub_status_module</pre><p>If <code class="code">with-http_stub_status_module</code> is listed, the status module is enabled. (For more information, see <a class="link" href="http://nginx.org/en/docs/http/ngx_http_stub_status_module.html" target="_blank">http://nginx.org/en/docs/http/ngx_http_stub_status_module.html</a>.)</p></li><li class="step"><p>Update the NGINX configuration file with <code class="code">/nginx_status</code> endpoint as follows. The default NGINX configuration file is present at <code class="code">/etc/nginx/nginx.conf</code> or <code class="code">/etc/nginx/conf.d/default.conf. </code> </p><pre class="programlisting">
# HTTP context                                                                            
server {
...
  # Enable NGINX status module
  location /nginx_status {
    # freely available with open source NGINX
    stub_status;
    access_log   off;

    # for open source NGINX &lt; version 1.7.5
    # stub_status on;
  }
...
}</pre></li></ol></div><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXPlusAPIConfiguration" class="bridgehead">NGINX Plus API Configuration</h6><p>When NGINX Plus is configured, the Plus API can be enabled by adding <code class="code">/api</code> endpoint in the NGINX configuration file as follows.</p><p>The default NGINX configuration file is present at <code class="code">/etc/nginx/nginx.conf</code> or <code class="code">/etc/nginx/conf.d/default.conf.</code> </p><pre class="programlisting">
# HTTP context                                                                            
server {
...
  # Enable NGINX Plus API
  location /api {
    api write=on;
    allow all;
  }
...
}</pre><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configuration Examples:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Example 1 (Default): When only open-source Nginx is configured.</p></li><li class="listitem"><p>Example 2: When only NginxPlus node is configured.</p></li><li class="listitem"><p>Example 3: When Nginx and NginxPlus are installed in different containers on same host.</p></li></ul></div></li><li class="listitem"><p>Flag <code class="code">use_plus_api</code> and is used for differentiating NGINX &amp; NGINXPlus metrics.</p></li><li class="listitem"><p>NGINXPlus metrics are differentiated with prefix <code class="code">nginx.plus.*</code> </p></li><li class="listitem"><p>When <code class="code">use_plus_api = true,</code> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <code class="code">nginx_plus_api_url </code>is used to fetch NginxPlus metrics from the NginxPlus node.</p></li><li class="listitem"><p> <code class="code">nginx_status_url </code>is used to fetch Nginx metrics from the Nginx node (If single host is running two separate containers for Nginx and NginxPlus).</p></li></ul></div></li></ul></div><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-Example1DefaultConfiguration" class="bridgehead">Example 1: Default Configuration</h6><p>With the default configuration, only NGINX metrics will be available once the <code class="code">ngx_http_stub_status_module</code> is configured.</p><pre class="programlisting">app_checks:
  - name: nginx
    check_module: nginx
    pattern:
      exe: "nginx: worker process"
    conf:
      nginx_status_url: "http://localhost:{port}/nginx_status"
    log_errors: true</pre><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-Example2NGINXPlusonly" class="bridgehead">Example 2: NGINX Plus only</h6><p>With this example only NGINX Plus Metrics will be available.</p><pre class="programlisting">app_checks:
  - name: nginx
    check_module: nginx
    pattern:
      exe: "nginx: worker process"
    conf:
      nginx_plus_api_url: "http://localhost:{port}/api"
      use_plus_api: true
      user: admin
      password: admin
    log_errors: true</pre><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-Example3NGINXandNGINXPlus" class="bridgehead">Example 3: NGINX and NGINX Plus</h6><p>This is special case where NGINX open-source and NGINX PLUS are installed on same host but in different containers. With this configuration, respective metrics will be available for NGINX and NGINX Plus containers.</p><pre class="programlisting">app_checks:
  - name: nginx
    check_module: nginx
    pattern:
      exe: "nginx: worker process"
    conf:
      nginx_plus_api_url: "http://localhost:{port}/api"
      nginx_status_url: "http://localhost:{port}/nginx_status"
      use_plus_api: true
      user: admin
      password: admin
    log_errors: true</pre><p>List of Metrics</p><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXOpenSource" class="bridgehead">NGINX (Open Source)</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-1437dcf2-0a4e-68db-a624-67eda02af543" title="NGINX Metrics">NGINX Metrics</a>.</p><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-NGINXPlus" class="bridgehead">NGINX Plus</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-c814af3f-448b-daeb-989f-d4bb6a95f522" title="NGINX Plus Metrics">NGINX Plus Metrics</a>.</p><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-" class="bridgehead"></h6><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-1" class="bridgehead"></h6><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-2" class="bridgehead"></h6><h6 id="UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13_id_NGINXandNGINXPlus-3" class="bridgehead"></h6></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-fb0204d0-d54d-55fd-bc68-cc40b1ff9cae" data-publication-date="" id="UUID-cfc0a734-a976-5f2d-fcea-f59f5f69c17e"><div class="titlepage"><div><div class="title"><h5 class="title">NTP</h5></div></div></div><p> <a class="link" href="https://en.wikipedia.org/wiki/Network_Time_Protocol" target="_blank">NTP</a> stands for Network Time Protocol. It is used to synchronize the time on your Linux system with a centralized NTP server. A local NTP server on the network can be synchronized with an external timing source to keep all the servers in your organization in-sync with an accurate time.</p><p>If the NTP check is enabled in the Sysdig agent, it reports the time offset of the local agent from an NTP server .</p><p>This page describes how to edit the configuration to collect information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-cfc0a734-a976-5f2d-fcea-f59f5f69c17e_id_NTP-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-cfc0a734-a976-5f2d-fcea-f59f5f69c17e_id_NTP-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, <code class="code">Sysdig's dragent.default.yaml</code> does not provide any configuration for NTP<code class="code">.</code> </p><p>Add the configuration in Example 1 to the <code class="code">dragent.yaml</code> file to enable <code class="code">NTP</code> checks.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-cfc0a734-a976-5f2d-fcea-f59f5f69c17e_id_NTP-Example1" class="bridgehead">Example 1</h6><pre class="programlisting">- name: ntp
    interval: 60
    pattern:
      comm: systemd
    conf:
      host: us.pool.ntp.org
      offset_threshold: 60</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <span class="bold bold"><strong> <code class="code">host</code> </strong></span>: (mandatory) provides the host name of <code class="code">NTP</code> server.</p></li><li class="listitem"><p> <code class="code">offset_threshold</code>: (optional) provides the difference (in seconds) between the local clock and the NTP server, when the <code class="code">ntp.in_sync</code> service check becomes <code class="code">CRITICAL</code>. The default is <code class="code">60</code> seconds.</p></li></ul></div><h6 id="UUID-cfc0a734-a976-5f2d-fcea-f59f5f69c17e_id_NTP-MetricsAvailable" class="bridgehead">Metrics Available</h6><p> <code class="code">ntp.offset</code>, the time difference between the local clock and the NTP reference clock, is the primary NTP metric.</p><p>See also <a class="link" href="26547-6901-applications.html#UUID-33bd2a36-6fef-cc1f-be30-e37c3cdf4bf2" title="NTP Metrics">NTP Metrics</a>.</p><p>Service Checks</p><p> <code class="code">ntp.in_sync:</code> </p><p>Returns <code class="code">CRITICAL</code> if the NTP offset is greater than the threshold specified in <code class="code">dragent.yaml</code>, otherwise OK.</p><h6 id="UUID-cfc0a734-a976-5f2d-fcea-f59f5f69c17e_id_NTP-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-a6696988-6646-5ec0-2f47-c4dc7816c87b-en.png" style="max-width: 600px; " alt="302022814.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-d9006e24-b336-dde9-6a47-52518fd5cc2f-en.png" style="max-width: 600px; " alt="302383208.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-7160c4f7-c97f-697f-f98f-c5181ef9af7b" data-publication-date="" id="UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64"><div class="titlepage"><div><div class="title"><h5 class="title">PGBouncer</h5></div></div></div><p> <a class="link" href="https://wiki.postgresql.org/wiki/PgBouncer" target="_blank">PgBouncer</a> is a lightweight connection pooler for PostgreSQL. If PgBouncer is installed on your environment, you may need to edit the Sysdig agent configuration file to connect. See <a class="link" href="">PGBouncer#Default Configuration</a>.</p><p>This page describes the configuration settings, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-PgBouncerSetup" title="PgBouncer Setup">PgBouncer Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-Example1" title="Example 1">Example 1</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-PgBouncerSetup" class="bridgehead">PgBouncer Setup</h6><p>PgBouncer does not ship with a default stats user configuration. To configure it, you need to add a user allowed to access PgBouncer stats. Do so by adding following line in <code class="code">pgbouncer.ini. The d</code>efault file location is <code class="code">/etc/pgbouncer/</code>pgbouncer.ini</p><pre class="programlisting">stats_users = sysdig_cloud</pre><p>For the same user you need the following entry in <code class="code">userlist.txt.</code> The default file location is <code class="code">/etc/pgbouncer/userlist.txt</code> </p><pre class="programlisting">"sysdig_cloud" "sysdig_cloud_password"</pre><h6 id="UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>No default configuration is present in Sysdig's <code class="code">dragent.default.yaml</code> file for PgBouncer, as it requires a unique username and password. You must add a custom entry in <code class="code">dragent.yaml</code> as follows:</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-Example1" class="bridgehead">Example 1</h6><pre class="programlisting">app_checks:
  - name: pgbouncer
    pattern:
      comm: pgbouncer
    conf:
      host: localhost # set if the bind ip is different
      port: 6432      # set if the port is not the default
      username: sysdig_cloud
      password: sysdig_cloud_password #replace with appropriate password</pre><h6 id="UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-cdf6083d-fa95-7018-2d3e-bdff3bf85149" title="PGBouncer Metrics">PGBouncer Metrics</a>.</p><h6 id="UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64_id_PGBouncer-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr style="height: 325px"><td><img src="image/uuid-189f70d3-ba5c-1109-72e8-c9c82a231cf0-en.png" style="max-width: 575px; max-height: 325px; " alt="309526602.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-2f83b189-e8b0-0314-e8ff-324eb27a48a0-en.png" style="max-width: 575px; " alt="309526606.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-eebccdf9-6706-f74e-dbcc-9ea0c196a4d4-en.png" style="max-width: 575px; " alt="309526610.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-de9e07af-152b-6970-f743-2a5f1841023e-en.png" style="max-width: 575px; " alt="309526614.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-851298d5-df3b-322d-b5ff-e94e27a3b2f4-en.png" style="max-width: 575px; " alt="309526618.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-d0ab8481-b843-1ab8-8d83-2e7e6896bf14" data-publication-date="" id="UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe"><div class="titlepage"><div><div class="title"><h5 class="title">PHP-FPM</h5></div></div></div><p> <a class="link" href="https://php-fpm.org/" target="_blank">PHP-FPM</a> (FastCGI Process Manager) is an alternative PHP FastCGI implementation, with some additional features useful for sites of any size, especially busier sites. If PHP-FPM is installed on your environment, the Sysdig agent will automatically connect. You may need to edit the default entries to connect if PHP-FPM has a custom setting in its config file. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration</a>.</p><p>The Sysdig agent automatically collects all metrics with default configuration.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-PHP-FPMSetup" title="PHP-FPM Setup">PHP-FPM Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-Example1" title="Example 1">Example 1</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-PHP-FPMSetup" class="bridgehead">PHP-FPM Setup</h6><p>This check has a default configuration that should suit most use cases. If it does not work for you, verify that you have added these lines to your <code class="code">php-fpm.conf</code> file. The default location is <code class="code">/etc/</code> </p><pre class="programlisting">pm.status_path = /status
ping.path = /ping</pre><h6 id="UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with PHP-FPM and collect all metrics:</p><pre class="programlisting">app_checks:
  - name: php-fpm
    check_module: php_fpm
    retry: false
    pattern:
      exe: "php-fpm: master process"</pre><p>If you have a configuration other than those for PHP-FPM in <code class="code">php-fpm.conf,</code> you can edit the Sysdig agent configuration in <code class="code">dragent.yaml,</code> as shown in Example 1.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-Example1" class="bridgehead">Example 1</h6><p>Replace the values of <code class="code">status_url</code> and <code class="code">ping_url</code> below with the values set against <code class="code">pm.status_path</code> and <code class="code">ping.path</code> respectively in your <code class="code">php-fpm.conf:</code> </p><pre class="programlisting">app_checks:
  - name: php-fpm
    check_module: php_fpm
    pattern:
      exe: "php-fpm: master process"
    conf:
      status_url: /mystatus
      ping_url: /myping
      ping_reply: mypingreply</pre><h6 id="UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-78ff7bb2-32a7-e2df-e973-c615750d7f9a" title="PHP-FPM Metrics">PHP-FPM Metrics</a>.</p><h6 id="UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe_id_PHP-FPM-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-d3f64e17-6925-15c7-3349-6de7936368ee-en.png" style="max-width: 575px; " alt="309428237.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-28f17438-721c-d284-f531-9ddf6ca80248-en.png" style="max-width: 575px; " alt="309428241.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-3699cce2-14e2-b3ba-f854-e4fecc5baca7-en.png" style="max-width: 575px; " alt="309428245.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="575px"><tr><td><img src="image/uuid-d058fe40-2a40-2f85-9eda-cc676c41bc47-en.png" style="max-width: 575px; " alt="309428249.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-67269087-9356-b3f8-1dce-f6d16d2a7659" data-publication-date="" id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790"><div class="titlepage"><div><div class="title"><h5 class="title">PostgreSQL</h5></div></div></div><p> <a class="link" href="https://www.postgresql.org" target="_blank">PostgreSQL</a> is a powerful, open-source, object-relational database system that has earned a strong reputation for reliability, feature robustness, and performance.</p><p>If PostgreSQL is installed in your environment, the Sysdig agent will automatically connect in most cases. In some conditions, you may need to create specific user for Sysdig and edit the default entries to connect.</p><p>See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-DefaultConfiguration" title="Default Configuration">Default Configuration</a>. The Sysdig agent automatically collects all metrics with the default configuration when correct credentials are provided.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-PostgreSQLSetup" title="PostgreSQL Setup">PostgreSQL Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-ExpandedExample1" title="Expanded Example 1">Expanded Example 1</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-DefaultDashboard" title="Default Dashboard">Default Dashboard </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-OtherViews" title="Other Views">Other Views </a> </p></li></ul></div></li></ul></div></li></ul></div><h6 id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-PostgreSQLSetup" class="bridgehead">PostgreSQL Setup</h6><p>PostgreSQL will be auto-discovered and the agent will connect through the Unix socket using the Default Configuration with the <span class="bold bold"><strong> <code class="code">postgres </code> </strong></span>default user. If this does not work, you can create a user for Sysdig Monitor and give it enough permissions to read Postgres stats. To do this, execute the following example statements on your server:</p><pre class="programlisting">create user sysdig-cloud with password 'password';
grant SELECT ON pg_stat_database to sysdig_cloud;</pre><h6 id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">default.dragent.yaml</code> uses the following code to connect with Postgres.</p><pre class="programlisting">app_checks:
  - name: postgres
    pattern:
      comm: postgres
      port: 5432
    conf:
      unix_sock: "/var/run/postgresql/.s.PGSQL.{port}"
      username: postgres</pre><p>If a special user for Sysdig is created, then update <code class="code">dragent.yaml</code> file with <a class="link" href="">PostgreSQL#Expanded Example 1</a>.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">default.dragent.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-ExpandedExample1" class="bridgehead">Expanded Example 1</h6><p>Update the username and password created for the Sysdig agent in the respective fields, as follows:</p><pre class="programlisting">app_checks:
  - name: postgres
    pattern:
      comm: postgres
      port: 5432
    conf:
      username: sysdig-cloud
      password: password</pre><h6 id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-c71f77cf-c303-7b2e-ed5e-05e5f11b7aff" title="PostgreSQL Metrics">PostgreSQL Metrics</a>.</p><h6 id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><h6 id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-DefaultDashboard" class="bridgehead">Default Dashboard</h6><p>The default PostgreSQL dashboard includes combined metrics and individual metrics in an overview page.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-767dad92-9827-c56f-fef6-811f95739fc6-en.png" style="max-width: 600px; " alt="295567370.png"></img></td></tr></table></div><h6 id="UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790_id_PostgreSQL-OtherViews" class="bridgehead">Other Views</h6><p>You can also view individual metric charts from a drop-down menu in an Explore view.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-03032054-1b5f-44f7-27c9-e1af1063217d-en.png" style="max-width: 550px; " alt="295567374.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-1407fcf9-9e35-6d0e-e08a-3927cbcb6ee9-en.png" style="max-width: 550px; " alt="295567378.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-d763fea7-64a0-4792-62ed-daffdece4ba5-en.png" style="max-width: 550px; " alt="295567382.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-8a8fb7f0-884a-d149-dbf3-8620611dc740-en.png" style="max-width: 550px; " alt="295567386.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-6d18b240-b6bd-2d21-dc60-44367ac8539b" data-publication-date="" id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d"><div class="titlepage"><div><div class="title"><h5 class="title">RabbitMQ</h5></div></div></div><p> <a class="link" href="https://www.rabbitmq.com/" target="_blank">RabbitMQ </a>is an open-source message-broker software (sometimes called message-oriented middleware) that implements Advanced Message Queuing Protocol (AMQP). The RabbitMQ server is written in the Erlang language and is built on Open Telecom Platform framework for clustering and fail-over. Client libraries to interface with the broker are available in all major programming languages. If RabbitMQ is installed on your environment, the Sysdig agent will automatically connect. See <a class="link" href="">RabbitMQ#Default Configuration</a>.</p><p>The Sysdig agent automatically collects all metrics with the default configuration. You may need to edit the <code class="code">dragent.yaml</code> file if a metrics limit is reached.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-RabbitMQSetup" title="RabbitMQ Setup">RabbitMQ Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-Example1Managelogging_interval" title="Example 1: Manage logging_interval">Example 1: Manage logging_interval</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-Example2SpecifyNodesQueuesorExchanges" title="Example 2: Specify Nodes, Queues or Exchanges">Example 2: Specify Nodes, Queues or Exchanges</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-Example3Customtags" title="Example 3: Custom tags">Example 3: Custom tags</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-RabbitMQSetup" class="bridgehead">RabbitMQ Setup</h6><p>Enable the RabbitMQ management plugin. See RabbitMQ’s <a class="link" href="https://www.rabbitmq.com/management.html" target="_blank">documentation</a> to enable it.</p><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with RabbitMQ and collect all metrics.</p><pre class="programlisting">app_checks:
  - name: rabbitmq
    pattern:
      port: 15672
    conf:
      rabbitmq_api_url: "http://localhost:15672/api/"
      rabbitmq_user: guest
      rabbitmq_pass: guest</pre><p>The RabbitMQ app check tracks various entities, such as exchanges, queues and nodes. Each of these entities has its maximum limits. If the limit is reached, metrics can be controlled by editing the <code class="code">dragent.yaml</code> file, as in the following examples.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-Example1Managelogging_interval" class="bridgehead">Example 1: Manage logging_interval</h6><p>When a maximum limit is exceeded, the app check will log an info message:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows" style="text-align: left;"><colgroup><col></col></colgroup><tbody><tr><td class="td"><p> <code class="code">rabbitmq: Too many &lt;entity type&gt; (&lt;number of entities&gt;) to fetch and maximum limit is (&lt;configured limit&gt;). You must choose the &lt;entity type&gt; you are interested in by editing the dragent.yaml configuration file</code> </p></td></tr></tbody></table></div><p>This message is suppressed by a configuration parameter, <code class="code">logging_interval</code>.</p><p>Its default value is 300 seconds. This can be altered by specifying a different value in <code class="code">dragent.yaml</code>.</p><pre class="programlisting">app_checks:
  - name: rabbitmq
    pattern:
      port: 15672
    conf:
      rabbitmq_api_url: "http://localhost:15672/api/"
      rabbitmq_user: guest
      rabbitmq_pass: guest
      logging_interval: 10 # Value in seconds. Default is 300</pre><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-Example2SpecifyNodesQueuesorExchanges" class="bridgehead">Example 2: Specify Nodes, Queues or Exchanges</h6><p>Each of the tracked RabbitMQ entities has its maximum limits. Default limits are as follows:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Exchanges: 50</p></li><li class="listitem"><p>Queues: 200</p></li><li class="listitem"><p>Nodes: 100</p></li></ul></div><p>The metrics for these entities are tagged. If any of these entities are present but no transactions have occurred for them, the metrics are still reported with 0 values, though without tags. Therefore, when segmenting these metrics, the tags will show as <code class="code">unset</code> in the Sysdig Monitor Explore view. However, all such entities are still counted against the maximum limits. In such a scenario, you can specify the entity names for which you want to collect metrics in the <code class="code">dragent.yaml</code> file.</p><pre class="programlisting">app_checks:
  - name: rabbitmq
    pattern:
      port: 15672
    conf:
      rabbitmq_api_url: "http://localhost:15672/api/"
      rabbitmq_user: guest
      rabbitmq_pass: guest
      tags: ["queues:&lt;queuename&gt;"]
      nodes:
        - rabbit@localhost
        - rabbit2@domain
      nodes_regexes:
        - bla.*
      queues:
        - queue1
        - queue2
      queues_regexes:
        - thisqueue-.*
        - another_\d+queue
      exchanges:
        - exchange1
        - exchange2
      exchanges_regexes:
        - exchange*</pre><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-Example3Customtags" class="bridgehead">Example 3: Custom tags</h6><p>Optional tags can be applied to every emitted metric, service check, and/or event.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Names can be specified by exact name or regular expression.</p></div><pre class="programlisting">app_checks:
  - name: rabbitmq
    pattern:
      port: 15672
    conf:
      rabbitmq_api_url: "http://localhost:15672/api/"
      rabbitmq_user: guest
      rabbitmq_pass: guest
      tags: ["some_tag:some_value"]</pre><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-3e9e5476-4442-79cc-b43e-cbe19b7476e9" title="RabbitMQ Metrics">RabbitMQ Metrics</a>.</p><h6 id="UUID-23433921-af1d-af87-4f52-60da0ef2c01d_id_RabbitMQ-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-df7cf994-271c-1330-f600-9fd9e3d09f86-en.png" style="max-width: 500px; " alt="309231642.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-abd99c75-240a-0a3c-b092-c0db04a7c9c4-en.png" style="max-width: 500px; " alt="309231646.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-3c9f7178-1c8e-f0cd-0c2a-910c308ebb2e-en.png" style="max-width: 500px; " alt="309231650.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="500px"><tr><td><img src="image/uuid-5dc4f785-4a11-4e9e-15e6-f1eb2912e399-en.png" style="max-width: 500px; " alt="309231654.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-00fa9acd-9827-68ff-6245-b2e95df6f984" data-publication-date="" id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4"><div class="titlepage"><div><div class="title"><h5 class="title">RedisDB</h5></div></div></div><p> <a class="link" href="https://redis.io/" target="_blank">Redis</a> is an open-source (BSD licensed), in-memory data structure store, used as a database, cache, and message broker. If Redis is installed in your environment, the Sysdig agent will automatically connect in most cases. You may need to edit the default entries to get additional metrics. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-ApplicationSetup" title="Application Setup">Application Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-Example1KeyLengths" title="Example 1: Key Lengths">Example 1: Key Lengths</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-Example2AdditionalConfigurationOptions" title="Example 2: Additional Configuration Options">Example 2: Additional Configuration Options</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-Example3COMMANDSTATSMetrics" title="Example 3: COMMANDSTATS Metrics">Example 3: COMMANDSTATS Metrics</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-ApplicationSetup" class="bridgehead">Application Setup</h6><p>Redis will automatically expose all metrics. You do not need to configure anything in the Redis instance.</p><h6 id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with Redis and collect basic metrics:</p><pre class="programlisting">app_checks:
  - name: redis
    check_module: redisdb
    pattern:
      comm: redis-server
    conf:
      host: 127.0.0.1
      port: "{port}"</pre><p>Some additional metrics can be collected by editing the configuration file as shown in following examples. The options shown in Example 2 are relevant if Redis requires authentication or if a Unix socket is used.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-Example1KeyLengths" class="bridgehead">Example 1: Key Lengths</h6><p>The following example entry results in the metric <code class="code">redis.key.length</code> in the Sysdig Monitor UI, displaying the length of specific keys (segmented by: <code class="code">key</code>). To enable, provide the key names in <code class="code">dragent.yaml</code> as follows.</p><p>Note that length is 0 (zero) for keys that have a type other than <code class="code">list, set, hash,</code> or <code class="code">sorted set.</code> Keys can be expressed as patterns; see <a class="link" href="https://redis.io/commands/keys" target="_blank">https://redis.io/commands/keys</a>.</p><p>Sample entry in <code class="code">dragent.yaml</code>:</p><pre class="programlisting">app_checks:
  - name: redis
    check_module: redisdb
    pattern:
      comm: redis-server
    conf:
      host: 127.0.0.1
      port: "{port}"
      keys:
        - "list_1"
        - "list_9*"</pre><h6 id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-Example2AdditionalConfigurationOptions" class="bridgehead">Example 2: Additional Configuration Options</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <code class="code">unix_socket_path</code> (Optional) - Can be used if your Redis uses a socket instead of host and port.</p></li><li class="listitem"><p> <code class="code">password</code> (Optional) - Can be used if your Redis requires a password</p></li></ul></div><pre class="programlisting">app_checks:
  - name: redis
    check_module: redisdb
    pattern:
      comm: redis-server
    conf:
      host: 127.0.0.1
      port: "{port}"
      # unix_socket_path: /var/run/redis/redis.sock # can be used in lieu of host/port
      # password: mypassword                                            # if your Redis requires auth</pre><h6 id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-Example3COMMANDSTATSMetrics" class="bridgehead">Example 3: COMMANDSTATS Metrics</h6><p>You can also collect the <code class="code">INFO COMMANDSTATS</code> result as metrics (<code class="code">redis.command.*</code>). This works with Redis &gt;= 2.6</p><p>Sample implementation:</p><pre class="programlisting">app_checks:
  - name: redis
    check_module: redisdb
    pattern:
      comm: redis-server
    conf:
      host: 127.0.0.1
      port: "{port}"
      command_stats: true</pre><h6 id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-c557b5dd-374f-4869-1160-aebd3173ed9c" title="RedisDB Metrics">RedisDB Metrics</a>.</p><h6 id="UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4_id_RedisDB-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-1515f74d-c57d-aea3-1f0d-0359f61e5998-en.png" style="max-width: 550px; " alt="299106363.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-c2609a6c-5511-c5fb-a4e3-4a432ccc0fa4-en.png" style="max-width: 550px; " alt="299171907.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-84c81450-7a75-6d54-aa2a-c8a2fedcd847-en.png" style="max-width: 550px; " alt="299368513.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-17956485-3808-c32c-74a2-c4f21cc886a7-en.png" style="max-width: 550px; " alt="299139124.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-c1c767b7-ec54-f09c-7b86-af42c34031c1-en.png" style="max-width: 550px; " alt="299270175.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-d4035a08-5878-333e-e869-b0d85b7fc97e" data-publication-date="" id="UUID-3f95785a-dfe2-8963-f37f-ff1adac03558"><div class="titlepage"><div><div class="title"><h5 class="title">Riak CS</h5></div></div></div><p>Riak CS does not ship with a default configuration because it needs at least <span class="bold bold"><strong> <code class="code">access_id</code> </strong></span> and <span class="bold bold"><strong> <code class="code">access_secret</code> </strong></span> to work. Add the <code class="code">riakcs</code> entry in your <span class="bold bold"><strong> <code class="code">dragent.yaml</code> </strong></span> with those unique parameters:</p><pre class="programlisting">  - name: riakcs
    pattern:
      comm: beam.smp
      port: 8080
    conf:
      access_id: "my_access_id"
      access_secret: "my_access_secret"
      #is_secure: false 
      s3_root: s3.amazonaws.dev</pre><p>To get statistics, <code class="code">app_checks</code> also needs permissions to read the <span class="bold bold"><strong> <code class="code">riak-cs</code> </strong></span> bucket.</p></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-2438dc14-a378-a64b-0f98-0cd8435fede4" data-publication-date="" id="UUID-05403fdc-aac7-18e6-b02a-34b489507a3d"><div class="titlepage"><div><div class="title"><h5 class="title">SNMP</h5></div></div></div><p> <a class="link" href="https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol" target="_blank">Simple Network Management Protocol (SNMP)</a> is an application-layer protocol used to manage and monitor network devices and their functions. The Sysdig agent can connect to network devices and collect metrics using SNMP.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-SNMPOverview" title="SNMP Overview">SNMP Overview</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-SNMPAgentConfiguration" title="SNMP Agent Configuration">SNMP Agent Configuration</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-Example1" title="Example 1">Example 1</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-SNMPOverview" class="bridgehead">SNMP Overview</h6><p> <a class="link" href="https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol" target="_blank">Simple Network Management Protocol (SNMP)</a> is an Internet Standard protocol for collecting and configuring information about devices in the networks. The network devices include physical devices like switches, routers, servers etc.</p><p>SNMP has three primary versions ( SNMPv1, SNMPv2c and SNMPv3) and SNMPv2c is most widely used.</p><p>SNMP allows device vendors to expose management data in the form of variables on managed systems organized in a management information base (MIB), which describe the system status and configuration. The devices can be queried as well as configured remotely using these variables. Certain MIBs are generic and supported by the majority of the device vendors. Additionally, each vendor can have their own private/enterprise MIBs for vendor-specific information.</p><p>SNMP MIB is a collection of objects uniquely identified by an Object Identifier (OID). OIDs are represented in the form of x.0, where x is the name of object in the MIB definition.</p><pre class="programlisting">
For example, suppose one wanted to identify an instance of the variable sysDescr 

The object class for sysDescr is:             

iso org dod internet mgmt mib system sysDescr       
 1   3   6     1      2    1    1       1

Hence, the object type, x, would be 1.3.6.1.2.1.1.1 </pre><h6 id="UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-SNMPAgentConfiguration" class="bridgehead">SNMP Agent Configuration</h6><p>To monitor the servers with the Sysdig agent, the SNMP agent must be installed on the servers to query the system information.</p><p>For Ubuntu-based servers, use the following commands to install the SNMP Daemon:</p><pre class="programlisting">$sudo apt-get update
$sudo apt-get install snmpd</pre><p>Next, configure this SNMP agent to respond to queries from the SNMP manager by updating the configuration file located at <code class="code">/etc/snmp/snmpd.conf</code> </p><p>Below are the important fields that must be configured:</p><p> <span class="bold bold"><strong>snmpd.conf</strong></span> </p><pre class="programlisting">
# Listen for connections on all interfaces (both IPv4 *and* IPv6)
agentAddress udp:161,udp6:[::1]:161

## ACCESS CONTROL
## system + hrSystem groups only
view systemonly included .1.3.6.1.2.1.1
view systemonly included .1.3.6.1.2.1.25.1
view systemonly included .1.3.6.1.2.1.31.1
view systemonly included .1.3.6.1.2.1.2.2.1.1

# Default access to basic system info
rocommunity public default -V systemonly
# rocommunity6 is for IPv6
rocommunity6 public default -V systemonly</pre><p>After making changes to the config file, restart the <code class="code">snmpd</code> service using:</p><pre class="programlisting">$sudo service snmpd restart</pre><h6 id="UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>No default configuration is present for SNMP check.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>You must specify the OID/MIB for every parameter you want to collect, as in the following example.</p></li><li class="listitem"><p>The OIDs configured in <code class="code">dragent.yaml</code> are included in the <code class="code">snmpd.conf</code> configuration under the 'ACCESS CONTROL' section</p></li><li class="listitem"><p>Ensure that the <code class="code">community_string</code> is same as configured in the system configuration (<code class="code">rocommunity</code>).</p></li></ul></div><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-Example1" class="bridgehead">Example 1</h6><pre class="programlisting">app_checks:
  - name: snmp
    pattern:
      comm: python
      arg: /opt/draios/bin/sdchecks
    interval: 30
    conf:
      mibs_folder: /usr/share/mibs/ietf/
      ip_address: 52.53.158.103
      port: 161
      community_string: public

      # Only required for snmp v1, will default to 2
      # snmp_version: 2 

      # Optional tags can be set with each metric
      tags:
         - vendor:EMC
         - array:VNX5300
         - location:front

      metrics:
        - OID: 1.3.6.1.2.1.25.2.3.1.5
          name: hrStorageSize
        - OID: 1.3.6.1.2.1.1.7
          name: sysServices
        - MIB: TCP-MIB
          symbol: tcpActiveOpens
        - MIB: UDP-MIB
          symbol: udpInDatagrams
        - MIB: IP-MIB
          table: ipSystemStatsTable
          symbols:
            - ipSystemStatsInReceives
          metric_tags:
            - tag: ipversion
              index: 1        # specify which index you want to read the tag value from
        - MIB: IF-MIB
          table: ifTable
          symbols:
            - ifInOctets
            - ifOutOctets
          metric_tags:
            - tag: interface
              column: ifDescr  # specify which column to read the tag value from

</pre><p>The Sysdig agent allows you to monitor the SNMP counters and gauge of your choice. For each device, specify the metrics that you want to monitor in the <code class="code">metrics</code> subsection using one of the following methods:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Specify a MIB and the symbol that you want to export</p><pre class="programlisting">metrics:
  - MIB: UDP-MIB
    symbol: udpInDatagrams</pre></li><li class="step"><p>Specify an OID and the name you want the metric to appear under in Sysdig Monitor:</p><pre class="programlisting">metrics:
  - OID: 1.3.6.1.2.1.6.5
    name: tcpActiveOpens
#The name here is the one specified in the MIB but you could use any name.</pre></li><li class="step"><p>Specify an MIB and a table from which to extract information:</p><pre class="programlisting">metrics:
  - MIB: IF-MIB
    table: ifTable
    symbols:
      - ifInOctets
    metric_tags:
      - tag: interface
    column: ifDescr</pre></li></ol></div><h6 id="UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>The SNMP check does not have default metrics. All metrics mentioned in <code class="code">dragent.yaml</code> file will be seen with <code class="code">snmp.*</code> prefix/</p><h6 id="UUID-05403fdc-aac7-18e6-b02a-34b489507a3d_id_SNMP-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-c789902d-f374-b51d-990c-1d63b9a0461a-en.png" style="max-width: 550px; " alt="305201259.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-46dfe361-68aa-597c-3d3f-112c8efc1068-en.png" style="max-width: 550px; " alt="305397840.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-73be882a-bd2e-27ab-12ec-b1e30e89f905" data-publication-date="" id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6"><div class="titlepage"><div><div class="title"><h5 class="title">Supervisord</h5></div></div></div><p> <a class="link" href="http://supervisord.org/" target="_blank">Supervisor daemon</a> is a client/server system that allows its users to monitor and control a number of processes on UNIX-like operating systems., The Supervisor check monitors the uptime, status, and number of processes running under Supervisord.</p><p>No default configuration is provided for the Supervisor check; you must provide the configuration in the <code class="code">dragent.yaml</code> file for the Sysdig agent to collect the data provided by Supervisor.</p><p>This page describes the setup steps required on Supervisor, how to edit the Sysdig agent configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-SupervisorSetup" class="bridgehead">Supervisor Setup</h6><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-Configuration" class="bridgehead">Configuration</h6><p>The Sysdig agent can collect data from Supervisor via HTTP server or UNIX socket. The agent collects the same data regardless of the configured collection method.</p><p>Un-comment the following or add them if they are not present in <code class="code">/etc/supervisor/supervisord.conf</code> </p><pre class="programlisting">[inet_http_server]
port=localhost:9001
username=user  # optional
password=pass  # optional
...


[supervisorctl]
serverurl=unix:///tmp/supervisor.sock
...

[unix_http_server]
file=/tmp/supervisor.sock
chmod=777 # make sure chmod is set so that non-root users can read the socket.
...

[program:foo]
command=/bin/cat

</pre><p>The programs controlled by Supervisor are given by different <code class="code">[program]</code> sections in the configuration. Each program you want to manage by Supervisor must be specified in the Supervisor configuration file, with its supported options in the <code class="code">[program]</code>section. See Supervisor's <a class="link" href="https://github.com/Supervisor/supervisor/blob/master/supervisor/skel/sample.conf" target="_blank">sample.conf</a> file for details.</p><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> does not have any configuration to connect the agent with Supervisor. Edit <code class="code">dragent.yaml</code> following the Examples given to connect with Supervisor and collect <code class="code">supervisor.*</code> metrics.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-Example1ConnectbyUNIXSocket" class="bridgehead">Example 1: Connect by UNIX Socket</h6><pre class="programlisting">  - name: supervisord
    pattern:
      comm: supervisord
    conf:
      socket: "unix:///tmp/supervisor.sock"
      </pre><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-Example2ConnectbyHostNameandPortOptionalAuthentication" class="bridgehead">Example 2: Connect by Host Name and Port, Optional Authentication</h6><pre class="programlisting">- name: supervisord
  pattern:
    comm: supervisord
  conf:
    host: localhost
    port: 9001
# user: user # Optional. Required only if a username is configured.
# pass: pass # Optional. Required only if a password is configured.</pre><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-MetricsAvailable" class="bridgehead">Metrics Available</h6><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Metric Name</p></th><th class="th"><p>Metric Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong>supervisord.process.count</strong></span> </p><p>(gauge)</p></td><td class="td"><p>The number of supervisord monitored processes</p><p> <span class="italic italic">shown as process</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>supervisord.process.uptime</strong></span> </p><p>(gauge)</p></td><td class="td"><p>The process uptime</p><p> <span class="italic italic">shown as second</span> </p></td></tr></tbody></table></div><p>See also <a class="link" href="26547-6901-applications.html#UUID-c657973a-d21d-18d9-b47b-84dd585f8afd" title="Supervisord Metrics">Supervisord Metrics</a>.</p><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-ServiceCheck" class="bridgehead">Service Check</h6><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-supervisoredcanconnect" class="bridgehead">supervisored.can.connect:</h6><p>Returns <code class="code">CRITICAL</code> if the Sysdig agent cannot connect to the HTTP server or UNIX socket configured, otherwise OK.</p><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-supervisordprocessstatus" class="bridgehead">supervisord.process.status:</h6><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>SUPERVISORD STATUS</p></th><th class="th"><p>SUPERVISORD.PROCESS.STATUS</p></th></tr></thead><tbody><tr><td class="td"><p>STOPPED</p></td><td class="td"><p>CRITICAL</p></td></tr><tr><td class="td"><p>STARTING</p></td><td class="td"><p>UNKNOWN</p></td></tr><tr><td class="td"><p>RUNNING</p></td><td class="td"><p>OK</p></td></tr><tr><td class="td"><p>BACKOFF</p></td><td class="td"><p>CRITICAL</p></td></tr><tr><td class="td"><p>STOPPING</p></td><td class="td"><p>CRITICAL</p></td></tr><tr><td class="td"><p>EXITED</p></td><td class="td"><p>CRITICAL</p></td></tr><tr><td class="td"><p>FATAL</p></td><td class="td"><p>CRITICAL</p></td></tr><tr><td class="td"><p>UNKNOWN</p></td><td class="td"><p>UNKNOWN</p></td></tr></tbody></table></div><h6 id="UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6_id_Supervisord-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="650px"><tr><td><img src="image/uuid-ae2d307c-540e-7367-bcca-4c9084a0ed8b-en.png" style="max-width: 650px; " alt="302284979.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="650px"><tr><td><img src="image/uuid-c0d50983-e396-911e-fdf5-02393ed62e69-en.png" style="max-width: 650px; " alt="302350569.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="650px"><tr><td><img src="image/uuid-b6473c88-5961-67d7-dfe4-e8eb5a94d9bb-en.png" style="max-width: 650px; " alt="302022921.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="650px"><tr><td><img src="image/uuid-4bd52c4f-fc77-ba1f-e4b2-754b968bb2f9-en.png" style="max-width: 650px; " alt="302022926.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-82943d80-93bd-2f6f-c9e0-ee1979074d4d" data-publication-date="" id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627"><div class="titlepage"><div><div class="title"><h5 class="title">TCP</h5></div></div></div><p>You can monitor the status of your custom application's port using the TCP check. This check will routinely connect to the designated port and send Sysdig Monitor a simple on/off metric and response time.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><h6 id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-Contents" class="bridgehead">Contents</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-TCPApplicationSetup" title="TCP Application Setup">TCP Application Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-Example1" title="Example 1">Example 1</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-MetricsAvailable" title="Metrics Available">Metrics Available</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-ServiceChecks" title="Service Checks">Service Checks</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-TCPApplicationSetup" class="bridgehead">TCP Application Setup</h6><p>Any application listening on a TCP port can be monitored with <code class="code">tcp_check</code>.</p><h6 id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>No default configuration is provided in the default settings file; you must add the entries in Example 1 to the user settings config file <span class="bold bold"><strong> <code class="code">dragent.yaml.</code> </strong></span> </p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-Example1" class="bridgehead">Example 1</h6><pre class="programlisting"> - name: tcp_check
    check_module: tcp_check
    pattern:
      comm: httpd
      arg: DFOREGROUND
    conf:
      port: 80
      collect_response_time: true</pre><p>This example shows monitoring a TCP check on an Apache process running on the host on port 80.</p><p> <span class="bold bold"><strong> <code class="code">comm:</code> </strong></span> is the command for running the Apache server on port 80.</p><p>If you want the response time for your port, meaning the amount of time the process takes to accept the connection, you can add the <span class="bold bold"><strong> <code class="code">collect_response_time: true </code> </strong></span>parameter under the <span class="bold bold"><strong> <code class="code">conf: </code> </strong></span>section and the additional metric <span class="bold bold"><strong> <code class="code">network.tcp.response_time</code> </strong></span> will appear in the Metrics list.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p>Do not use <span class="bold bold"><strong> <code class="code">port:</code> </strong></span>under the <span class="bold bold"><strong> <code class="code">pattern</code>: </strong></span>section in this case, because if the process is not listening it will not be matched and the metric will not be sent to Sysdig Monitor.</p></div><h6 id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-MetricsAvailable" class="bridgehead">Metrics Available</h6><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Metric Name</p></th><th class="th"><p>Metric Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong>network.tcp.response_time</strong></span> </p><p>(gauge)</p></td><td class="td"><p>The response time of a given host and TCP port, tagged with url, e.g. 'url:192.168.1.100:22'.</p><p> <span class="italic italic">shown as second</span> </p></td></tr></tbody></table></div><p>See also <a class="link" href="26547-6901-applications.html#UUID-15be99f1-5c64-e04a-00a1-a0e215601ec6" title="TCP Metrics">TCP Metrics</a>.</p><h6 id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-ServiceChecks" class="bridgehead">Service Checks</h6><p> <span class="bold bold"><strong> <code class="code">tcp.can_connect</code> </strong></span>:</p><p>DOWN if the a<code class="code">gent</code> cannot connect to the configured host and port, otherwise UP.</p><h6 id="UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627_id_TCP-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-9903e676-423a-4dc3-b960-a31b48092da7-en.png" style="max-width: 600px; " alt="309297288.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/uuid-38b961f1-7ddf-a7d7-16c4-8ed7ebbd1b25-en.png" style="max-width: 600px; " alt="309297292.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-4800c884-ad47-4662-1700-b6a56b33ec56" data-publication-date="" id="UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a"><div class="titlepage"><div><div class="title"><h5 class="title">Varnish</h5></div></div></div><p> <a class="link" href="https://varnish-cache.org/" target="_blank">Varnish HTTP Cache</a> is a web application accelerator, also known as a "caching HTTP reverse proxy." You install it in front of any server that speaks HTTP and configure it to cache the contents. If Varnish is installed on your environment, the Sysdig agent will automatically connect.See <a class="link" href="">Varnish#Default Configuration</a>.</p><p>The Sysdig Agent automatically collects all metrics. You can also edit the configuration to emit service checks for the back end.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-VarnishSetup" title="Varnish Setup">Varnish Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-Example1ServiceHealthCheckswithvarnishadm" title="Example 1: Service Health Checks with varnishadm">Example 1: Service Health Checks with varnishadm</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-VarnishSetup" class="bridgehead">Varnish Setup</h6><p>Varnish will automatically expose all metrics. You do not need to add anything to the Varnish instance.</p><h6 id="UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>By default, Sysdig's <code class="code">dragent.default.yaml</code> uses the following code to connect with Varnish and collect all metrics.</p><pre class="programlisting">app_checks:
  - name: varnish
    interval: 15
    pattern:
      comm: varnishd
    conf:
      varnishstat: /usr/bin/varnishstat</pre><p>Optionally, if you want to submit service checks for the health of each back end, you can configure <code class="code">varnishadm</code> and edit <code class="code">dragent.yaml</code> as in Example 1.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-Example1ServiceHealthCheckswithvarnishadm" class="bridgehead">Example 1: Service Health Checks with varnishadm</h6><p>When <code class="code">varnishadm</code> is configured, the Sysdig agent requires privileges to execute the binary with root privileges. Add the following to your <code class="code">/etc/sudoers</code> file:</p><pre class="programlisting">
sysdig-agent ALL=(ALL) NOPASSWD:/usr/bin/varnishadm</pre><p>Then edit <code class="code">dragent.yaml</code> as follows. <span class="bold bold"><strong>Note:</strong></span> If you have configured <code class="code">varnishadm</code> and your secret file is NOT <code class="code">/etc/varnish/secret</code>, you can comment out <code class="code">secretfile.</code> </p><pre class="programlisting">app_checks:
  - name: varnish
    interval: 15
    pattern:
      comm: varnishd
    conf:
      varnishstat: /usr/bin/varnishstat
      varnishadm: /usr/bin/varnishadm
      secretfile: /etc/varnish/secret   </pre><p>This example will enable following service check.</p><p> <code class="code">varnish.backend_healthy</code>: The agent submits a service check for each Varnish backend, tagging each with <code class="code">backend:&lt;backend_name&gt;</code>.</p><h6 id="UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="26547-6901-applications.html#UUID-fd9f7b23-bc24-9fd8-002f-aa7d32112cfb" title="Varnish Metrics">Varnish Metrics</a>.</p><h6 id="UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a_id_Varnish-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-2e1f7922-a276-496e-d742-d16f0dcde9b1-en.png" style="max-width: 550px; " alt="300187670.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-25ca15dc-b9e1-5f15-58e6-e30a99cf1afb-en.png" style="max-width: 550px; " alt="300056584.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-7ed66a44-ea91-5341-c291-07c466ea7714-en.png" style="max-width: 550px; " alt="300154903.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-b086dbf1-99b1-aded-af7a-ea96f0aea1e3-en.png" style="max-width: 550px; " alt="300122125.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-4b225ab2-9b47-70c9-1be7-659e98768843-en.png" style="max-width: 550px; " alt="300089362.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-3561120c-98f1-cf5b-b4ac-a1ed23918ec8" data-publication-date="" id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d"><div class="titlepage"><div><div class="title"><h5 class="title">**Copy of Mesos/Marathon**</h5></div></div></div><p> <a class="link" href="http://mesos.apache.org/" target="_blank">Mesos</a> is built using the same principles as the Linux kernel, only at a different level of abstraction. The Mesos kernel runs on every machine and provides applications (e.g., Hadoop, Spark, Kafka, Elasticsearch) with API’s for resource management and scheduling across entire datacenter and cloud environments. <a class="link" href="https://mesosphere.github.io/marathon/" target="_blank">Marathon</a> is a production-grade container orchestration platform for Apache Mesos.</p><p>If Mesos and Marathon are installed in your environment, the Sysdig agent will automatically connect and start collecting metrics.You may need to edit the default entries to add a custom configuration if the default does not work. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosMarathonSetup" title="Mesos/Marathon Setup">Mesos/Marathon Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosMaster" title="Mesos Master">Mesos Master</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosSlave" title="Mesos Slave">Mesos Slave</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Marathon" title="Marathon">Marathon</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Example1" title="Example 1">Example 1</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Marathon1" title="Marathon">Marathon</a> </p></li></ul></div></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MetricsAvailable" title="Metrics Available">Metrics Available</a> </p><div class="itemizedlist"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosMaster1" title="Mesos Master">Mesos Master</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosSlave1" title="Mesos Slave">Mesos Slave</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Marathon" title="Marathon">Marathon:</a> </p></li></ul></div><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosMaster" title="Mesos Master">Mesos Master:</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosSlave" title="Mesos Slave">Mesos Slave:</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Marathon1" title="Marathon">Marathon:</a> </p></li></ul></div></li></ul></div></li></ul></div><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosMarathonSetup" class="bridgehead">Mesos/Marathon Setup</h6><p>Both Mesos and Marathon will automatically expose all metrics. You do not need to add anything to the Mesos/Marathon instance.</p><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><p>The Sysdig agent has different entries for <code class="code">mesos-master, mesos-slave</code> and <code class="code">marathon</code> in its configuration file. Default entries are present in Sysdig's <code class="code">dragent.default.yaml </code>file and collect all metrics for Mesos. For Marathon, it collects basic metrics. You may need add configuration to collect additional metrics.</p><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>In the urls for mesos-master and mesos-slave, {mesos_url} will be replaced with either the hostname of the autodetected mesos master/slave if autodetection is enabled or an explicit value from mesos_state_uri otherwise.</p><p>In the urls for marathon, {marathon_url} will be replaced with the hostname of the first configured/discovered marathon framework.</p><p>For all mesos and marathon apps, {auth_token} will either be blank or an autogenerated token obtained via the /acs/api/v1/auth/login endpoint.</p><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosMaster" class="bridgehead">Mesos Master</h6><pre class="programlisting">app_checks:
  - name: mesos-master
    check_module: mesos_master
    interval: 30
    pattern:
      comm: mesos-master
    conf:
      url: "{mesos_url}:{port}"
      auth_token: "{auth_token}"
      mesos_creds: "{mesos_creds}"</pre><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosSlave" class="bridgehead">Mesos Slave</h6><pre class="programlisting">app_checks:
  - name: mesos-slave
    check_module: mesos_slave
    pattern:
      comm: mesos-slave
    interval: 30
    conf:
      url: "{mesos_url}:{port}"
      auth_token: "{auth_token}"
      mesos_creds: "{mesos_creds}"
      # Name of individual tasks to monitor, if needed
      # tasks:
        # - mongo
        # - cassandra</pre><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Marathon" class="bridgehead">Marathon</h6><pre class="programlisting">app_checks:
  - name: marathon
    check_module: marathon
    interval: 30
    pattern:
      arg: mesosphere.marathon.Main
    conf:
      url: "{marathon_url}"
      auth_token: "{auth_token}"
      marathon_creds: "{marathon_creds}"</pre><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Example1" class="bridgehead">Example 1</h6><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Marathon1" class="bridgehead">Marathon</h6><p>Enable the flag <code class="code">full_metrics</code> to collect all metrics for marathon.</p><p>Following additional metrics collected with this configuration:</p><p>marathon.cpus</p><p>marathon.disk</p><p> <code class="code">marathon.instances </code> <code class="code">marathon.mem</code> </p><pre class="programlisting">app_checks:
  - name: marathon
    check_module: marathon
    interval: 30
    pattern:
      arg: mesosphere.marathon.Main
    conf:
      url: "{marathon_url}"
      auth_token: "{auth_token}"
      marathon_creds: "{marathon_creds}"
      full_metrics: true</pre><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MetricsAvailable" class="bridgehead">Metrics Available</h6><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosMaster1" class="bridgehead">Mesos Master</h6><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Metric Name</p></th><th class="th"><p>Metric Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong>mesos.framework.cpu</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Framework cpu</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.framework.mem</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Framework mem</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.framework.disk</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Framework disk</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.role.cpu</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Role cpu</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.role.mem</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Role mem</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.role.disk</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Role disk</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.tasks_error</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of tasks that were invalid</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.tasks_failed</strong></span> </p><p>(rate)</p></td><td class="td"><p>Number of failed tasks</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.tasks_finished</strong></span> </p><p>(rate)</p></td><td class="td"><p>Number of finished tasks</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.tasks_killed</strong></span> </p><p>(rate)</p></td><td class="td"><p>Number of killed tasks</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.tasks_lost</strong></span> </p><p>(rate)</p></td><td class="td"><p>Number of lost tasks</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.tasks_running</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of running tasks</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.tasks_staging</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of staging tasks</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.tasks_starting</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of starting tasks</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slave_registrations</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of slaves that were able to cleanly re-join the cluster and connect back to the master after the master is disconnected.</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slave_removals</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of slaves removed for various reasons, including maintenance</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slave_reregistrations</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of slave re-registrations</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slave_shutdowns_canceled</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of cancelled slave shutdowns</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slave_shutdowns_scheduled</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of slaves which have failed their health check and are scheduled to be removed</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slaves_active</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of active slaves</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slaves_connected</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of connected slaves</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slaves_disconnected</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of disconnected slaves</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.slaves_inactive</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of inactive slaves</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.cpus_percent</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Percentage of allocated CPUs</p><p> <span class="italic italic">shown as percent</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.cpus_used</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of allocated CPUs</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.cpus_total</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of CPUs</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.gpus_total</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of GPUs</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.disk_percent</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Percentage of allocated disk space</p><p> <span class="italic italic">shown as percent</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.disk_used</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Allocated disk space</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.disk_total</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Disk space</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.mem_percent</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Percentage of allocated memory</p><p> <span class="italic italic">shown as percent</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.mem_used</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Allocated memory</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.mem_total</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Total memory</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.queued_operations</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of queued operations</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.registry_size_bytes</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Registry size</p><p> <span class="italic italic">shown as byte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_fetch_ms</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Registry read latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.count</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Registry write count</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.max</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Maximum registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.min</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Minimum registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.p50</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Median registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.p90</strong></span> </p><p>(gauge)</p></td><td class="td"><p>90th percentile registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.p95</strong></span> </p><p>(gauge)</p></td><td class="td"><p>95th percentile registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.p99</strong></span> </p><p>(gauge)</p></td><td class="td"><p>99th percentile registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.p999</strong></span> </p><p>(gauge)</p></td><td class="td"><p>99.9th percentile registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.registrar.state_store_ms.p9999</strong></span> </p><p>(gauge)</p></td><td class="td"><p>99.99th percentile registry write latency</p><p> <span class="italic italic">shown as millisecond</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.frameworks_active</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of active frameworks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.frameworks_connected</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of connected frameworks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.frameworks_disconnected</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of disconnected frameworks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.frameworks_inactive</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of inactive frameworks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.cpus_total</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of CPUs available</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.load_15min</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Load average for the past 15 minutes</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.load_1min</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Load average for the past minutes</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.load_5min</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Load average for the past 5 minutes</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.mem_free_bytes</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Free memory</p><p> <span class="italic italic">shown as byte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.mem_total_bytes</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Total memory</p><p> <span class="italic italic">shown as byte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.elected</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Whether this is the elected master</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.uptime_secs</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Uptime</p><p> <span class="italic italic">shown as second</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.dropped_messages</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of dropped messages</p><p> <span class="italic italic">shown as message</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.outstanding_offers</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of outstanding resource offers</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.event_queue_dispatches</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of dispatches in the event queue</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.event_queue_http_requests</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of HTTP requests in the event queue</p><p> <span class="italic italic">shown as request</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.event_queue_messages</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of messages in the event queue</p><p> <span class="italic italic">shown as message</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.invalid_framework_to_executor_messages</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of invalid framework messages</p><p> <span class="italic italic">shown as message</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.invalid_status_update_acknowledgements</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of invalid status update acknowledgements</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.invalid_status_updates</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of invalid status updates</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.valid_framework_to_executor_messages</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of valid framework messages</p><p> <span class="italic italic">shown as message</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.valid_status_update_acknowledgements</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of valid status update acknowledgements</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.cluster.valid_status_updates</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of valid status updates</p></td></tr></tbody></table></div><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosSlave1" class="bridgehead">Mesos Slave</h6><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Metric Name</p></th><th class="th"><p>Metric Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.cpus_total</strong></span>(gauge)</p></td><td class="td"><p>Number of CPUs available</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.load_15min</strong></span>(gauge)</p></td><td class="td"><p>Load average for the past 15 minutes</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.load_1min</strong></span>(gauge)</p></td><td class="td"><p>Load average for the past minutes</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.load_5min</strong></span>(gauge)</p></td><td class="td"><p>Load average for the past 5 minutes</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.mem_free_bytes</strong></span>(gauge)</p></td><td class="td"><p>Free memory</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.system.mem_total_bytes</strong></span>(gauge)</p></td><td class="td"><p>Total memory</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.registered</strong></span>(gauge)</p></td><td class="td"><p>Whether this slave is registered with a master</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.stats.uptime_secs</strong></span>(gauge)</p></td><td class="td"><p>Slave uptime</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.state.task.cpu</strong></span>(gauge)</p></td><td class="td"><p>Task cpu</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.state.task.mem</strong></span>(gauge)</p></td><td class="td"><p>Task memory</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.state.task.disk</strong></span>(gauge)</p></td><td class="td"><p>Task disk</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.tasks_failed</strong></span>(gauge)</p></td><td class="td"><p>Number of failed tasks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.tasks_finished</strong></span>(gauge)</p></td><td class="td"><p>Number of finished tasks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.tasks_killed</strong></span>(gauge)</p></td><td class="td"><p>Number of killed tasks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.tasks_lost</strong></span>(gauge)</p></td><td class="td"><p>Number of lost tasks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.tasks_running</strong></span>(gauge)</p></td><td class="td"><p>Number of running tasks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.tasks_staging</strong></span>(gauge)</p></td><td class="td"><p>Number of staging tasks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.tasks_starting</strong></span>(gauge)</p></td><td class="td"><p>Number of starting tasks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.cpus_percent</strong></span>(gauge)</p></td><td class="td"><p>Percentage of allocated CPUs</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.cpus_used</strong></span>(gauge)</p></td><td class="td"><p>Number of allocated CPUs</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.cpus_total</strong></span>(gauge)</p></td><td class="td"><p>Number of CPUs</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.disk_percent</strong></span>(gauge)</p></td><td class="td"><p>Percentage of allocated disk space</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.disk_used</strong></span>(gauge)</p></td><td class="td"><p>Allocated disk space</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.disk_total</strong></span>(gauge)</p></td><td class="td"><p>Disk space</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.mem_percent</strong></span>(gauge)</p></td><td class="td"><p>Percentage of allocated memory</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.mem_used</strong></span>(gauge)</p></td><td class="td"><p>Allocated memory</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.mem_total</strong></span>(gauge)</p></td><td class="td"><p>Total memory</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.executors_registering</strong></span>(gauge)</p></td><td class="td"><p>Number of executors registering</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.executors_running</strong></span>(gauge)</p></td><td class="td"><p>Number of executors running</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.executors_terminated</strong></span>(gauge)</p></td><td class="td"><p>Number of terminated executors</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.executors_terminating</strong></span>(gauge)</p></td><td class="td"><p>Number of terminating executors</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.frameworks_active</strong></span>(gauge)</p></td><td class="td"><p>Number of active frameworks</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.invalid_framework_messages</strong></span>(gauge)</p></td><td class="td"><p>Number of invalid framework messages</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.invalid_status_updates</strong></span>(gauge)</p></td><td class="td"><p>Number of invalid status updates</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.recovery_errors</strong></span>(gauge)</p></td><td class="td"><p>Number of errors encountered during slave recovery</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.valid_framework_messages</strong></span>(gauge)</p></td><td class="td"><p>Number of valid framework messages</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>mesos.slave.valid_status_updates</strong></span>(gauge)</p></td><td class="td"><p>Number of valid status updates</p></td></tr></tbody></table></div><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Marathon" class="bridgehead">Marathon:</h6><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Metric Name</p></th><th class="th"><p>Metric Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong>marathon.apps</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of applications</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>marathon.backoffFactor</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Backoff time multiplication factor for each consecutive failed task launch; tagged by app_id and version</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>marathon.backoffSeconds</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Task backoff period; tagged by app_id and version</p><p> <span class="italic italic">shown as second</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>marathon.cpus</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Configured CPUs for each instance of a given application</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>marathon.disk</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Configured CPU for each instance of a given application</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>marathon.instances</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of instances of a given application; tagged by app_id and version</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>marathon.mem</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Configured memory for each instance of a given application; tagged by app_id and version</p><p> <span class="italic italic">shown as mebibyte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>marathon.tasksRunning</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of tasks running for a given application; tagged by app_id and version</p><p> <span class="italic italic">shown as task</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>marathon.tasksStaged</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Number of tasks staged for a given application; tagged by app_id and version</p><p> <span class="italic italic">shown as task</span> </p></td></tr></tbody></table></div><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosMaster" class="bridgehead">Mesos Master:</h6><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-MesosSlave" class="bridgehead">Mesos Slave:</h6><h6 id="UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d_id_id-CopyofMesosMarathon-Marathon1" class="bridgehead">Marathon:</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-b2077437-54c7-c658-99e9-f21fd81d4a73-en.png" style="max-width: 550px; " alt="306577490.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-f4da72a6-6b70-d444-6f10-45ae18bbec75-en.png" style="max-width: 550px; " alt="306577494.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-73e4c927-245b-ad38-c443-11f0835f2321" data-publication-date="" id="UUID-87df2de7-bd2c-41a0-7d89-350785835a8c"><div class="titlepage"><div><div class="title"><h5 class="title">**Copy of Riak CS**</h5></div></div></div><p>Riak CS does not ship with a default configuration because it needs at least <span class="bold bold"><strong><code class="code">access_id</code></strong></span> and <span class="bold bold"><strong><code class="code">access_secret</code></strong></span> to work. Add the <code class="code">riakcs</code> entry in your <span class="bold bold"><strong><code class="code">dragent.yaml</code></strong></span> with those unique parameters:</p><pre class="programlisting">  - name: riakcs
    pattern:
      comm: beam.smp
      port: 8080
    conf:
      access_id: "my_access_id"
      access_secret: "my_access_secret"
      #is_secure: false 
      s3_root: s3.amazonaws.dev</pre><p>To get statistics, <code class="code">app_checks</code> also needs permissions to read the <span class="bold bold"><strong><code class="code">riak-cs</code></strong></span> bucket.</p></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-94ace5f9-a293-f649-7e58-d504dc4fdd05" data-publication-date="" id="UUID-eb0066c5-b054-1423-60a7-ebff62b0462e"><div class="titlepage"><div><div class="title"><h5 class="title">*MemSQL*</h5></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>MemSQL will be released with PR: <a class="link" href="https://github.com/draios/agent/pull/819" target="_blank">https://github.com/draios/agent/pull/819</a> </p></blockquote></div><h6 id="UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-Overview" class="bridgehead">Overview</h6><p>MemSQL is a distributed, highly-scalable SQL database that can run anywhere. If MemSQL is installed on your environment, you may need to edit Sysdig agent's configuration file to connect it with Sysdig. See <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-DefaultConfiguration" title="Default Configuration">Default Configuration</a>.</p><p>This page describes the default configuration settings, how to edit the configuration to collect additional information, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-Overview" title="Overview">Overview </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-ApplicationSetup" title="Application Setup">Application Setup</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-DefaultConfiguration" title="Default Configuration">Default Configuration </a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-ConfigurationExample" title="Configuration Example">Configuration Example</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-MetricsAvailable" title="Metrics Available">Metrics Available </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-ResultintheMonitorUI" title="Result in the Monitor UI">Result in the Monitor UI </a> </p></li></ul></div></li></ul></div><h6 id="UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-ApplicationSetup" class="bridgehead">Application Setup</h6><p>MemSQL will automatically expose all metrics. You do not need to add anything on MemSQL instance.</p><h6 id="UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><h6 id="UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>No default configuration is present in Sysdig's <code class="code">dragent.default.yaml</code> for MemSQL. You must add a custom entry in <code class="code">dragent.yaml</code> as follows.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-ConfigurationExample" class="bridgehead">Configuration Example</h6><p>Update authentication parameters and insert the configuration in <code class="code">dragent.yaml</code> file, as in this example:</p><pre class="programlisting">app_checks:
  - name : memsql
    check_module : memsql
    pattern:
      comm: memsqld
      arg: master
    conf:
      server : 127.0.0.1
      port : 3306
      user : &lt;username&gt;
      pass : &lt;password&gt; #(optional) if set</pre><h6 id="UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-MetricsAvailable" class="bridgehead">Metrics Available</h6><p>See <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Monitor/pages/312607491" target="_blank">**MemSQL Metrics**</a>.</p><h6 id="UUID-eb0066c5-b054-1423-60a7-ebff62b0462e_id_id-MemSQL-ResultintheMonitorUI" class="bridgehead">Result in the Monitor UI</h6><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-d467d53b-5df8-72a8-c9a4-d3fb4af6072b-en.png" style="max-width: 550px; " alt="301662240.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr style="height: 305px"><td><img src="image/uuid-80495d30-4648-a5f3-2bef-e704fe3a935f-en.png" style="max-width: 550px; max-height: 305px; " alt="301596689.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-a2374197-6616-7f6c-831b-5f0c0cb896f6-en.png" style="max-width: 550px; " alt="301596694.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-bc60a560-4386-d20b-bc66-489086c5936b-en.png" style="max-width: 550px; " alt="301727761.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-de64a05f-cd61-4c36-8f47-fedc0e03ba89-en.png" style="max-width: 550px; " alt="301793308.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-400470c7-88df-f2a6-de2a-1e76d715064e" data-publication-date="" id="UUID-79120775-9b8f-863a-1380-2662709873cc"><div class="titlepage"><div><div class="title"><h5 class="title">*OracleDB*</h5></div></div></div><p>&lt;This will effective after merging of PR <a class="link" href="https://github.com/draios/agent/pull/806" target="_blank">806</a> and <a class="link" href="https://github.com/draios/agent/pull/1022" target="_blank">1022</a> &gt;</p><p>&lt;Amy comment: I can't find PR 806 and 1022; where are they and what's the status?</p><p>Sudhakar - Both these PRs are under review and will be visible once approved by Anoop/Naveen. Currently, Andy Dalton has proposed a solution and we are in process of validating the same.&gt;</p><p> <a class="link" href="https://www.oracle.com/in/database/" target="_blank">Oracle Database</a> 12c is a next-generation database providing a new multi-tenant architecture on top of a fast, scalable, reliable, and secure database platform. If OracleDB is installed on your environment, you need to install and integrate Oracle instant client with Sydig.</p><p>This page describes the installation steps for Oracle Instant Client, configuration settings, the metrics available for integration, and a sample result in the Sysdig Monitor UI.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-OracleSetup" title="Oracle Setup">Oracle Setup</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-OracleInstantClientInstallation" title="Oracle Instant Client Installation">Oracle Instant Client Installation </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-DownloadtheClient" title="Download the Client">Download the Client</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-CreateaUserinOracleDBforSysdigAgent" title="Create a User in Oracle DB for Sysdig Agent">Create a User in Oracle DB for Sysdig Agent</a> </p></li></ul></div></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-SysdigAgentConfiguration" title="Sysdig Agent Configuration">Sysdig Agent Configuration</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-SetUpSysdigAgentWithOracleLibraries" title="Set Up Sysdig Agent With Oracle Libraries">Set Up Sysdig Agent With Oracle Libraries</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>  Install Sysdig agent with Oracle Instant Client Libraries (For Docker users only) </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-DefaultConfiguration" title="Default Configuration">Default Configuration</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-Example1" title="Example 1">Example 1</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="26547-6863-integrate-applications--default-app-checks-.html#UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-MetricsAvailable" title="Metrics Available">Metrics Available</a> </p></li></ul></div><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-OracleSetup" class="bridgehead">Oracle Setup</h6><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-OracleInstantClientInstallation" class="bridgehead">Oracle Instant Client Installation</h6><p>The Oracle app check requires Oracle Instant Client libraries. When Oracle DB is installed as a container, it is necessary to install these dependencies on the host separately to make them available to the Sysdig agent.</p><p>When Oracle DB is installed as a process, these dependencies will be installed with Oracle. In that case, you can provide the path of the installation directory to the Sysdig agent by editing <code class="code">dragent.yaml</code>.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Because Oracle Instant Client is a licensed product, Sysdig is unable to include the libraries with the Sysdig agent.</p></div><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-DownloadtheClient" class="bridgehead">Download the Client</h6><p> <a class="link" href="http://www.oracle.com/technetwork/database/database-technologies/instant-client/overview/index.html" target="_blank">Download Oracle Instant Client</a> from the official Oracle website. You must download and install the packages below. An Oracle login is required.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm</p></li><li class="listitem"><p>oracle-instantclient12.2-devel-12.2.0.1.0-1.x86_64.rpm</p></li><li class="listitem"><p>oracle-instantclient12.2-sqlplus-12.2.0.1.0-1.x86_64.rpm</p></li></ul></div><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-CreateaUserinOracleDBforSysdigAgent" class="bridgehead">Create a User in Oracle DB for Sysdig Agent</h6><p>Once Oracle DB is ready, run the following commands to create a user:</p><pre class="programlisting">alter session set "_ORACLE_SCRIPT"=true; 
CREATE USER &lt;username&gt; IDENTIFIED BY &lt;password&gt;; 
GRANT CONNECT TO &lt;username&gt;; 
GRANT SELECT ON gv_$sysmetric TO &lt;username&gt;; 
GRANT SELECT ON sys.dba_data_files TO &lt;username&gt;;</pre><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-SysdigAgentConfiguration" class="bridgehead">Sysdig Agent Configuration</h6><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-SetUpSysdigAgentWithOracleLibraries" class="bridgehead">Set Up Sysdig Agent With Oracle Libraries</h6><p>After installing Oracle instant Client, you need to link it with Sysdig agent.</p><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-InstallSysdigagentwithOracleInstantClientLibrariesForDockerusersonly" class="bridgehead">Install Sysdig agent with Oracle Instant Client Libraries (For Docker users only)</h6><p>If you are installing Sysdig agent as a docker container, a volume must to be mounted in the container with the directory where the Oracle Instant Client is present.</p><div class="blockquote"><blockquote class="blockquote"><p>Verify that file <code class="code">"libclntsh.so" </code>is present at the given path. It may differ based on environment.</p></blockquote></div><p>Examples:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>When Oracle Instant Client is installed separately, it will be installed at: <code class="code">"/usr/lib/oracle/12.2/client64/lib</code>".</p><p>Volume Mounted: <code class="code">-v /usr/lib/oracle/12.2/client64:/usr/lib/oracle/12.2/client64</code> </p><pre class="programlisting">
docker run -d --name sysdig-agent --restart always --privileged --net host --pid host -e ACCESS_KEY=XXXXX-XXXXX-XXXX-XXXX-XXXXXXXXXX -e TAGS=some_tag:some_value -v /var/run/docker.sock:/host/var/run/docker.sock -v /dev:/host/dev -v /proc:/host/proc:ro -v /boot:/host/boot:ro -v /lib/modules:/host/lib/modules:ro -v /usr:/host/usr:ro -v /usr/lib/oracle/12.2/client64:/usr/lib/oracle/12.2/client64 --shm-size=350m sysdig/agent</pre></li><li class="step"><p>When Oracle is installed as a process on the host, it is present at: <code class="code">"/u01/app/oracle/product/12.1.0.2/db_1/lib"</code>.</p><p>Volume Monted: <code class="code">-v /u01/app/oracle/product/12.1.0.2/db_1/:/u01/app/oracle/product/12.1.0.2/db_1/ </code> </p><pre class="programlisting">
docker run -d --name sysdig-agent --restart always --privileged --net host --pid host -e ACCESS_KEY=XXXXX-XXXXX-XXXX-XXXX-XXXXXXXXXX -e TAGS=some_tag:some_value -v /var/run/docker.sock:/host/var/run/docker.sock -v /dev:/host/dev -v /proc:/host/proc:ro -v /boot:/host/boot:ro -v /lib/modules:/host/lib/modules:ro -v /usr:/host/usr:ro -v /u01/app/oracle/product/12.1.0.2/db_1/:/u01/app/oracle/product/12.1.0.2/db_1/ --shm-size=350m sysdig/agent</pre></li></ol></div><p> <span class="bold bold"><strong>Configure Oracle Libraries for Sysdig Agent</strong></span> </p><p>Link Oracle Instant Client libraries with <code class="code">ldconfig </code>so that they will be available to the Sysdig Agent at runtime. If the Sysdig agent is installed inside the Docker container, run <code class="code">ldconfig</code> commands inside the container.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Provide the library location in the ld configuration file. (Verify that file "<code class="code">libclntsh.so</code>" is present at given path.)</p></li><li class="step"><p>Run ldconfig .</p></li></ol></div><p>Example:</p><pre class="programlisting">
echo /u01/app/oracle/product/12.1.0.2/db_1/lib/ &gt; /etc/ld.so.conf.d/oracle.conf
ldconfig</pre><div class="blockquote"><blockquote class="blockquote"><p>Make sure <code class="code">libaio</code> or <code class="code">libaio1</code> packege is installed in your environment</p></blockquote></div><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-DefaultConfiguration" class="bridgehead">Default Configuration</h6><p>Review how to <a class="link" href="">Edit dragent.yaml to Integrate or Modify Application Checks</a>.</p><p>There is no default configuration for OracleDB, as a unique user and password are required for metrics polling. You must add the entry for OracleDB into <code class="code">dragent.yaml.</code> </p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p> <span class="bold bold"><strong>Remember!</strong></span> Never edit <code class="code">dragent.default.yaml</code> directly; always edit only <code class="code">dragent.yaml</code>.</p></div><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-Example1" class="bridgehead">Example 1</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Confirm the <code class="code">"comm"</code> value using the command: <code class="code">cat /proc/&lt;pid&gt;/comm</code> </p></li><li class="listitem"><p>Replace <code class="code">&lt;username&gt;</code> and <code class="code">&lt;password&gt;</code> with username and password created for sysdig agent.</p></li><li class="listitem"><p>Update <code class="code">service_name </code>if different service name is used. services can be listed with command: <code class="code">lsnrctl status</code> </p></li><li class="listitem"><p>Update <code class="code">ORACLE_HOME </code>with the value of the <code class="code">ORACLE_HOME</code> environment variable (from <code class="code">oracle</code> user) or with the installation directory of Oracle DB</p></li></ul></div><pre class="programlisting">app_checks:
  - name: oracle
    check_module: oracle
    pattern:
      comm: "tnslsnr"
    conf:
      server: localhost
      user: &lt;username&gt;
      password: &lt;password&gt;
      service_name: cdb1
      envs:
        ORACLE_HOME: /u01/app/oracle/product/12.1.0.2/db_1
    log_errors: true</pre><h6 id="UUID-79120775-9b8f-863a-1380-2662709873cc_id_id-OracleDB-MetricsAvailable" class="bridgehead">Metrics Available</h6><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Metric Name</p></th><th class="th"><p>Metric Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong>oracle.buffer_cachehit_ratio</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Ratio of buffer cache hits</p><p> <span class="italic italic">shown as fraction</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.cursor_cachehit_ratio</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Ratio of cursor cache hits</p><p> <span class="italic italic">shown as fraction</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.library_cachehit_ratio</strong></span> </p><p>(gauge)</p></td><td class="td"><p>Ratio of library cache hits</p><p> <span class="italic italic">shown as fraction</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.shared_pool_free</strong></span> </p><p>(gauge)</p></td><td class="td"><p>shared pool free memory %</p><p> <span class="italic italic">shown as percent</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.physical_reads</strong></span> </p><p>(gauge)</p></td><td class="td"><p>physical reads per sec</p><p> <span class="italic italic">shown as read</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.physical_writes</strong></span> </p><p>(gauge)</p></td><td class="td"><p>physical writes per sec</p><p> <span class="italic italic">shown as write</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.enqueue_timeouts</strong></span> </p><p>(gauge)</p></td><td class="td"><p>enqueue timeouts per sec</p><p> <span class="italic italic">shown as timeout</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.gc_cr_block_received</strong></span> </p><p>(gauge)</p></td><td class="td"><p>GC CR block received</p><p> <span class="italic italic">shown as block</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.cache_blocks_corrupt</strong></span> </p><p>(gauge)</p></td><td class="td"><p>corrupt cache blocks</p><p> <span class="italic italic">shown as block</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.cache_blocks_lost</strong></span> </p><p>(gauge)</p></td><td class="td"><p>lost cache blocks</p><p> <span class="italic italic">shown as block</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.logons</strong></span> </p><p>(gauge)</p></td><td class="td"><p>number of logon attempts</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.active_sessions</strong></span> </p><p>(gauge)</p></td><td class="td"><p>number of active sessions</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.long_table_scans</strong></span> </p><p>(gauge)</p></td><td class="td"><p>number of long table scans per sec</p><p> <span class="italic italic">shown as scan</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.service_response_time</strong></span> </p><p>(gauge)</p></td><td class="td"><p>service response time</p><p> <span class="italic italic">shown as second</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.user_rollbacks</strong></span> </p><p>(gauge)</p></td><td class="td"><p>number of user rollbacks</p><p> <span class="italic italic">shown as operation</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.sorts_per_user_call</strong></span> </p><p>(gauge)</p></td><td class="td"><p>sorts per user call</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.rows_per_sort</strong></span> </p><p>(gauge)</p></td><td class="td"><p>rows per sort</p><p> <span class="italic italic">shown as row</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.disk_sorts</strong></span> </p><p>(gauge)</p></td><td class="td"><p>disk sorts per second</p><p> <span class="italic italic">shown as operation</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.memory_sorts_ratio</strong></span> </p><p>(gauge)</p></td><td class="td"><p>memory sorts ratio</p><p> <span class="italic italic">shown as fraction</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.database_wait_time_ratio</strong></span> </p><p>(gauge)</p></td><td class="td"><p>memory sorts per second</p><p> <span class="italic italic">shown as fraction</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.session_limit_usage</strong></span> </p><p>(gauge)</p></td><td class="td"><p>session limit usage</p><p> <span class="italic italic">shown as percent</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.session_count</strong></span> </p><p>(gauge)</p></td><td class="td"><p>session count</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.temp_space_used</strong></span> </p><p>(gauge)</p></td><td class="td"><p>temp space used</p><p> <span class="italic italic">shown as byte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.tablespace.used</strong></span> </p><p>(gauge)</p></td><td class="td"><p>tablespace used</p><p> <span class="italic italic">shown as byte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.tablespace.size</strong></span> </p><p>(gauge)</p></td><td class="td"><p>tablespace size</p><p> <span class="italic italic">shown as byte</span> </p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong>oracle.tablespace.in_use</strong></span> </p><p>(gauge)</p></td><td class="td"><p>tablespace in-use</p><p> <span class="italic italic">shown as fraction</span> </p></td></tr></tbody></table></div><p>Result in the Monitor UI</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-85934d1c-2562-ccb1-1615-31732dd7b71a-en.png" style="max-width: 550px; " alt="302088230.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-34daf9aa-6f94-42cb-3c93-29cc1dcaf317-en.png" style="max-width: 550px; " alt="302350378.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-ff3eae88-1714-5319-3ede-a34d534b228f-en.png" style="max-width: 550px; " alt="302153808.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-6a515090-5d8a-7aac-817c-bd1083007f2d-en.png" style="max-width: 550px; " alt="302284828.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr><td><img src="image/uuid-1cf01511-2187-e6f6-a674-4827e98ab8dd-en.png" style="max-width: 550px; " alt="302153813.png"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-717748fa-ff83-3231-e627-5403b43ced60" data-publication-date="" id="UUID-7d9e6280-5814-7ea5-37d3-fdad504677b4"><div class="titlepage"><div><div class="title"><h5 class="title">**TokuMX**</h5></div></div></div><p>Support background: <a class="link" href="">https://sysdig.atlassian.net/wiki/spaces/EN/pages/118119/App+checks#Appchecks-TokuMX</a> </p></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-dca0930e-142c-ecba-011a-ead60d8238e2">Integrate Applications (Default App Checks)</a></li><li><a href="#UUID-2679422e-591e-4da2-313e-978c0646cf26">Apache</a></li><li><a href="#UUID-42479547-5849-0f10-b06b-9377a4614564">Apache Kafka</a></li><li><a href="#UUID-ee0b1eb5-4354-4541-bd19-ea763230deab">Consul</a></li><li><a href="#UUID-15d3b5d9-20e3-5946-41b5-e02c088f6c0d">Couchbase</a></li><li><a href="#UUID-436ed2f1-e3aa-b5ca-8e0b-3d6176e505f5">Elasticsearch</a></li><li><a href="#UUID-d622c112-9cdf-62e3-06bb-e555f2fb3436">etcd</a></li><li><a href="#UUID-4719d096-2bdb-93fa-e950-1b6d3d6360b0">fluentd</a></li><li><a href="#UUID-ecd9263a-2552-744b-d83f-b34d42b5266e">Go</a></li><li><a href="#UUID-cad85edc-d969-9f74-d91f-cb3206f89cb8">HAProxy</a></li><li><a href="#UUID-1d94565f-34ca-a12c-a550-e63bcb4bfcb6">HTTP</a></li><li><a href="#UUID-4619941f-bedb-ea16-a22c-62e2dfec751f">Jenkins</a></li><li><a href="#UUID-672afc3a-c073-4ec9-a6b3-338cebb1d1f7">Lighttpd</a></li><li><a href="#UUID-ae25605f-7c42-b155-c23f-78e8065eb4fb">Memcached</a></li><li><a href="#UUID-eebd5a8c-f5e4-64a1-aac8-e81b4fb4cb8e">Mesos/Marathon</a></li><li><a href="#UUID-e324330a-a280-78f6-4edb-0b0d2b0c79b3">MongoDB</a></li><li><a href="#UUID-72da56ef-bd63-6824-dfc0-f343b89564a0">MySQL</a></li><li><a href="#UUID-a5e7c5b6-f509-5bcc-6b20-0dfa9ddf6b13">NGINX and NGINX Plus</a></li><li><a href="#UUID-cfc0a734-a976-5f2d-fcea-f59f5f69c17e">NTP</a></li><li><a href="#UUID-6e058dfb-7477-b5ea-b25c-224a4800fa64">PGBouncer</a></li><li><a href="#UUID-f344ecfa-0d18-0b81-74f7-f4f8f09e24fe">PHP-FPM</a></li><li><a href="#UUID-8eadb976-76eb-a0e4-2054-fa60f22ae790">PostgreSQL</a></li><li><a href="#UUID-23433921-af1d-af87-4f52-60da0ef2c01d">RabbitMQ</a></li><li><a href="#UUID-a1a322ca-2ed5-6f58-0013-34abe3f4b3a4">RedisDB</a></li><li><a href="#UUID-3f95785a-dfe2-8963-f37f-ff1adac03558">Riak CS</a></li><li><a href="#UUID-05403fdc-aac7-18e6-b02a-34b489507a3d">SNMP</a></li><li><a href="#UUID-cc72289d-b89e-9acf-f9c6-aacdb7dc71a6">Supervisord</a></li><li><a href="#UUID-82011f06-dfe4-0d45-49aa-f7a776bc2627">TCP</a></li><li><a href="#UUID-9a477829-6f62-1e71-0adc-41ec6e5f597a">Varnish</a></li><li><a href="#UUID-78eb801d-df9a-cb09-0165-4e2b02689f1d">**Copy of Mesos/Marathon**</a></li><li><a href="#UUID-87df2de7-bd2c-41a0-7d89-350785835a8c">**Copy of Riak CS**</a></li><li><a href="#UUID-eb0066c5-b054-1423-60a7-ebff62b0462e">*MemSQL*</a></li><li><a href="#UUID-79120775-9b8f-863a-1380-2662709873cc">*OracleDB*</a></li><li><a href="#UUID-7d9e6280-5814-7ea5-37d3-fdad504677b4">**TokuMX**</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="26547-6862-monitor-log-files.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="26547-6897-create-a-custom-app-check.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
