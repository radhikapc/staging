<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Agent Install: Mesos | Marathon | DCOS</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d6593bb1e613.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="43367-agent-install--non-orchestrated--docker-agent---service-agent--.html#UUID-b67ca35c-819f-b360-fb62-aaa131388a8b_UUID-d215aca6-1455-4103-d409-688d0b17eff8" title="Note on Manual Agent Installation"></link><link rel="next" href="43377-agent-install--mesos---marathon---dcos.html#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-8f623ce1-c759-fcca-b491-7b0b126ea71b" title="Standard Installation Instructions"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {
				/**
				 * @type {array}
				 */
				var supported = hljs.listLanguages();

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}

					if (language && $.inArray(language, supported) > -1) {
						var c = hljs.highlight(language, $(this).text());
						$(this)
							.empty()
							.append(c.value)
							.addClass("hljs")
							.addClass(c.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="43019-sysdig-platform.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2aec11a7-27eb-167a-dfc2-d868c58604cd" data-permalink="43019-sysdig-platform.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Platform</a><ul><li><a href="43026-on-premises-deployments.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3967fd02-70a8-134b-394b-cace7214ff6d" data-permalink="43026-on-premises-deployments.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> On-Premises Deployments</a><ul><li><a href="43027-architecture---system-requirements.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-dec254a6-b961-0e73-3f01-20f689cf90e3" data-permalink="43027-architecture---system-requirements.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Architecture &amp; System Requirements</a></li><li><a href="43049-on-premises-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-db1188d3-a7ec-15df-c6cf-67e07a21b18b" data-permalink="43049-on-premises-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Installation</a></li><li><a href="43140-on-premises-upgrades.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5d758c36-dfff-2452-850d-9ed2a4371f81" data-permalink="43140-on-premises-upgrades.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Upgrades</a></li><li><a href="43209-find-the-super-admin-credentials-and-api-token.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8dab9961-ec84-3db6-d190-6869ea677fc0" data-permalink="43209-find-the-super-admin-credentials-and-api-token.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find the Super Admin Credentials and API Token</a></li><li><a href="43212-upgrade-an-on-premises-license.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-7887f7e8-616a-7c82-1e15-4faca9d5c58f" data-permalink="43212-upgrade-an-on-premises-license.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Upgrade an On-Premises License</a></li><li><a href="43217-securing-elasticsearch.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-98444088-953d-f9e0-cccd-ae3d2cabdc82" data-permalink="43217-securing-elasticsearch.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Elasticsearch</a></li><li><a href="43222-securing-cassandra.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d6bd8eba-9fca-4113-e123-10a2f1a3a374" data-permalink="43222-securing-cassandra.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Cassandra</a></li><li><a href="43230-authentication-and-authorization--on-prem-options-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-648140d5-4cd3-49eb-c672-21e00ae3296c" data-permalink="43230-authentication-and-authorization--on-prem-options-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (On-Prem Options)</a></li></ul></li><li><a href="43297-sysdig-agent.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2b34ba9d-6b45-4d57-a133-ae54d956ee58" data-permalink="43297-sysdig-agent.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Agent</a><ul><li><a href="43298-host-requirements-for-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cc64bfae-70f3-b2d6-42d6-cf84ccf5abaf" data-permalink="43298-host-requirements-for-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Host Requirements for Agent Installation</a></li><li><a href="43317-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ef0cd1a8-cec3-1ed9-65b7-d2b61ce9d78f" data-permalink="43317-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation</a></li><li><a href="43391-agent-configuration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-07369059-d819-881f-183c-902f87b1b917" data-permalink="43391-agent-configuration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Configuration</a></li><li><a href="43450-agent-upgrade.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-551eb1f0-de5e-9917-527e-ed2d7183b2b5" data-permalink="43450-agent-upgrade.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Upgrade</a></li><li><a href="43457---agent-stop---start---disable---remove.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3031a485-9dec-0547-24e6-5f1e9967311f" data-permalink="43457---agent-stop---start---disable---remove.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Agent Stop | Start | Disable | Remove</a></li><li><a href="43467-agent-uninstall.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3ccccaf4-45c2-3331-6fad-0829e683559c" data-permalink="43467-agent-uninstall.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Uninstall</a></li><li><a href="43470-troubleshooting-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-442c725a-6fb0-c992-9d42-1e253ac3d09d" data-permalink="43470-troubleshooting-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Troubleshooting Agent Installation</a></li></ul></li><li><a href="43478-administration-settings.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-1fced76a-c05c-a3dd-6965-ac6271a0c4b0" data-permalink="43478-administration-settings.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Administration Settings</a><ul><li><a href="43481-user-profile-and-password.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-68bae3d5-4e67-564d-a56f-36849de2841e" data-permalink="43481-user-profile-and-password.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User Profile and Password</a></li><li><a href="43489-user-and-team-administration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-00849bf9-2afa-6f2d-7293-ccb78c36cded" data-permalink="43489-user-and-team-administration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User and Team Administration</a></li><li><a href="43512-notifications-management.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-53d9d5a5-68f8-e49a-3dd2-ec0444ad3597" data-permalink="43512-notifications-management.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Notifications Management</a></li><li><a href="43548-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5c2df7a4-a53f-28fd-1303-29a41a587a6f" data-permalink="43548-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">AWS: Integrate AWS Account and CloudWatch Metrics (Optional)</a></li><li><a href="43563-storage--configure-aws-capture-file-storage--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-bdc495d5-e851-5fb6-ed62-07eb12e45024" data-permalink="43563-storage--configure-aws-capture-file-storage--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Storage: Configure AWS Capture File Storage (Optional)</a></li><li><a href="43568-find-your-customer-number.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-7e5c73de-e0be-9643-6660-81ee98d1dee6" data-permalink="43568-find-your-customer-number.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find Your Customer Number</a></li><li><a href="43569-agent-installation--overview-and-key.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8abc0bd0-5c58-5ddf-3912-b84f3e85b884" data-permalink="43569-agent-installation--overview-and-key.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation: Overview and Key</a></li><li><a href="43571-subscription--change-number-of-licensed-agents.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-aa6b5487-52a8-155d-a66f-bb4123d2a4fe" data-permalink="43571-subscription--change-number-of-licensed-agents.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Subscription: Change Number of Licensed Agents</a></li><li><a href="43579-authentication-and-authorization--saas-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-a01b3e9a-2bed-30ad-b321-61f47790c80e" data-permalink="43579-authentication-and-authorization--saas-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (SaaS)</a></li></ul></li><li><a href="43623-get-help---using-sysdig-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cfa5bd5d-97db-98f6-7a2f-e76376c865d7" data-permalink="43623-get-help---using-sysdig-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Get Help | Using Sysdig Support</a><ul><li><a href="43624-self-help.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2a9e92b7-a64a-9fe3-9ee7-cc7e463c590a" data-permalink="43624-self-help.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Self-Help</a></li><li><a href="43638-contact-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-716a9a89-2ea4-0e43-8643-902620732467" data-permalink="43638-contact-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Contact Support</a></li><li><a href="43658-terms-of-use.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8f7aed46-3390-e0a1-5227-8b693b2c9acb" data-permalink="43658-terms-of-use.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Terms of Use</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">Sysdig Platform</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="43367-agent-install--non-orchestrated--docker-agent---service-agent--.html#UUID-b67ca35c-819f-b360-fb62-aaa131388a8b_UUID-d215aca6-1455-4103-d409-688d0b17eff8">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="43377-agent-install--mesos---marathon---dcos.html#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-8f623ce1-c759-fcca-b491-7b0b126ea71b">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">Sysdig Platform</span></li><li class="breadcrumb-link"><a href="43019-sysdig-platform.html">Sysdig Platform</a></li><li class="breadcrumb-link"><a href="43297-sysdig-agent.html">Sysdig Agent</a></li><li class="breadcrumb-link"><a href="43317-agent-installation.html">Agent Installation</a></li><li class="breadcrumb-node">Agent Install: Mesos | Marathon | DCOS</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-1ba262cd-2b3f-eac2-e18b-8b7dc32be6aa" data-permalink="43377-agent-install--mesos---marathon---dcos.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Agent Install: Mesos | Marathon | DCOS</h1></div></div></div><p>Marathon is the container orchestration platform for Mesosphere’s Datacenter Operating System (DC/OS) and Apache Mesos.</p><p>This guide describes how to install the Sysdig agent container on each underlying host in your Mesos cluster. Once installed, the agent will automatically connect to the Mesos and Marathon APIs to pull relevant metadata about the environment, and will begin monitoring all of your hosts, apps, containers, and frameworks.</p><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-8f623ce1-c759-fcca-b491-7b0b126ea71b"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Standard Installation Instructions</h2></div></div></div><p>Review the <a class="link" href="43298-host-requirements-for-agent-installation.html" title="Host Requirements for Agent Installation">Host Requirements for Agent Installation</a>.</p><p>In this three-part installation, you:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Deploy the Sysdig agent on all Mesos Agent (aka "Slave") nodes, either automatically or by creating and posting a .<code class="code">json</code> file to the leader Marathon API server.</p></li><li class="listitem"><p>Deploy the Sysdig agent on the Mesos Master nodes.</p></li><li class="listitem"><p>Special configuration steps: modify the Sysdig agent config file to monitor Marathon instances.</p></li></ul></div><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-5803079f-6358-bbc7-e393-f77aa86d7644"><div class="titlepage"><div><div class="title"><h3 class="title">Deploy the Sysdig agent on your Mesos Agent nodes</h3></div></div></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_id_AgentInstallMesosMarathonDCOS-PreferredOptionAutomaticinstallDCOS111"><div class="titlepage"><div><div class="title"><h4 class="title">Preferred Option: Automatic install (DC/OS 1.11+)</h4></div></div></div><p>If you're using DC/OS 1.8 or higher, then you can find Sysdig in the Mesosphere Universe marketplace and install it from there.</p><p>It will automatically deploy the Sysdig agent container on each of your Mesos Agent nodes as a Marathon app.</p><p>Proceed to Deploy the Sysdig Agent.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_id_AgentInstallMesosMarathonDCOS-AlternateOptionPostajsonfile"><div class="titlepage"><div><div class="title"><h4 class="title">Alternate Option: Post a .json file</h4></div></div></div><p>If you are using a version of DC/OS earlier than 1.8 then:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Create a .json file for Marathon, in the following format.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p> <code class="code">COLLECTOR, COLLECTOR_PORT, SECURE,</code> and <code class="code">CHECK_CERT</code> are used in environments with Sysdig's on-premises backend installed. See information on <a class="link" href="">finding the collector address</a>.</p><p>They are not needed to install the agent for Sysdig SaaS accounts.</p></div><pre class="programlisting">$cat &lt;&lt;- EOF &gt; "sysdig.json"
{
  "id": "sysdig-agent",
  "cpus": 1.0,
  "constraints": [["hostname", "UNIQUE"]],
  "mem": 850.0,
  "instances": YOUR-NUMBER-OF-INSTANCES-HERE,
  "labels" : {"role" : "monitoring", "name" : "sdc-agent" },
  "container": {
    "type": "DOCKER",
    "docker": {
      "image": "sysdig/agent",
      "forcePullImage": true,
      "network": "HOST",
      "privileged": true,
      "parameters": [
        { "key": "pid", "value": "host" },
        { "key": "env", "value": "ACCESS_KEY=YOUR-ACCESS-KEY-HERE" },
        { "key": "env", "value": "COLLECTOR=COLLECTOR-ADDRESS-HERE" },
        { "key": "env", "value": "COLLECTOR_PORT=COLLECTOR-PORT-HERE" },
        { "key": "env", "value": "CHECK_CERT=false" },
        { "key": "shm-size", "value": "350m" }
      ]
    },
    "volumes": [
        { 
          "containerPath": "/host/var/run/docker.sock",
          "hostPath": "/var/run/docker.sock", 
          "mode": "RW" 
        },
        {
          "containerPath": "/host/dev",
          "hostPath": "/dev",
          "mode": "RW"
        },
        {
          "containerPath": "/host/proc",
          "hostPath": "/proc",
          "mode": "RO"
        },
        {
          "containerPath": "/host/boot",
          "hostPath": "/boot",
          "mode": "RO"
        },
        {
          "containerPath": "/host/lib/modules",
          "hostPath": "/lib/modules",
          "mode": "RO"
        },
        {
          "containerPath": "/host/usr",
          "hostPath": "/usr",
          "mode": "RO"
        }
      ]
  }
}
EOF</pre><p>See <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/207224862/Table+1+Environment+Variables+for+Agent+Config+File" target="_blank">Table 1: Environment Variables</a> for the Sysdig <code class="code">name:value</code> definitions.</p><p>Complete the “<code class="code">cpus</code>”, “<code class="code">mem</code>” and “<code class="code">labels</code>” (i.e. Marathon labels) entries to fit the capacity and requirements of the cluster environment.</p></li><li class="step"><p>POST the created .<code class="code">json</code> file to the leader Marathon API server.</p><p> <code class="code">$curl -X POST http://$(hostname -i):8080/v2/apps -d @sysdig.json -H "Content-type: application/json"</code> </p></li></ol></div></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-51d81f52-1027-7b1c-77d6-b0963216a297"><div class="titlepage"><div><div class="title"><h3 class="title">Deploy the Sysdig Agent</h3></div></div></div><p>After deploying the agent to the Mesos Agent nodes, you will install agents on each of the Mesos Master nodes as well.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>If any cluster node has both Mesos Master and Mesos Agent roles, do not perform this installation step on that node. It already will have a Sysdig agent installed from the procedure in step A. Running duplicate Sysdig agents on a node will cause errors.</p></div><p>Use the <a class="link" href="43367-agent-install--non-orchestrated--docker-agent---service-agent--.html" title="Agent Install: Non-Orchestrated (Docker Agent | Service Agent )">Agent Install: Non-Orchestrated (Docker Agent | Service Agent )</a> instructions to install the agent directly on each of your Mesos Master nodes.</p><p>Use the Docker container instructions, or the non-containerized, service agent instructions, depending on your environment.</p><p>When the Sysdig agent is successfully installed on the master nodes, it will automatically connect to the local Mesos and Marathon (if available) API servers via <code class="code"> <a class="link" href="http://localhost:5050" target="_blank">http://localhost:5050</a> </code> and <code class="code"> <a class="link" href="http://localhost:8080" target="_blank">http://localhost:8080</a> </code> respectively, to collect cluster configuration and current state metadata in addition to host metrics.</p></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-3cfece96-0a4d-dda4-a033-3d1309d651a2"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Special Configuration Steps</h2></div></div></div><p>In certains situations, you may need to add additional configurations to the <code class="code">dragent.yaml</code> file:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If the Sysdig agent cannot be run directly on the Mesos API server</p></li><li class="listitem"><p>If the API server is protected with a username/password.</p></li></ul></div><p>Descriptions and examples are shown below.</p><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-66d5d46f-847c-df63-464a-07f2a92b4245"><div class="titlepage"><div><div class="title"><h3 class="title">If the Sysdig Agent Cannot Run On the Mesos API Server</h3></div></div></div><p>Mesos allows multiple masters. If the API server can not be instrumented with a Sysdig agent, simply delegate ONE other node with an agent installed to remotely receive infrastructure information from the API server.</p><p>NOTE: If you manually configure the agent to point to a master with a static configuration file entry, then automatic detection/following of leader changes will no longer be enabled.</p><p>Add the following Mesos parameter to the delegated agent's <code class="code">dragent.yaml</code> file to allow it to connect to the remote API server and authenticate, either by:</p><p>a. Directly editing <code class="code">dragent.yaml</code> on the host, or</p><p>b. Converting the YAML code to a single-line format and adding it as an <code class="code">ADDITIONAL_CONF</code> argument in a Docker command.</p><p>See <a class="link" href="43392-understanding-the-agent-config-files.html" title="Understanding the Agent Config Files">Understanding the Agent Config Files</a> for details.</p><p>Specify the API server's connection method, address, and port. Also specify credentials if necessary.</p><p> <span class="bold bold"><strong>YAML example:</strong></span> </p><pre class="programlisting">
mesos_state_uri: http://[acct:passwd@][hostname][:port]
marathon_uris:
  - http://[acct:passwd@][hostname][:port]</pre><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Although `marathon_uris:` is an array, currently only a single "root" Marathon framework per cluster is supported. Multiple side-by-side Marathon frameworks should not be configured in order for our agent to function properly. Multiple side-by-side "root" Marathon frameworks on the same cluster are currently not supported. The only supported multiple-Marathon configuration is with one "root" Marathon and other Marathon frameworks as its apps.</p></div></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-d1dafbc4-0617-aff6-e459-30144908e527"><div class="titlepage"><div><div class="title"><h3 class="title">If the Mesos API server requires authentication</h3></div></div></div><p>If the agent is installed on the API server but the API server uses a different port or requires authentication, those parameters must be explicitly specified.</p><p>Add the following Mesos parameters to the API server's <code class="code">dragent.yaml</code> to make it connect to the API server and authenticate with any unique account and password, either by:</p><p>a. Directly editing <code class="code">dragent.yaml</code> on the host, or</p><p>b. Converting the YAML code to a single-line format and adding it as an <code class="code">ADDITIONAL_CONF</code> argument in a Docker command.</p><p>See <a class="link" href="43392-understanding-the-agent-config-files.html" title="Understanding the Agent Config Files">Understanding the Agent Config Files</a> for details.</p><p>Specify the API server's protocol, user credentials, and port:</p><pre class="programlisting">
mesos_state_uri: http://[username:password@][hostname][:port]
marathon_uris:
  - http://[acct:passwd@][hostname][:port]</pre><p>*HTTPS protocol is also supported.</p></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-25bd2985-602a-0255-e157-71a9ff330e34"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Troubleshooting: Turning Off Metadata Reception</h2></div></div></div><p>In troubleshooting cases where auto-detection and reporting of your Mesos infrastructure needs to be temporarily turned off in a designated agent:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Comment out the Mesos parameter entries in the agent's dragent.yaml file.</p><p>Example parameters to disable: <code class="code">mesos_state_uri, marathon_uris </code> </p></li><li class="step"><p>If the agent is running on the API server (Master node) and auto-detecting a default configuration, you can add the line:</p><p> <code class="code">mesos_autodetect: false</code> </p><p>either directly in the dragent.yaml file or as an <code class="code">ADDITIONAL_CONF</code> parameter in a Docker command.</p></li><li class="step"><p>Restart the agent.</p></li></ol></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434">Agent Install: Mesos | Marathon | DCOS</a></li><li><a href="#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-8f623ce1-c759-fcca-b491-7b0b126ea71b">Standard Installation Instructions</a><ul class="nav"><li><a href="#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-5803079f-6358-bbc7-e393-f77aa86d7644">Deploy the Sysdig agent on your Mesos Agent nodes</a><ul class="nav"></ul></li><li><a href="#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-51d81f52-1027-7b1c-77d6-b0963216a297">Deploy the Sysdig Agent</a></li></ul></li><li><a href="#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-3cfece96-0a4d-dda4-a033-3d1309d651a2">Special Configuration Steps</a><ul class="nav"><li><a href="#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-66d5d46f-847c-df63-464a-07f2a92b4245">If the Sysdig Agent Cannot Run On the Mesos API Server</a></li><li><a href="#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-d1dafbc4-0617-aff6-e459-30144908e527">If the Mesos API server requires authentication</a></li></ul></li><li><a href="#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-25bd2985-602a-0255-e157-71a9ff330e34">Troubleshooting: Turning Off Metadata Reception</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div><div id="email-feedback" class=" toggle-feedback"><p><a href='mailto:radhika@sysdig.com?subject=Feedback for help topic "Agent Install: Mesos | Marathon | DCOS"&amp;body=%0D%0A_______________________%0D%0A%0D%0A
			
			Please add your feedback above for topic "Agent Install: Mesos | Marathon | DCOS" in the publication "Sysdig Platform".'><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon voting-feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="43367-agent-install--non-orchestrated--docker-agent---service-agent--.html#UUID-b67ca35c-819f-b360-fb62-aaa131388a8b_UUID-d215aca6-1455-4103-d409-688d0b17eff8">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="43377-agent-install--mesos---marathon---dcos.html#UUID-428413b0-b1f2-0d1a-fb27-111c509fb434_UUID-8f623ce1-c759-fcca-b491-7b0b126ea71b">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
