<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Prioritize/Include/Exclude Designated Containers</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d6593bb1e613.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="43414-include-exclude-custom-metrics.html#UUID-0a3f6035-e76d-f204-5449-ab5a29c7bfd0_UUID-a75b6ac2-9512-3e5b-3c5d-106b4f7c7b3e" title="Logging Accepted/Dropped Metrics"></link><link rel="next" href="43417-prioritize-include-exclude-designated-containers.html#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-947b9c36-304a-249f-1203-aeef6b22748e" title="Overview"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {
				/**
				 * @type {array}
				 */
				var supported = hljs.listLanguages();

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}

					if (language && $.inArray(language, supported) > -1) {
						var c = hljs.highlight(language, $(this).text());
						$(this)
							.empty()
							.append(c.value)
							.addClass("hljs")
							.addClass(c.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="43019-sysdig-platform.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2aec11a7-27eb-167a-dfc2-d868c58604cd" data-permalink="43019-sysdig-platform.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Platform</a><ul><li><a href="43026-on-premises-deployments.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3967fd02-70a8-134b-394b-cace7214ff6d" data-permalink="43026-on-premises-deployments.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> On-Premises Deployments</a><ul><li><a href="43027-architecture---system-requirements.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-dec254a6-b961-0e73-3f01-20f689cf90e3" data-permalink="43027-architecture---system-requirements.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Architecture &amp; System Requirements</a></li><li><a href="43049-on-premises-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-db1188d3-a7ec-15df-c6cf-67e07a21b18b" data-permalink="43049-on-premises-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Installation</a></li><li><a href="43140-on-premises-upgrades.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5d758c36-dfff-2452-850d-9ed2a4371f81" data-permalink="43140-on-premises-upgrades.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Upgrades</a></li><li><a href="43209-find-the-super-admin-credentials-and-api-token.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8dab9961-ec84-3db6-d190-6869ea677fc0" data-permalink="43209-find-the-super-admin-credentials-and-api-token.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find the Super Admin Credentials and API Token</a></li><li><a href="43212-upgrade-an-on-premises-license.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-7887f7e8-616a-7c82-1e15-4faca9d5c58f" data-permalink="43212-upgrade-an-on-premises-license.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Upgrade an On-Premises License</a></li><li><a href="43217-securing-elasticsearch.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-98444088-953d-f9e0-cccd-ae3d2cabdc82" data-permalink="43217-securing-elasticsearch.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Elasticsearch</a></li><li><a href="43222-securing-cassandra.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d6bd8eba-9fca-4113-e123-10a2f1a3a374" data-permalink="43222-securing-cassandra.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Cassandra</a></li><li><a href="43230-authentication-and-authorization--on-prem-options-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-648140d5-4cd3-49eb-c672-21e00ae3296c" data-permalink="43230-authentication-and-authorization--on-prem-options-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (On-Prem Options)</a></li></ul></li><li><a href="43297-sysdig-agent.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2b34ba9d-6b45-4d57-a133-ae54d956ee58" data-permalink="43297-sysdig-agent.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Agent</a><ul><li><a href="43298-host-requirements-for-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cc64bfae-70f3-b2d6-42d6-cf84ccf5abaf" data-permalink="43298-host-requirements-for-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Host Requirements for Agent Installation</a></li><li><a href="43317-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ef0cd1a8-cec3-1ed9-65b7-d2b61ce9d78f" data-permalink="43317-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation</a></li><li><a href="43391-agent-configuration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-07369059-d819-881f-183c-902f87b1b917" data-permalink="43391-agent-configuration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Configuration</a></li><li><a href="43450-agent-upgrade.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-551eb1f0-de5e-9917-527e-ed2d7183b2b5" data-permalink="43450-agent-upgrade.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Upgrade</a></li><li><a href="43457---agent-stop---start---disable---remove.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3031a485-9dec-0547-24e6-5f1e9967311f" data-permalink="43457---agent-stop---start---disable---remove.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Agent Stop | Start | Disable | Remove</a></li><li><a href="43467-agent-uninstall.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3ccccaf4-45c2-3331-6fad-0829e683559c" data-permalink="43467-agent-uninstall.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Uninstall</a></li><li><a href="43470-troubleshooting-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-442c725a-6fb0-c992-9d42-1e253ac3d09d" data-permalink="43470-troubleshooting-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Troubleshooting Agent Installation</a></li></ul></li><li><a href="43478-administration-settings.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-1fced76a-c05c-a3dd-6965-ac6271a0c4b0" data-permalink="43478-administration-settings.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Administration Settings</a><ul><li><a href="43481-user-profile-and-password.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-68bae3d5-4e67-564d-a56f-36849de2841e" data-permalink="43481-user-profile-and-password.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User Profile and Password</a></li><li><a href="43489-user-and-team-administration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-00849bf9-2afa-6f2d-7293-ccb78c36cded" data-permalink="43489-user-and-team-administration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User and Team Administration</a></li><li><a href="43512-notifications-management.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-53d9d5a5-68f8-e49a-3dd2-ec0444ad3597" data-permalink="43512-notifications-management.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Notifications Management</a></li><li><a href="43548-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5c2df7a4-a53f-28fd-1303-29a41a587a6f" data-permalink="43548-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">AWS: Integrate AWS Account and CloudWatch Metrics (Optional)</a></li><li><a href="43563-storage--configure-aws-capture-file-storage--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-bdc495d5-e851-5fb6-ed62-07eb12e45024" data-permalink="43563-storage--configure-aws-capture-file-storage--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Storage: Configure AWS Capture File Storage (Optional)</a></li><li><a href="43568-find-your-customer-number.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-7e5c73de-e0be-9643-6660-81ee98d1dee6" data-permalink="43568-find-your-customer-number.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find Your Customer Number</a></li><li><a href="43569-agent-installation--overview-and-key.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8abc0bd0-5c58-5ddf-3912-b84f3e85b884" data-permalink="43569-agent-installation--overview-and-key.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation: Overview and Key</a></li><li><a href="43571-subscription--change-number-of-licensed-agents.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-aa6b5487-52a8-155d-a66f-bb4123d2a4fe" data-permalink="43571-subscription--change-number-of-licensed-agents.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Subscription: Change Number of Licensed Agents</a></li><li><a href="43579-authentication-and-authorization--saas-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-a01b3e9a-2bed-30ad-b321-61f47790c80e" data-permalink="43579-authentication-and-authorization--saas-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (SaaS)</a></li></ul></li><li><a href="43623-get-help---using-sysdig-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cfa5bd5d-97db-98f6-7a2f-e76376c865d7" data-permalink="43623-get-help---using-sysdig-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Get Help | Using Sysdig Support</a><ul><li><a href="43624-self-help.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2a9e92b7-a64a-9fe3-9ee7-cc7e463c590a" data-permalink="43624-self-help.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Self-Help</a></li><li><a href="43638-contact-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-716a9a89-2ea4-0e43-8643-902620732467" data-permalink="43638-contact-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Contact Support</a></li><li><a href="43658-terms-of-use.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8f7aed46-3390-e0a1-5227-8b693b2c9acb" data-permalink="43658-terms-of-use.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Terms of Use</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">Sysdig Platform</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="43414-include-exclude-custom-metrics.html#UUID-0a3f6035-e76d-f204-5449-ab5a29c7bfd0_UUID-a75b6ac2-9512-3e5b-3c5d-106b4f7c7b3e">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="43417-prioritize-include-exclude-designated-containers.html#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-947b9c36-304a-249f-1203-aeef6b22748e">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">Sysdig Platform</span></li><li class="breadcrumb-link"><a href="43019-sysdig-platform.html">Sysdig Platform</a></li><li class="breadcrumb-link"><a href="43297-sysdig-agent.html">Sysdig Agent</a></li><li class="breadcrumb-link"><a href="43391-agent-configuration.html">Agent Configuration</a></li><li class="breadcrumb-link"><a href="43400-edit-the-agent-config-file-to-filter-data.html">Edit the Agent Config File to Filter Data</a></li><li class="breadcrumb-node">Prioritize/Include/Exclude Designated Containers</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-f0f52233-b75a-6f39-b3e3-3f2c65ea8e86" data-permalink="43417-prioritize-include-exclude-designated-containers.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Prioritize/Include/Exclude Designated Containers</h1></div></div></div><p>To get the most out of Sysdig Monitor, you may want to customize the way in which container data is prioritized and reported. Use this page to understand the default behavior and sorting rules, and to implement custom behavior when and where you need it. This can help reduce agent and backend load by not monitoring unnecessary containers, or-- if encountering backend limits for containers-- you can filter to ensure that the important containers are always reported.</p><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-947b9c36-304a-249f-1203-aeef6b22748e"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Overview</h2></div></div></div><p>By default, a Sysdig agent will collect metrics from all containers it detects in an environment. When reporting to the Monitor interface, it uses default sorting behavior to prioritize what container information to display first.</p><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-aa9ad250-7b67-c905-8b26-3bd2949c36ce"><div class="titlepage"><div><div class="title"><h3 class="title">Understand Default Behavior</h3></div></div></div><p>Out of the box, it chooses the containers with the highest</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>CPU</p></li><li class="listitem"><p>Memory</p></li><li class="listitem"><p>File IO</p></li><li class="listitem"><p>Net IO</p></li></ul></div><p>and allocates approximately 1/4 of the total limit to each stat type.</p></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-0d48c898-bcce-3f21-a454-8f6803fe94f0"><div class="titlepage"><div><div class="title"><h3 class="title">Understand Simple Container Filtering</h3></div></div></div><p>As of <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/RN/pages/384762044/Sysdig+Agent+Release+Notes" target="_blank">agent version 0.86</a>, it is possible set a <span class="bold bold"><strong> <code class="code">use_container_filter</code> </strong></span> parameter in the agent <code class="code">config</code> file, tag/label specific containers, and set i<code class="code">nclude/exclude</code> rules to push those containers to the top of the reporting hierarchy.</p><p>This is an effective sorting tool when:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>You can manually mark each container with an <code class="code">include</code> or <code class="code">exclude</code> tag, AND</p></li><li class="listitem"><p>The number of includes is small (say, less than 100)</p></li></ul></div><p>In this case, the containers that explicitly match the <code class="code">include</code> rules will take top priority.</p></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-eb9c9122-525f-a2cd-6e20-2706ef452d63"><div class="titlepage"><div><div class="title"><h3 class="title">Understand Smart Container Reporting</h3></div></div></div><p>In some enterprises, the number of containers is too high to tag with simple filtering rules, and/or the <code class="code">include_all</code> group is too large to ensure that the most-desired containers are consistently reported. As of Sysdig <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/RN/pages/384762044/Sysdig+Agent+Release+Notes" target="_blank">agent version 0.91</a>, you can append another parameter to the agent config file, <code class="code">smart_container_reporting</code>.</p><p>This is an effective sorting tool when:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The number of containers is large and you can't or won't mark each one with include/exclude tags, AND</p></li><li class="listitem"><p>There are certain containers you would like to always prioritize</p></li></ul></div><p>This helps ensure that even when there are thousands of containers in an environment, the most-desired containers are consistently reported.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Container filtering and smart container reporting affect the monitoring of all the processes/metrics within a container, including StatsD, JMX, app-checks, and built-in metrics.</p><p>Prometheus metrics are attached to processes, rather than containers, and are therefore handled differently.</p><p>The container limit is set in dragent.yaml under <code class="code">containers:limit: </code> </p></div></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-b4be6676-258f-9c4d-4ed4-fd2e6e98af5d"><div class="titlepage"><div><div class="title"><h3 class="title">Understand Sysdig Aggregated Container</h3></div></div></div><p>The <code class="code">sydig_aggregated</code> parameter is automatically activated when smart container reporting is enabled, to capture the most-desired metrics from the containers that were excluded by smart filtering and report them under a single entity. It appears like any other container in the Sysdig Monitor UI, with the name "<code class="code">sysdig_aggregated.</code>"</p><p> <code class="code">Sysdig_aggregated</code> can report on a wide array of metrics; see <a class="link" href="43430-sysdig_aggregated-container-metrics.html" title="Sysdig_aggregated Container Metrics">Sysdig_aggregated Container Metrics</a>. However, because this is not a regular container, certain limitations apply:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>container_id and container_image do not exist.</p></li><li class="listitem"><p>The aggregated container cannot be segmented by certain metrics that are excluded, such as process.</p></li><li class="listitem"><p>Some default dashboards associated with the aggregated container may have some empty graphs.</p></li></ul></div></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-bb3b81a0-135f-3dcf-cb2b-31afd6fbc0be"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Use Simple Container Filtering</h2></div></div></div><p>By default, the filtering feature is turned off. It can be enabled by adding the following line to the agent configuration:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <code class="code">use_container_filter: true</code> </p></li></ul></div><p>When enabled, the agent will follow include/exclude filtering rules based on:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>container image</p></li><li class="listitem"><p>container name</p></li><li class="listitem"><p>container label</p></li><li class="listitem"><p>Kubernetes annotation or label</p></li></ul></div><p>The default behavior in <code class="code">default.dragent.yaml</code> excludes based on a <span class="bold bold"><strong>container label</strong></span> (<code class="code">com.sysdig.report</code>) and/or a <span class="bold bold"><strong>Kubernetes pod annotation</strong></span> (<code class="code">.<a class="link" href="http://sysdig.com/report" target="_blank">sysdig.com/report</a> </code>).</p><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-946ee45d-5901-e595-0f67-2770838b6889"><div class="titlepage"><div><div class="title"><h3 class="title">Container Condition Parameters and Rules</h3></div></div></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_id_PrioritizeIncludeExcludeDesignatedContainers-Parameters"><div class="titlepage"><div><div class="title"><h4 class="title">Parameters</h4></div></div></div><p>The condition parameters are described in the following table:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col><col></col></colgroup><thead><tr><th class="th"><p>Pattern name</p></th><th class="th"><p>Description</p></th><th class="th"><p>Example</p></th></tr></thead><tbody><tr><td class="td"><p> <code class="code">container.image</code> </p></td><td class="td"><p>Matches if the process is running inside a container running the specified image</p></td><td class="td"><p> <code class="code">- include:</code> </p><p> <code class="code"> container.image: luca3m/prometheus-java-app</code> </p></td></tr><tr><td class="td"><p> <code class="code"> <a class="link" href="http://container.name" target="_blank">container.name</a> </code> </p></td><td class="td"><p>Matches if the process is running inside a container with the specified name</p></td><td class="td"><p> <code class="code">- include:</code> </p><p> <code class="code"> <a class="link" href="http://container.name" target="_blank">container.name</a>: my-java-app</code> </p></td></tr><tr><td class="td"><p> <code class="code">container.label.*</code> </p></td><td class="td"><p>Matches if the process is running in a container that has a Label matching the given value</p></td><td class="td"><p> <code class="code">- include:</code> </p><p> <code class="code"> container.label.class: exporter</code> </p></td></tr><tr><td class="td"><p> <code class="code">kubernetes.&lt;object&gt;.annotation.* kubernetes.&lt;object&gt;.label.*</code> </p></td><td class="td"><p>Matches if the process is attached to a Kubernetes object (Pod, Namespace, etc.) that is marked with the Annotation/Label matching the given value.</p></td><td class="td"><p> <code class="code">- include:</code> </p><p> <code class="code"> <a class="link" href="http://kubernetes.pod.annotation.prometheus.io/scrape" target="_blank">kubernetes.pod.annotation.prometheus.io/scrape</a>: true</code> </p></td></tr><tr><td class="td"><p>all</p></td><td class="td"><p>Matches all. Use as last rule to determine default behavior.</p></td><td class="td"><p> <code class="code">- include:</code> </p><p> <code class="code"> all</code> </p></td></tr></tbody></table></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_id_PrioritizeIncludeExcludeDesignatedContainers-Rules"><div class="titlepage"><div><div class="title"><h4 class="title">Rules</h4></div></div></div><p>Once enabled (when <code class="code">use_container_filter: true</code> is set), the agent will follow filtering rules from the <code class="code">container_filter</code> section.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Each rule is an <code class="code">include</code> or <code class="code">exclude</code> rule which can contain one or more conditions.</p></li><li class="listitem"><p>The first matching rule in the list will determine if the container is included or excluded.</p></li><li class="listitem"><p>The conditions consist of a key name and a value. If the given key for a container matches the value, the rule will be matched.</p></li><li class="listitem"><p>If a rule contains multiple conditions they all need to match for the rule to be considered a match.</p></li></ul></div></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-43ad1a07-706e-245e-3118-e84c2ce19a78"><div class="titlepage"><div><div class="title"><h3 class="title">Default Configuraton</h3></div></div></div><p>The <code class="code">dragent.default.yaml</code> contains the following default configuration for container filters:</p><pre class="programlisting">use_container_filter: false

container_filter:
  - include:
      container.label.com.sysdig.report: true
  - exclude:
      container.label.com.sysdig.report: false
  - include:
      kubernetes.pod.annotation.sysdig.com/report: true
  - exclude:
      kubernetes.pod.annotation.sysdig.com/report: false
  - include:
        all</pre><p>Note that it excludes via a <code class="code">container.label</code> and by a <code class="code">kubernetes.pod.annotation. </code> </p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>The examples on this page show how to edit in the <code class="code">dragent.yaml</code> file directly. Convert the examples to Docker or Helm commands, if applicable for your situation.</p></div></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-890f43e8-4bb1-9936-7330-74c05e1fdf94"><div class="titlepage"><div><div class="title"><h3 class="title">Enable Container Filtering in the Agent Config File</h3></div></div></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_id_PrioritizeIncludeExcludeDesignatedContainers-Option1UsetheDefaultConfiguration"><div class="titlepage"><div><div class="title"><h4 class="title">Option 1: Use the Default Configuration</h4></div></div></div><p>To enable container filtering using the default configuration in <code class="code">default.dragent.yaml</code> (above), follow the steps below.</p><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_id_PrioritizeIncludeExcludeDesignatedContainers-1ApplyLabelsandorAnnotationstoDesignatedContainers"><div class="titlepage"><div><div class="title"><h5 class="title">1. Apply Labels and/or Annotations to Designated Containers</h5></div></div></div><p>To set up, decide which containers should be excluded from automatic monitoring.</p><p>Apply the container label <span class="bold bold"><strong> <code class="code">.com.sysdig.report</code> </strong></span> and/or the Kubernetes pod annotation <span class="bold bold"><strong> <code class="code"> <a class="link" href="http://sysdig.com/report" target="_blank">sysdig.com/report</a> </code> </strong></span> to the designated containers.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_id_PrioritizeIncludeExcludeDesignatedContainers-2EdittheAgentConfiguration"><div class="titlepage"><div><div class="title"><h5 class="title">2. Edit the Agent Configuration</h5></div></div></div><p>Add the following line to <code class="code">dragent.yaml</code> to turn on the default functionality:</p><pre class="programlisting">use_container_filter: true</pre></section></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_id_PrioritizeIncludeExcludeDesignatedContainers-Option2DefineYourOwnRules"><div class="titlepage"><div><div class="title"><h4 class="title">Option 2: Define Your Own Rules</h4></div></div></div><p>You can also edit <code class="code">dragent.yaml</code> to apply your own container filtering rules.</p><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_id_PrioritizeIncludeExcludeDesignatedContainers-1DesignateContainers"><div class="titlepage"><div><div class="title"><h5 class="title">1. Designate Containers</h5></div></div></div><p>To set up, decide which containers should be excluded from automatic monitoring.</p><p>Note the image, name, label, or Kubernetes pod information as appropriate, and build your rule set accordingly.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_id_PrioritizeIncludeExcludeDesignatedContainers-2EdittheAgentConfiguration1"><div class="titlepage"><div><div class="title"><h5 class="title">2. Edit the Agent Configuration</h5></div></div></div><p>For example:</p><pre class="programlisting">use_container_filter: true

container_filter:
  - include:
      container.name: my-app
  - include:
      container.label.com.sysdig.report: true
  - exclude:
      kubernetes.namespace.name: kube-system
      container.image: "gcr.io*"
  - include:
      all</pre><p>The above example shows a <code class="code">container_filter</code> with 3 include rules and 1 exclude rule.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If the container name is "<code class="code">my-app</code>" it will be included.</p></li><li class="listitem"><p>Likewise, if the container has a label with the key "<code class="code">com.sysdig.report</code>" and with the value "<code class="code">true</code>".</p></li><li class="listitem"><p>If neither of those rules is true, and the container is part of a Kubernetes hierarchy within the "<code class="code">kube-system</code>" namespace and the container image starts with "<code class="code"> <a class="link" href="http://gcr.io" target="_blank">gcr.io</a> </code>", it will be excluded.</p></li><li class="listitem"><p>The last rule includes all, so any containers not matching an earlier rule will be monitored and metrics for them will be sent to the backend.</p></li></ul></div></section></section></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-c7b730fb-1fef-c219-33c7-09b3851d32f1"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Use Smart Container Reporting</h2></div></div></div><p>As of Sysdig <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/RN/pages/384762044/Sysdig+Agent+Release+Notes" target="_blank">agent version 0.91</a>, you can add another parameter to the config file: <code class="code">smart_container_reporting = true</code> </p><p>This enables several new prioritization checks:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>container_filter (you would enable and set include/exclude rules, as described above)</p></li><li class="listitem"><p>container age</p></li><li class="listitem"><p>high stats</p></li><li class="listitem"><p>legacy patterns</p></li></ul></div><p>The sort is modified with the following rules in priority order:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>User-specified containers come before others</p></li><li class="step"><p>Containers reported previously should be reported before those which have never been reported</p></li><li class="step"><p>Containers with higher usage by each of the 4 default stats should come before those with lower usage</p></li></ol></div><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-b9f4b5d3-7603-65f1-76c7-6f7a2536575b"><div class="titlepage"><div><div class="title"><h3 class="title">Enable Smart Container Reporting and sysdig_aggregated</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Set up any simple container filtering rules you need, following either <a class="link" href="">Option 1</a> or <a class="link" href="">Option 2</a>, above.</p></li><li class="step"><p>Edit the agent configuration:</p><pre class="programlisting">smart_container_reporting: true</pre></li><li class="step"><p>This turns on both <code class="code">smart_container_reporting</code> and <code class="code">sysdig_aggregated</code>. The changes will be visible in the Sysdig Monitor UI.</p><p>See also <a class="link" href="43430-sysdig_aggregated-container-metrics.html" title="Sysdig_aggregated Container Metrics">Sysdig_aggregated Container Metrics</a>..</p></li></ol></div></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-d41a15b7-a69a-1f47-80da-bfdf2fc640eb"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Logging</h2></div></div></div><p>When the log level is set to DEBUG, the following messages may be found in the logs:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>message</p></th><th class="th"><p>meaning</p></th></tr></thead><tbody><tr><td class="td"><p>container &lt;id&gt;, no filter configured</p></td><td class="td"><p>container filtering is not enabled</p></td></tr><tr><td class="td"><p>container &lt;id&gt;, include in report</p></td><td class="td"><p>container is included</p></td></tr><tr><td class="td"><p>container &lt;id&gt;, exclude in report</p></td><td class="td"><p>container is excluded</p></td></tr><tr><td class="td"><p>Not reporting thread &lt;thread-id&gt; in container &lt;id&gt;</p></td><td class="td"><p>Process thread is excluded</p></td></tr></tbody></table></div><p>See also: <a class="link" href="43439-optional--change-the-agent-log-level.html" title="Optional: Change the Agent Log Level">Optional: Change the Agent Log Level</a>.</p></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7">Prioritize/Include/Exclude Designated Containers</a></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-947b9c36-304a-249f-1203-aeef6b22748e">Overview</a><ul class="nav"><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-aa9ad250-7b67-c905-8b26-3bd2949c36ce">Understand Default Behavior</a></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-0d48c898-bcce-3f21-a454-8f6803fe94f0">Understand Simple Container Filtering</a></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-eb9c9122-525f-a2cd-6e20-2706ef452d63">Understand Smart Container Reporting</a></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-b4be6676-258f-9c4d-4ed4-fd2e6e98af5d">Understand Sysdig Aggregated Container</a></li></ul></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-bb3b81a0-135f-3dcf-cb2b-31afd6fbc0be">Use Simple Container Filtering</a><ul class="nav"><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-946ee45d-5901-e595-0f67-2770838b6889">Container Condition Parameters and Rules</a><ul class="nav"></ul></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-43ad1a07-706e-245e-3118-e84c2ce19a78">Default Configuraton</a></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-890f43e8-4bb1-9936-7330-74c05e1fdf94">Enable Container Filtering in the Agent Config File</a><ul class="nav"></ul></li></ul></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-c7b730fb-1fef-c219-33c7-09b3851d32f1">Use Smart Container Reporting</a><ul class="nav"><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-b9f4b5d3-7603-65f1-76c7-6f7a2536575b">Enable Smart Container Reporting and sysdig_aggregated</a></li></ul></li><li><a href="#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-d41a15b7-a69a-1f47-80da-bfdf2fc640eb">Logging</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div><div id="email-feedback" class=" toggle-feedback"><p><a href='mailto:radhika@sysdig.com?subject=Feedback for help topic "Prioritize/Include/Exclude Designated Containers"&amp;body=%0D%0A_______________________%0D%0A%0D%0A
			
			Please add your feedback above for topic "Prioritize/Include/Exclude Designated Containers" in the publication "Sysdig Platform".'><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon voting-feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="43414-include-exclude-custom-metrics.html#UUID-0a3f6035-e76d-f204-5449-ab5a29c7bfd0_UUID-a75b6ac2-9512-3e5b-3c5d-106b4f7c7b3e">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="43417-prioritize-include-exclude-designated-containers.html#UUID-5ec16db5-fea8-9965-f71c-ce7741289ff7_UUID-947b9c36-304a-249f-1203-aeef6b22748e">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
