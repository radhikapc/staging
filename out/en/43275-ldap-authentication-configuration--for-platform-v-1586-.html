<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>LDAP Authentication Configuration (for Platform v.1586)</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d6593bb1e613.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="43271-ldap.html#UUID-9cb9eaa0-5203-5aa8-519c-39113ab2ef58_UUID-46078228-f2a8-d11f-dd6f-c841e204bf78" title="Excluding Classes of Users (e.g. Disabled Accounts)"></link><link rel="next" href="43275-ldap-authentication-configuration--for-platform-v-1586-.html#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-8b9999ff-7aa9-3005-9df4-359d5a49e6ea" title="Overview"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {
				/**
				 * @type {array}
				 */
				var supported = hljs.listLanguages();

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}

					if (language && $.inArray(language, supported) > -1) {
						var c = hljs.highlight(language, $(this).text());
						$(this)
							.empty()
							.append(c.value)
							.addClass("hljs")
							.addClass(c.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="43019-sysdig-platform.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2aec11a7-27eb-167a-dfc2-d868c58604cd" data-permalink="43019-sysdig-platform.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Platform</a><ul><li><a href="43026-on-premises-deployments.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3967fd02-70a8-134b-394b-cace7214ff6d" data-permalink="43026-on-premises-deployments.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> On-Premises Deployments</a><ul><li><a href="43027-architecture---system-requirements.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-dec254a6-b961-0e73-3f01-20f689cf90e3" data-permalink="43027-architecture---system-requirements.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Architecture &amp; System Requirements</a></li><li><a href="43049-on-premises-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-db1188d3-a7ec-15df-c6cf-67e07a21b18b" data-permalink="43049-on-premises-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Installation</a></li><li><a href="43140-on-premises-upgrades.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5d758c36-dfff-2452-850d-9ed2a4371f81" data-permalink="43140-on-premises-upgrades.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Upgrades</a></li><li><a href="43209-find-the-super-admin-credentials-and-api-token.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8dab9961-ec84-3db6-d190-6869ea677fc0" data-permalink="43209-find-the-super-admin-credentials-and-api-token.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find the Super Admin Credentials and API Token</a></li><li><a href="43212-upgrade-an-on-premises-license.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-7887f7e8-616a-7c82-1e15-4faca9d5c58f" data-permalink="43212-upgrade-an-on-premises-license.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Upgrade an On-Premises License</a></li><li><a href="43217-securing-elasticsearch.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-98444088-953d-f9e0-cccd-ae3d2cabdc82" data-permalink="43217-securing-elasticsearch.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Elasticsearch</a></li><li><a href="43222-securing-cassandra.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d6bd8eba-9fca-4113-e123-10a2f1a3a374" data-permalink="43222-securing-cassandra.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Cassandra</a></li><li><a href="43230-authentication-and-authorization--on-prem-options-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-648140d5-4cd3-49eb-c672-21e00ae3296c" data-permalink="43230-authentication-and-authorization--on-prem-options-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (On-Prem Options)</a></li></ul></li><li><a href="43297-sysdig-agent.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2b34ba9d-6b45-4d57-a133-ae54d956ee58" data-permalink="43297-sysdig-agent.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Agent</a><ul><li><a href="43298-host-requirements-for-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cc64bfae-70f3-b2d6-42d6-cf84ccf5abaf" data-permalink="43298-host-requirements-for-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Host Requirements for Agent Installation</a></li><li><a href="43317-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ef0cd1a8-cec3-1ed9-65b7-d2b61ce9d78f" data-permalink="43317-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation</a></li><li><a href="43391-agent-configuration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-07369059-d819-881f-183c-902f87b1b917" data-permalink="43391-agent-configuration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Configuration</a></li><li><a href="43450-agent-upgrade.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-551eb1f0-de5e-9917-527e-ed2d7183b2b5" data-permalink="43450-agent-upgrade.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Upgrade</a></li><li><a href="43457---agent-stop---start---disable---remove.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3031a485-9dec-0547-24e6-5f1e9967311f" data-permalink="43457---agent-stop---start---disable---remove.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Agent Stop | Start | Disable | Remove</a></li><li><a href="43467-agent-uninstall.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-3ccccaf4-45c2-3331-6fad-0829e683559c" data-permalink="43467-agent-uninstall.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Uninstall</a></li><li><a href="43470-troubleshooting-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-442c725a-6fb0-c992-9d42-1e253ac3d09d" data-permalink="43470-troubleshooting-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Troubleshooting Agent Installation</a></li></ul></li><li><a href="43478-administration-settings.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-1fced76a-c05c-a3dd-6965-ac6271a0c4b0" data-permalink="43478-administration-settings.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Administration Settings</a><ul><li><a href="43481-user-profile-and-password.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-68bae3d5-4e67-564d-a56f-36849de2841e" data-permalink="43481-user-profile-and-password.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User Profile and Password</a></li><li><a href="43489-user-and-team-administration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-00849bf9-2afa-6f2d-7293-ccb78c36cded" data-permalink="43489-user-and-team-administration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User and Team Administration</a></li><li><a href="43512-notifications-management.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-53d9d5a5-68f8-e49a-3dd2-ec0444ad3597" data-permalink="43512-notifications-management.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Notifications Management</a></li><li><a href="43548-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5c2df7a4-a53f-28fd-1303-29a41a587a6f" data-permalink="43548-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">AWS: Integrate AWS Account and CloudWatch Metrics (Optional)</a></li><li><a href="43563-storage--configure-aws-capture-file-storage--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-bdc495d5-e851-5fb6-ed62-07eb12e45024" data-permalink="43563-storage--configure-aws-capture-file-storage--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Storage: Configure AWS Capture File Storage (Optional)</a></li><li><a href="43568-find-your-customer-number.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-7e5c73de-e0be-9643-6660-81ee98d1dee6" data-permalink="43568-find-your-customer-number.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find Your Customer Number</a></li><li><a href="43569-agent-installation--overview-and-key.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8abc0bd0-5c58-5ddf-3912-b84f3e85b884" data-permalink="43569-agent-installation--overview-and-key.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation: Overview and Key</a></li><li><a href="43571-subscription--change-number-of-licensed-agents.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-aa6b5487-52a8-155d-a66f-bb4123d2a4fe" data-permalink="43571-subscription--change-number-of-licensed-agents.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Subscription: Change Number of Licensed Agents</a></li><li><a href="43579-authentication-and-authorization--saas-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-a01b3e9a-2bed-30ad-b321-61f47790c80e" data-permalink="43579-authentication-and-authorization--saas-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (SaaS)</a></li></ul></li><li><a href="43623-get-help---using-sysdig-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cfa5bd5d-97db-98f6-7a2f-e76376c865d7" data-permalink="43623-get-help---using-sysdig-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Get Help | Using Sysdig Support</a><ul><li><a href="43624-self-help.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2a9e92b7-a64a-9fe3-9ee7-cc7e463c590a" data-permalink="43624-self-help.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Self-Help</a></li><li><a href="43638-contact-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-716a9a89-2ea4-0e43-8643-902620732467" data-permalink="43638-contact-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Contact Support</a></li><li><a href="43658-terms-of-use.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-8f7aed46-3390-e0a1-5227-8b693b2c9acb" data-permalink="43658-terms-of-use.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Terms of Use</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">Sysdig Platform</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="43271-ldap.html#UUID-9cb9eaa0-5203-5aa8-519c-39113ab2ef58_UUID-46078228-f2a8-d11f-dd6f-c841e204bf78">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="43275-ldap-authentication-configuration--for-platform-v-1586-.html#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-8b9999ff-7aa9-3005-9df4-359d5a49e6ea">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">Sysdig Platform</span></li><li class="breadcrumb-link"><a href="43019-sysdig-platform.html">Sysdig Platform</a></li><li class="breadcrumb-link"><a href="43026-on-premises-deployments.html">On-Premises Deployments</a></li><li class="breadcrumb-link"><a href="43230-authentication-and-authorization--on-prem-options-.html">Authentication and Authorization (On-Prem Options)</a></li><li class="breadcrumb-link"><a href="43271-ldap.html">LDAP</a></li><li class="breadcrumb-node">LDAP Authentication Configuration (for Platform v.1586)</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-e56d777d-b1af-e87d-675b-ea7fd6138a8f" data-permalink="43275-ldap-authentication-configuration--for-platform-v-1586-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">LDAP Authentication Configuration (for Platform v.1586)</h1></div></div></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>This article is specific to LDAP support of <a class="link" href="43026-on-premises-deployments.html" title="On-Premises Deployments">On-Premises Deployments</a> version 1586.</p><div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><p>If you are running GA Releases 1149-1511, refer to <span class="underline underline"> <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/287211606" target="_blank">this other article</a> </span> instead.</p></li></ul></div></div><p> <a class="link" href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol" target="_blank">LDAP</a> support in the Sysdig software platform is used to allow user authentication using credentials in an enterprise's own directory server.</p><p>This document describes how to configure base LDAP settings, as well as the limitations of the LDAP support.</p><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-8b9999ff-7aa9-3005-9df4-359d5a49e6ea"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Overview</h2></div></div></div><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-8ae66a0d-4a67-3420-42cd-85a00c378eb3"><div class="titlepage"><div><div class="title"><h3 class="title">Functionality</h3></div></div></div><p>The Sysdig platform ordinarily maintains its own user database to hold a username and password hash, as well as settings for Admin privileges, Sysdig team membership, and a user’s configured dashboards and alerts. Sysdig's LDAP authentication feature provides a means to allow the Sysdig platform to query your separate directory server to validate username/password. Upon successful authentication, a corresponding user record in the Sysdig platform’s user database is automatically created. When the LDAP feature is in use, the user’s directory password is not stored in the Sysdig user database.</p><p>Once LDAP authentication is enabled, <span class="italic italic">all</span> normal user authentication will be performed against your configured directory server. Other local, non-LDAP users that were created before LDAP was enabled can still authenticate via LDAP as long as their username in your directory matches with the username of their pre-existing record in the Sysdig user database. For example, consider a user <span class="bold bold"><strong> <code class="code"> <a class="link" href="mailto:jdoe@example.com" target="_blank">jdoe@example.com</a> </code> </strong></span> who had been a user in the Sysdig environment before LDAP was enabled. Once LDAP authentication is enabled, if a user <span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span> exists in the directory server and is able to authenticate successfully via LDAP, they will be permitted to log in to the Sysdig platform as the pre-existing <span class="bold bold"><strong> <code class="code"> <a class="link" href="mailto:jdoe@example.com" target="_blank">jdoe@example.com</a> </code> </strong></span> user. Any user-specific configuration (Alerts, Dashboards, etc.) that were attached to <span class="bold bold"><strong> <code class="code"> <a class="link" href="mailto:jdoe@example.com" target="_blank">jdoe@example.com</a> </code> </strong></span> will still be visible to this user. Any password previously set for such a pre-existing user record will <span class="italic italic">not</span> be used for authentication to the Sysdig platform unless LDAP authentication is disabled.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>LDAP can be complex to configure. Sysdig strongly recommends that you first refine your LDAP configuration in a separate test setup before applying the LDAP settings in your production environment.</p></div></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-0b5b44ef-2bf0-79b1-17da-246a7c71083b"><div class="titlepage"><div><div class="title"><h3 class="title">Prerequisite: Have the "Super" Admin User Credentials and Token</h3></div></div></div><p>In an environment enabled for LDAP authentication, the one user still subject to direct email+password authentication is the <a class="link" href="43209-find-the-super-admin-credentials-and-api-token.html" title="Find the Super Admin Credentials and API Token">"super" Admin user</a>.</p><p>Creation of this user is a required initial install step.</p><p>You can find the credentials either in the Replicated console (screenshot below) or your Kubernetes <a class="link" href="https://github.com/draios/sysdigcloud-kubernetes/blob/master/sysdigcloud/config.yaml" target="_blank">ConfigMap</a> element <span class="bold bold"><strong> <code class="code">sysdigcloud.default.user</code> </strong></span>.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="550px"><tr style="height: 184px"><td><img src="image/uuid-0854ab61-182d-8b4f-5371-d0c344181a03-en.png" style="max-width: 550px; max-height: 184px; " alt="373574185.png"></img></td></tr></table></div><p>This user is required and cannot be deleted. This login provides:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A way to access the Sysdig platform when LDAP connectivity is severed.</p></li><li class="listitem"><p>The first Admin user in the install, essential for assigning Admin rights to other users once they’ve authenticated via your directory and their user records have been added to the Sysdig user database.</p></li><li class="listitem"><p>The user whose token can be used to perform further LDAP configurations.</p><p>See <a class="link" href="43481-user-profile-and-password.html" title="User Profile and Password">Retrieve the Sysdig API Security Token</a> for details.</p></li></ul></div></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-6e54658b-0bf5-e4fb-e3d1-db9939322e82"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Configure Basic LDAP Settings</h2></div></div></div><p>There are two ways to configure the basic LDAP settings for Sysdig: via the Sysdig UI, or via the API endpoint using scripts and HTTP methods.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Whichever method is used, it will apply LDAP settings globally, to both Sysdig Monitor and Sysdig Secure.</p></div><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-c40ad2bc-afa2-60ef-0cb4-7c088e1db160"><div class="titlepage"><div><div class="title"><h3 class="title">UI-Based: Configure LDAP in Settings</h3></div></div></div><p>At this time, the Authorization UI is available only for Sysdig Monitor.</p><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-EnterLDAPConnectionSettings"><div class="titlepage"><div><div class="title"><h4 class="title">Enter LDAP Connection Settings</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Log in to Sysdig Monitor or Sysdig Secure as the <a class="link" href="43209-find-the-super-admin-credentials-and-api-token.html" title="Find the Super Admin Credentials and API Token">"super" Admin user</a>. and select <code class="code">Settings. <div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="250px"><tr style="height: 60px"><td><img src="image/uuid-e48694bd-75f0-ee2b-887d-d30a99e09cb0-en.png" style="max-width: 250px; max-height: 60px; " alt="373574179.png"></img></td></tr></table></div></code> </p></li><li class="step"><p>Select <code class="code">Authentication</code>.</p></li><li class="step"><p>Select the <code class="code">LDAP</code> tab.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="700px"><tr><td><img src="image/image-missing.png" style="max-width: 700px; " alt=""></img></td></tr></table></div></li><li class="step"><p>Enter the relevant parameters (see tables below) and click <code class="code">Save</code>.</p></li></ol></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-Table_loginConnectionSettings"><div class="titlepage"><div><div class="title"><h5 class="title">Table_loginConnectionSettings</h5></div></div></div><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col><col></col></colgroup><thead><tr><th class="th"><p>Setting</p></th><th class="th"><p>Required</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">server</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>URL of the directory server for the Sysdig platform to query. An example for LDAP over SSL:</p><p>ldaps://172.16.0.1:636</p><p>For cleartext LDAP:</p><p>ldap://176.16.0.1</p><p>Note that to use LDAPS, you'll also need to use the Replicated console (or equivalent approach in Kubernetes-based installs) to upload a Certificate Authority (CA) PEM-format certificate that the Sysdig platform will use to validate its SSL connection to the server. If you have a host with OpenSSL tools installed that can reach the directory server, you can obtain the certificate by running:</p><pre class="programlisting">
# openssl s_client -showcerts -connect &lt;server-ip&gt;:636</pre><p>The command output will typically show the server certificate first and the CA certificate second, both in PEM format. Into a text file, paste the CA certificate portion of the output that looks like:</p><pre class="programlisting">-----BEGIN CERTIFICATE-----
[random text...]
-----END CERTIFICATE-----</pre><p>Under <span class="bold bold"><strong>LDAP CA certificate in the PEM format</strong></span> in the Replicated console, click the "Choose File" button and browse to the file you just created to select and upload it. Note that when you click <span class="bold bold"><strong>Save</strong></span>, the Sysdig platform will restart. This is the only setting related to LDAP that requires a platform restart.</p><p>Note: For environments using self-signed certificates, the <span class="bold bold"><strong> <code class="code">openssl </code> </strong></span>command shown above will return only one certificate.</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">managerDn</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>The distinguished name of a user that the Sysdig platform can authenticate as via LDAP in order to perform further queries about the users attempting to login to the Sysdig platform. Example:</p><pre class="programlisting">
cn=Administrator,cn=Users,dc=example,dc=local</pre><p>This setting is required, as the Sysdig platform does not support connection to servers via anonymous bind.</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">managerPassword</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>The password for the <span class="bold bold"><strong> <code class="code">managerDn</code> </strong></span>.</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span> </p></td><td class="td"><p>No</p></td><td class="td"><p>The distinguished name for the point in the LDAP tree below which all search queries will begin. Example:</p><pre class="programlisting">dc=example,dc=local</pre></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">referral</code> </strong></span> </p></td><td class="td"><p>No</p></td><td class="td"><p>Defines whether the Sysdig platform will <a class="link" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/cc978014(v=technet.10)" target="_blank">chase referrals</a> found in LDAP query responses. If not specified, this will be set to <span class="bold bold"><strong> <code class="code">"IGNORE"</code> </strong></span> in your configuration and referrals will not be chased. See the section below on <a class="link" href="">Multi-Server Directories</a> for more details on this option.</p></td></tr></tbody></table></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-Table_loginFilter"><div class="titlepage"><div><div class="title"><h5 class="title">Table_loginFilter</h5></div></div></div><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col><col></col></colgroup><thead><tr><th class="th"><p>Setting</p></th><th class="th"><p>Required</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">searchBase</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>A relative distinguished name (from the <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span>) below which queries about users should be performed. Example:</p><pre class="programlisting">cn=Users</pre><p>If specified as an empty string (<span class="bold bold"><strong> <code class="code">""</code> </strong></span>), the search will be performed across everything below the <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span>, in which case the <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span> setting must be configured.</p><p>Note that if the <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span> setting was not specified, the <span class="bold bold"><strong> <code class="code">searchBase</code> </strong></span> setting must provide a full distinguished name. Example:</p><pre class="programlisting">cn=Users,dc=example,dc=local</pre></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">searchFilter</code> </strong></span> </p></td><td class="td"><p>No</p></td><td class="td"><p>An LDAP search filter (in <a class="link" href="https://www.ietf.org/rfc/rfc2254.txt" target="_blank">RFC2254</a> format) that the Sysdig platform will use in constructing the query to identify the user record. The marker token <span class="bold bold"><strong> <code class="code">{0}</code> </strong></span> represents where the username will appear when LDAP queries are constructed. An example that targets the attribute <span class="bold bold"><strong> <code class="code">sAMAccountName</code> </strong></span> in Active Directory:</p><pre class="programlisting">
(&amp;(objectClass=organizationalPerson)(sAMAccountName={0}))</pre><p>While this setting is optional, if not specified, no users will be able to authenticate via LDAP.</p></td></tr></tbody></table></div></section></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-SelectLDAPforSSO"><div class="titlepage"><div><div class="title"><h4 class="title">Select LDAP for SSO</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Select <code class="code">LDAP </code>from the <span class="bold bold"><strong> <code class="code">Enabled Single Sign-On </code> </strong></span>dropdown</p></li><li class="step"><p>Click <code class="code">Save Authentication</code>.</p></li><li class="step"><p>Repeat entire enablement process for Sysdig Monitor or Sysdig Secure, if you want to enable on both applications.</p></li></ol></div></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-ba185af8-4238-a374-218b-eb3375a2cbab"><div class="titlepage"><div><div class="title"><h3 class="title">Script-Based: Configure LDAP Using Scripts</h3></div></div></div><p>The configuration of the LDAP feature can be viewed, updated, and deleted by the "super" Admin via the API endpoint <span class="bold bold"><strong> <code class="code">/api/admin/ldap/settings</code> </strong></span> using HTTP methods for <span class="bold bold"><strong> <code class="code">GET</code> </strong></span>, <span class="bold bold"><strong> <code class="code">POST</code> </strong></span>, and <span class="bold bold"><strong> <code class="code">DELETE</code> </strong></span>, respectively.</p><p>The workflow is as follows:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Log in as super admin (prerequisite ).</p></li><li class="step"><p> <a class="link" href="43481-user-profile-and-password.html" title="User Profile and Password">Retrieve the Sysdig API Security Token</a> (prerequisite)</p></li><li class="step"><p>Access <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/LDAP/login_config.sh" target="_blank">login_config.sh</a> </code> and <span class="bold bold"><strong> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/LDAP/verify_user.sh" target="_blank">verify_user.sh</a> </strong></span> helper scripts is available in the <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/tree/master/SSO" target="_blank"> <span class="bold bold"><strong>SSO</strong></span> </a> folder at <span class="bold bold"><strong> <code class="code">sysdig-cloud-scripts</code> </strong></span> repository, to assist in completing this configuration.</p></li><li class="step"><p>Modify <span class="bold bold"><strong> <code class="code"> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/env.sh" target="_blank">env.sh</a> </code> </code> </strong></span> to enter the API_TOKEN and the URL of your environment.</p></li><li class="step"><p>Modify <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/LDAP/settings_login_simple.json" target="_blank">settings_login_simple.json</a> </code> </strong></span> file with Login Connection Settings and <span class="underline underline">Login Filter Settings.</span> </p></li><li class="step"><p>Execute various scripts</p><pre class="programlisting"># get current settings: initially empty
./login_config.sh

# set settings we have detailed above
./login_config.sh -s settings_login_simple.json

# verify an existing user information is retrieved
./verify_user.sh -u jdoe

# verify a non existing user information is not retrieved
./verify_user.sh -u nothere

# optionally delete the settings
# ./login_config.sh -d</pre></li><li class="step"><p>See <span class="italic italic">Advanced Use Cases</span> (below) if you have a multi-server environment, or want to create LDAP users before they log in.</p></li></ol></div><p>Details of this workflow are as follows:</p><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-Configureenvsh"><div class="titlepage"><div><div class="title"><h4 class="title">Configure env.sh</h4></div></div></div><p>To use the helper script, modify the <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/env.sh" target="_blank">env.sh</a> </code> </strong></span> </p><p>to set the required values for <span class="bold bold"><strong> <code class="code">API_TOKEN</code> </strong></span> and <span class="bold bold"><strong> <code class="code">URL</code> </strong></span> for your environment. Once set, invoking <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/LDAP/login_config.sh" target="_blank">login_config.sh</a> </code> </strong></span> (at the <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/tree/master/SSO" target="_blank">sysdig-cloud-scripts repository</a> in GitHub) helper script with no options will print the current configuration. Initially empty.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-RetrieveCurrentLDAPSettings"><div class="titlepage"><div><div class="title"><h4 class="title">Retrieve Current LDAP Settings</h4></div></div></div><pre class="programlisting"># ./login_config.sh
No ldap settings are set
Run for further info: ./login_config.sh -h</pre></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-Configuresettings_login_simplejsonandsetwithlogin_configsh"><div class="titlepage"><div><div class="title"><h4 class="title">Configure settings_login_simple.json and set withlogin_config.sh</h4></div></div></div><p>In the <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/tree/updated-ldap-settings" target="_blank">sysdig-cloud-scripts repository</a> in GitHub, find the example <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/LDAP/settings_login_simple.json" target="_blank">settings_login_simple.json</a> </code> </strong></span> and modify it for your environment, following the <span class="bold bold"><strong>Tables</strong></span> above.</p><p>To apply the new LDAP settings invoke <span class="bold bold"><strong> <code class="code">login_config.sh</code> </strong></span> with the <span class="bold bold"><strong> <code class="code">-s</code> </strong></span> option and specify the filename containing the JSON config:</p><pre class="programlisting"># ./login_config.sh -s settings_login_simple.json
{
  "authenticationSettings": {
    "id": 1,
    "version": 1,
    "createdOn": 1547542447000,
    "type": "ldap",
    "scope": "SYSTEM",
    "settings": {
      "loginConnectionSettings": {
        "server": "ldap://172.16.0.1",
        "rootDn": "dc=example,dc=local",
        "managerDn": "cn=Administrator,cn=Users,dc=example,dc=local",
        "managerPassword": "myMgrPassword",
        "referral": "IGNORE"
      },
      "loginFilter": {
        "searchBase": "cn=Users",
        "searchFilter": "(&amp;(objectClass=organizationalPerson)(sAMAccountName={0}))"
      }
    }
  }
}</pre></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-SampleresultinActiveDirectory"><div class="titlepage"><div><div class="title"><h4 class="title">Sample result in Active Directory</h4></div></div></div><p>Using the specific example <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/SSO/LDAP/settings_login_simple.json" target="_blank">settings_login_simple.json</a> </code> </strong></span> and the minimal Active Directory configuration in the screenshot below, login to the Sysdig platform would now be permitted for a user <span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span> that has the following <span class="bold bold"><strong> <code class="code">distinguishedName</code> </strong></span>:</p><pre class="programlisting">CN=John Doe,CN=Users,DC=example,DC=local</pre><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="1024px"><tr><td><img src="image/image-missing.png" style="max-width: 1024px; " alt=""></img></td></tr></table></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-TestUserLogin"><div class="titlepage"><div><div class="title"><h4 class="title">Test User Login</h4></div></div></div><p>To test the login configuration, the <a class="link" href="https://support.sysdig.com/hc/en-us/articles/115004951443-Locating-the-Super-Admin-User" target="_blank">"super" Admin user</a> can confirm if a particular user would be permitted to login given current LDAP login connection settings. To do this, perform an HTTP <span class="bold bold"><strong> <code class="code">GET</code> </strong></span> to the API endpoint <span class="bold bold"><strong> <code class="code">/api/admin/ldap/settings/verify/USERNAME</code> </strong></span>. A <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/LDAP/verify_user.sh" target="_blank"> <span class="bold bold"><strong> <code class="code">verify_user.sh</code> </strong></span> </a> helper script is provided to easily perform this. If invoked with the <span class="bold bold"><strong> <code class="code">-u</code> </strong></span> option and a username, and the user's login would be successful, it will return the user's information from the directory.</p><pre class="programlisting"># ./verify_user.sh -u jdoe
{"element":"uSNCreated=12799, countryCode=0, badPwdCount=0, whenChanged=20180406232737.0Z, objectClass=top, primaryGroupID=513, givenName=John, objectGUID=..., objectSid=..., instanceType=4, whenCreated=20180406220651.0Z, dSCorePropagationData=16010101000000.0Z, sn=Doe, userAccountControl=66048, lastLogonTimestamp=131675308573317669, cn=John Doe, codePage=0, accountExpires=9223372036854775807, sAMAccountName=jdoe, sAMAccountType=805306368, userPrincipalName=jdoe@example.local, displayName=John Doe, pwdLastSet=131675260113435098, lastLogon=131682933890462204, name=John Doe, objectCategory=CN=Person,CN=Schema,CN=Configuration,DC=example,DC=local, distinguishedName=CN=John Doe,CN=Users,DC=example,DC=local, lastLogoff=0, memberOf=CN=Sysdig Viewers,CN=Users,DC=example,DC=local, logonCount=0, uSNChanged=12986"}</pre><p>If the user would not be able to login, an error message will be returned.</p><pre class="programlisting"># ./verify_user.sh -u nothere
Could not verify user "nothere". Check LDAP login config settings and/or system log.</pre><p>Note that if LDAP authentication is disabled this method for testing user login is not available.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_id_LDAPAuthenticationConfigurationforPlatformv1586-OptionalDeleteLDAPsettings"><div class="titlepage"><div><div class="title"><h4 class="title">Optional: Delete LDAP settings</h4></div></div></div><p>To delete LDAP settings, invoke <span class="bold bold"><strong> <code class="code">login_config.sh</code> </strong></span> with the <span class="bold bold"><strong> <code class="code">-d</code> </strong></span> option. After running the following command all LDAP users will not be able to login to the Sysdig platform.</p><pre class="programlisting"># ./login_config.sh -d
{
  "authenticationSettings": {
    "id": 1,
    "version": 1,
    "createdOn": 1547542447000,
    "type": "ldap",
    "scope": "SYSTEM",
    "settings": {
      "loginConnectionSettings": {
        "server": "ldap://172.16.0.1",
        "rootDn": "dc=example,dc=local",
        "managerDn": "cn=Administrator,cn=Users,dc=example,dc=local",
        "managerPassword": "myMgrPassword",
        "referral": "IGNORE"
      },
      "loginFilter": {
        "searchBase": "cn=Users",
        "searchFilter": "(&amp;(objectClass=organizationalPerson)(sAMAccountName={0}))"
      }
    }
  }
}</pre></section></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-47bfb3c2-90f7-b817-c0c0-f0a5d0dd0fe5"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">User Experience</h2></div></div></div><p>When a user accesses the Sysdig interface, they are prompted to enter their LDAP credentials (in the fields normally used for email/password).</p><p>Monitor: <code class="code"> <a class="link" href="https://HOSTNAME/" target="_blank">https://HOSTNAME/</a> </code> or Secure: <code class="code"> <a class="link" href="https://HOSTNAME/secure" target="_blank">https://HOSTNAME/secure</a> </code> </p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="250px"><tr><td><img src="image/uuid-3d0d3510-40de-d811-8bfe-e7ca449e4ad4-en.jpg" style="max-width: 250px; " alt="373574173.jpg"></img></td></tr></table></div></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-5660f348-ea77-359d-dd51-e0f98957416f"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Advanced Use Cases</h2></div></div></div><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-7961019b-9943-9106-8144-606dc8963c44"><div class="titlepage"><div><div class="title"><h3 class="title">Multi-Server Directories</h3></div></div></div><p>Data about your users that need to access the Sysdig platform may be stored across many directory servers in your environment. As the Sysdig platform is only able to query one LDAP server endpoint, you would need to take extra steps to ensure successful authentication for such users.</p><p>The simplest approach to achieve this is to query against a <a class="link" href="https://technet.microsoft.com/pt-pt/library/cc728188(v=ws.10).aspx" target="_blank">Global Catalog</a>. As the Global Catalog stores a copy of all Active Directory objects in a forest, this provides a fast and convenient target for the Sysdig platform to find all users that may need to authenticate. Since queries against the Global Catalog are also performed via LDAP, you simply need to ensure your LDAP configuration specifies the appropriate address and TCP port for the Global Catalog, e.g. ldap://176.16.0.1:3268 for cleartext LDAP or ldaps://172.16.0.1:3269 for LDAP over SSL. If querying against a Global Catalog, the <span class="bold bold"><strong> <code class="code">referral</code> </strong></span> option of the Sysdig platform's LDAP configuration can remain at its default setting of <span class="bold bold"><strong> <code class="code">"IGNORE"</code> </strong></span>.</p><p>If a Global Catalog is not available, another approach is to leverage <a class="link" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/cc978014(v=technet.10)" target="_blank">referral chasing</a>. Such chasing depends on complex interplay of configuration settings, DNS resolution, and network connectivity to multiple servers. If you require this option, carefully read the tips in this section and validate your configuration in a test environment before attempting its use in production. Contact Sysdig support for assistance as necessary.</p><p>For our example configuration, we've added another Domain Controller to our environment that holds users a separate set of users for the child domain <span class="bold bold"><strong> <code class="code">eu.example.local</code> </strong></span>.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="600px"><tr><td><img src="image/image-missing.png" style="max-width: 600px; " alt=""></img></td></tr></table></div><p>We'd like to permit login for a user "<span class="bold bold"><strong> <code class="code">eurodude</code> </strong></span>" in the child domain. This user has <span class="bold bold"><strong> <code class="code">distinguishedName</code> </strong></span>:</p><pre class="programlisting">
CN=Euro Dude,CN=Users,DC=eu,DC=example,DC=local</pre><p>In the example configuration <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/LDAP/settings_login_referral_follow.json" target="_blank">settings_login_referral_follow.json</a> </code> </strong></span> shown below, the Sysdig platform still begins its LDAP queries at the same top-level server target. However, the <span class="bold bold"><strong> <code class="code">referral</code> </strong></span> option is set to <span class="bold bold"><strong> <code class="code">"FOLLOW"</code> </strong></span>, which will cause the Sysdig platform to perform subsequent queries if a query returns one or more referrals.</p><pre class="programlisting">{
  "authenticationSettings": {
    "settings": {
      "loginConnectionSettings": {
        "server": "ldap://172.16.0.1",
        "managerDn": "cn=Administrator,cn=Users,dc=example,dc=local",
        "managerPassword": "myMgrPassword",
        "referral": "FOLLOW"
      },
      "loginFilter": {
        "searchBase": "dc=example,dc=local",
        "searchFilter": "(&amp;(objectClass=organizationalPerson)(sAMAccountName={0}))"
      }
    },
    "version": 1,
    "type": "ldap"
  }
}</pre><p>Note also how in this case the <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span> option is left unspecified and the <span class="bold bold"><strong> <code class="code">searchBase</code> </strong></span> is set to the distinguished name of the top-level domain. This is necessary to ensure the scope of the chased referral queries will include the child domain. If <span class="bold bold"><strong> <code class="code">rootDn </code> </strong></span>and <span class="bold bold"><strong> <code class="code">searchBase</code> </strong></span> had been left as they were set in the <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/SSO/LDAP/settings_login_simple.json" target="_blank">settings_login_simple.json</a> </code> </strong></span> example, the initial query would have been targeted only within <span class="bold bold"><strong> <code class="code">cn=Users,dc=example,dc=local</code> </strong></span> and hence the referral would never have been returned by the top-level server.</p><p>Note these other caveats of referral chasing in the Sysdig platform:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Referrals may only be successfully chased to child domains. If referrals point to parallel domains (e.g. for our example, <span class="bold bold"><strong> <code class="code">dc=adjacent,dc=local</code> </strong></span>) the queries will not succeed and users stored in the directory servers for such domains will not be able to authenticate.</p></li><li class="listitem"><p>The LDAP library used by the Sysdig platform does not log information about each referral it attempts to chase. Therefore, if you enable referral chasing, it is important that you understand the server targets that may be chased in your environment and ensure the network connectivity (routing/firewalls) will permit the Sysdig platform to query these server targets. If LDAP queries are failing due to a network connectivity issue, this will typically be accompanied by delays during Sysdig user logins of approximately 30 seconds followed by a login failure with an <span class="bold bold"><strong> <code class="code">HTTP 504</code> </strong></span> error message shown in the login screen. If this occurs, contact Sysdig support for assistance.</p></li></ul></div></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-72a67b43-b37f-c51b-82a0-fcc3c77f62f5"><div class="titlepage"><div><div class="title"><h3 class="title">Creating LDAP Users Before They Login</h3></div></div></div><p>The default behavior of the LDAP feature is to create a new record in the Sysdig user database when a user authenticates successfully via LDAP for the first time. However, it may be desirable to add such user records in advance of their first login, such as if you wish to use automation to change user permissions, assign team membership, or pre-populate Dashboard/Alert configurations. A <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/updated-ldap-settings/user_creation/create_user.sh" target="_blank"> <span class="bold bold"><strong> <code class="code">create_user.sh</code> </strong></span> </a> helper script is available in the <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/tree/updated-ldap-settings/user_creation" target="_blank">sysdig-cloud-scripts</a> </code> </strong></span> repository to create such user records via the API. This script can also be used to enable/disable this functionality in the Sysdig platform. See the <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/blob/master/user_creation/README.md" target="_blank">README</a> for details.</p><p>Additional details regarding this type of user creation in conjunction with LDAP authentication:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>This method allows creation of <span class="italic italic">any</span> username, even if it doesn't currently exist in the directory that is queried via LDAP.</p></li><li class="listitem"><p>When LDAP authentication is enabled, such users can be created with a simple username (e.g. <span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span>) or with an email-style postfix (as is typical for non-LDAP Sysdig user, e.g. <span class="bold bold"><strong> <code class="code"> <a class="link" href="mailto:jdoe@example.com" target="_blank">jdoe@example.com</a> </code> </strong></span>). In this latter case only the username portion (<span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span>) is used when the Sysdig platform is performing an LDAP query during attempted login.</p></li><li class="listitem"><p>While the <span class="bold bold"><strong> <code class="code">password</code> </strong></span> must be included in the config you <span class="bold bold"><strong> <code class="code">POST</code> </strong></span> to create the user, it is not used by the Sysdig platform when LDAP is enabled, as authentication will always be performed via LDAP. For this same reason, if a user has been created in this way, they will not be able to login unless there is a matching user in the directory that is queried via LDAP.</p></li><li class="listitem"><p>The <span class="bold bold"><strong> <code class="code">firstName</code> </strong></span> and <span class="bold bold"><strong> <code class="code">lastName</code> </strong></span> values as specified in the example are optional and independent from any equivalent name settings in the directory that is queried via LDAP.</p></li></ul></div></section></section><section xml:lang="en" dir="ltr" class="section xinclude lang-en xinclude" data-origin-id="" data-publication-date="" id="UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-f3a63952-a909-fa8f-d24e-e4b83aa4f2d5"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Limitations and Caveats</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>LDAP support has been tested with Active Directory in Windows Server 2012 R2. It may work with AD versions that ship with other versions of Windows, or other directory servers that use the LDAP protocol. If you are intending to use LDAP with something other than Active Directory, please contact Sysdig Support.</p></li><li class="listitem"><p>The LDAP feature is only present in Sysdig software platform installs (not the SaaS version).</p></li><li class="listitem"><p>Only one LDAP config can exist per deployment (i.e. the platform can only query one directory server endpoint).</p></li><li class="listitem"><p>Because the Sysdig software platform is based on the same technology as the SaaS-based Sysdig service, it theoretically supports the configuration of multiple “customers” using the same install. However, the multi-customer option is not supported when the LDAP feature is enabled.</p></li><li class="listitem"><p>When LDAP authentication is enabled, adding users via email "invites" is not possible.</p></li><li class="listitem"><p>LDAP authentication for directory usernames that begin or end with a space character (e.g. <span class="bold bold"><strong> <code class="code">" jdoe"</code> </strong></span> or <span class="bold bold"><strong> <code class="code">"jdoe "</code> </strong></span>) are not supported.</p></li><li class="listitem"><p>Configuration entries that contain special characters (for instance, a <span class="bold bold"><strong> <code class="code">managerPassword</code> </strong></span> that contains a backslash character) are supported, but note that you will need to perform proper JSON escaping in the configuration you <span class="bold bold"><strong> <code class="code">POST</code> </strong></span> to the API. If you attempt to post invalid JSON, the helper scripts will return an error message. If this occurs, you can use tools such as <a class="link" href="https://jsonlint.com/" target="_blank">JSONLint</a> to narrow down the source of the problem and/or <a class="link" href="https://www.freeformatter.com/json-escape.html" target="_blank">JSON String Escape</a> to learn how to properly escape your text.</p></li><li class="listitem"><p>The LDAP feature does not attempt any ongoing “sync” back from the Sysdig platform user database to the directory server. Note how this impacts the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>If a user is deleted from the directory server, their user record will remain in the Sysdig user database until a Sysdig Admin deletes it. Of course, that user will not be able to login since they will no longer be able to authenticate successfully via LDAP.</p></li><li class="listitem"><p>If an Admin deletes a user from the Sysdig user database, but the user can still authenticate successfully via LDAP, their Sysdig user record will be recreated if they login again via LDAP.</p></li><li class="listitem"><p>If a person’s username should change in the directory server (e.g. the value for <span class="bold bold"><strong> <code class="code">sAMAccountName</code> </strong></span> in our examples above), the next time they login, a new user record will be created for them in the Sysdig user database. Settings they previously had in the Sysdig platform such as Admin rights and Alerts/Dashboard configurations will not be present for this recreated user.</p></li></ul></div></li><li class="listitem"><p>Other LDAP-centric functionality that is not currently supported (not an exhaustive list):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Mapping a user in the directory server to the <a class="link" href="43209-find-the-super-admin-credentials-and-api-token.html" title="Find the Super Admin Credentials and API Token">Sysdig "super" Admin</a> (such as to avoid the need to configure the this "super" Admin user).</p></li><li class="listitem"><p>Session expiry based on configuration in the directory server (such as to set a user account to only be valid until a certain date).</p></li><li class="listitem"><p>Login policies based on configuration in the directory server (such as to restrict login to certain hours).</p></li><li class="listitem"><p>User timeout functionality (such as to remove a user from the Sysdig user database if they have not logged in for a certain amount of time).</p></li></ul></div></li></ul></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9">LDAP Authentication Configuration (for Platform v.1586)</a></li><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-8b9999ff-7aa9-3005-9df4-359d5a49e6ea">Overview</a><ul class="nav"><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-8ae66a0d-4a67-3420-42cd-85a00c378eb3">Functionality</a></li><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-0b5b44ef-2bf0-79b1-17da-246a7c71083b">Prerequisite: Have the "Super" Admin User Credentials and Token</a></li></ul></li><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-6e54658b-0bf5-e4fb-e3d1-db9939322e82">Configure Basic LDAP Settings</a><ul class="nav"><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-c40ad2bc-afa2-60ef-0cb4-7c088e1db160">UI-Based: Configure LDAP in Settings</a><ul class="nav"></ul></li><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-ba185af8-4238-a374-218b-eb3375a2cbab">Script-Based: Configure LDAP Using Scripts</a><ul class="nav"></ul></li></ul></li><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-47bfb3c2-90f7-b817-c0c0-f0a5d0dd0fe5">User Experience</a></li><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-5660f348-ea77-359d-dd51-e0f98957416f">Advanced Use Cases</a><ul class="nav"><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-7961019b-9943-9106-8144-606dc8963c44">Multi-Server Directories</a></li><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-72a67b43-b37f-c51b-82a0-fcc3c77f62f5">Creating LDAP Users Before They Login</a></li></ul></li><li><a href="#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-f3a63952-a909-fa8f-d24e-e4b83aa4f2d5">Limitations and Caveats</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div><div id="email-feedback" class=" toggle-feedback"><p><a href='mailto:radhika@sysdig.com?subject=Feedback for help topic "LDAP Authentication Configuration (for Platform v.1586)"&amp;body=%0D%0A_______________________%0D%0A%0D%0A
			
			Please add your feedback above for topic "LDAP Authentication Configuration (for Platform v.1586)" in the publication "Sysdig Platform".'><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon voting-feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="43271-ldap.html#UUID-9cb9eaa0-5203-5aa8-519c-39113ab2ef58_UUID-46078228-f2a8-d11f-dd6f-c841e204bf78">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="43275-ldap-authentication-configuration--for-platform-v-1586-.html#UUID-d1ca7808-7da8-613d-b824-ec812d4ae2e9_UUID-8b9999ff-7aa9-3005-9df4-359d5a49e6ea">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
