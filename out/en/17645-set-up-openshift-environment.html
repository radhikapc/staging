<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Set up OpenShift Environment</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d6593bb1e613.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="17644-sysdig-install-on-openshift--v1929--.html" title="Sysdig Install on OpenShift (v1929+)"></link><link rel="next" href="17646-install-components-on-openshift.html" title="Install Components on OpenShift"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {
				/**
				 * @type {array}
				 */
				var supported = hljs.listLanguages();

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}

					if (language && $.inArray(language, supported) > -1) {
						var c = hljs.highlight(language, $(this).text());
						$(this)
							.empty()
							.append(c.value)
							.addClass("hljs")
							.addClass(c.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="17625-sysdig-platform.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d7f578b2-c960-970c-a969-10cebb31d199" data-permalink="17625-sysdig-platform.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Platform</a><ul><li><a href="17626-on-premises-deployments.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-b0fbda15-008f-f5ef-e82b-44edcdbddf2f" data-permalink="17626-on-premises-deployments.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> On-Premises Deployments</a><ul><li><a href="17627-architecture---system-requirements.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cd539f11-f1ce-b46c-2e31-33817e7fbcfe" data-permalink="17627-architecture---system-requirements.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Architecture &amp; System Requirements</a></li><li><a href="17636-on-premises-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-f3f2b80c-ab17-0417-e900-5e28acb4e13d" data-permalink="17636-on-premises-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Installation</a></li><li><a href="17660-on-premises-upgrades.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-56e8e98a-2ab4-6b39-ba6e-35eee1e169cc" data-permalink="17660-on-premises-upgrades.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Upgrades</a></li><li><a href="17672-find-the-super-admin-credentials-and-api-token.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cb40fc4f-b85a-8739-4a4e-0a9009419723" data-permalink="17672-find-the-super-admin-credentials-and-api-token.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find the Super Admin Credentials and API Token</a></li><li><a href="17674-upgrade-an-on-premises-license.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ec730506-5804-f830-4a75-644e44406dff" data-permalink="17674-upgrade-an-on-premises-license.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Upgrade an On-Premises License</a></li><li><a href="17675-securing-elasticsearch.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-e5a2a6fa-12cf-e145-8643-4d17b5e5e809" data-permalink="17675-securing-elasticsearch.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Elasticsearch</a></li><li><a href="17677-securing-cassandra.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-e0ca8e47-108a-cdd2-9661-7a7a53b9da47" data-permalink="17677-securing-cassandra.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Cassandra</a></li><li><a href="17678-authentication-and-authorization--on-prem-options-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-059259c5-41cc-52f1-27db-8692bce591a4" data-permalink="17678-authentication-and-authorization--on-prem-options-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (On-Prem Options)</a></li><li><a href="17700---backup-and-restore-best-practices--.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-86ef3d03-037d-7aac-2390-c43096ed0cde" data-permalink="17700---backup-and-restore-best-practices--.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Backup and Restore Best Practices**</a></li></ul></li><li><a href="17701-sysdig-agent.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ee770b85-3c82-28cf-48e0-a38a6f973bc1" data-permalink="17701-sysdig-agent.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Agent</a><ul><li><a href="17703-host-requirements-for-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-813a9695-5e30-e72f-2e2c-26c84ddecb33" data-permalink="17703-host-requirements-for-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Host Requirements for Agent Installation</a></li><li><a href="17705-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-1bbdf1e4-3277-cf2c-d247-de7a1d067e70" data-permalink="17705-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation</a></li><li><a href="17720-agent-configuration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5595fb10-5c8e-1d38-1652-275b75d701cf" data-permalink="17720-agent-configuration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Configuration</a></li><li><a href="17740-agent-upgrade.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-a2991ad8-39da-4686-6ca1-d0838e93e523" data-permalink="17740-agent-upgrade.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Upgrade</a></li><li><a href="17741---agent-stop---start---disable---remove.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-34276f78-88ad-274e-0736-c6ccf91b5aaa" data-permalink="17741---agent-stop---start---disable---remove.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Agent Stop | Start | Disable | Remove</a></li><li><a href="17742-agent-uninstall.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ead96597-570b-8e87-7eef-ce217e0b7b3b" data-permalink="17742-agent-uninstall.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Uninstall</a></li><li><a href="17744-troubleshooting-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-4c9eb77e-478d-6fe5-84d3-3e8f86cd8cb7" data-permalink="17744-troubleshooting-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Troubleshooting Agent Installation</a></li><li><a href="17745---copy-of-host-requirements-for-agent-installation--.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5fed75f2-49db-93e2-69e1-12a3100c50c6" data-permalink="17745---copy-of-host-requirements-for-agent-installation--.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Copy of Host Requirements for Agent Installation**</a></li></ul></li><li><a href="17746-administration-settings.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-79535d85-dcdb-4dfd-1b55-de1edacb346d" data-permalink="17746-administration-settings.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Administration Settings</a><ul><li><a href="17748-user-profile-and-password.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-07096ea3-1ed7-934f-683e-9d0000edc6f7" data-permalink="17748-user-profile-and-password.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User Profile and Password</a></li><li><a href="17750-user-and-team-administration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-c24fe2df-c073-159f-5ad6-cd18bc15c2d3" data-permalink="17750-user-and-team-administration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User and Team Administration</a></li><li><a href="17755-notifications-management.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-156d27b4-e0d2-ec69-bac9-5ec0500ca128" data-permalink="17755-notifications-management.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Notifications Management</a></li><li><a href="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-6d00fdd3-1f49-e49e-bb0b-556c377d07ac" data-permalink="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">AWS: Integrate AWS Account and CloudWatch Metrics (Optional)</a></li><li><a href="17771-storage--configure-aws-capture-file-storage--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d7ff24b5-cfc5-ac9d-767d-ef7dc9d2d9c5" data-permalink="17771-storage--configure-aws-capture-file-storage--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Storage: Configure AWS Capture File Storage (Optional)</a></li><li><a href="17772-find-your-customer-number.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-703bf9f7-20e0-a6e2-cecc-f5a66cbcd977" data-permalink="17772-find-your-customer-number.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find Your Customer Number</a></li><li><a href="17774-agent-installation--overview-and-key.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2d64062a-c3ab-484f-5b45-3b0ef8b3b5b8" data-permalink="17774-agent-installation--overview-and-key.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation: Overview and Key</a></li><li><a href="17775-subscription--change-number-of-licensed-agents.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5d8a57ce-6bd9-b5f6-6460-17b233e4facc" data-permalink="17775-subscription--change-number-of-licensed-agents.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Subscription: Change Number of Licensed Agents</a></li><li><a href="17779-authentication-and-authorization--saas-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-91fa12e3-2fc9-97ab-1bf8-6d9830e4ad84" data-permalink="17779-authentication-and-authorization--saas-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (SaaS)</a></li></ul></li><li><a href="17794-get-help---using-sysdig-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-712b3b75-2584-30e3-5bd9-e1e57d3d8756" data-permalink="17794-get-help---using-sysdig-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Get Help | Using Sysdig Support</a><ul><li><a href="17795-self-help.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-39aa92d8-58c3-29d4-582f-4561a368c52f" data-permalink="17795-self-help.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Self-Help</a></li><li><a href="17797-contact-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-65fd6b5e-1ab7-6714-888b-95192ae78a5d" data-permalink="17797-contact-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Contact Support</a></li><li><a href="17802-terms-of-use.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-b854f38e-12bc-b1af-1c03-372f7a4234d1" data-permalink="17802-terms-of-use.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Terms of Use</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">SP (Sysdig Platform)</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="17644-sysdig-install-on-openshift--v1929--.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="17646-install-components-on-openshift.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">SP (Sysdig Platform)</span></li><li class="breadcrumb-link"><a href="17625-sysdig-platform.html">Sysdig Platform</a></li><li class="breadcrumb-link"><a href="17626-on-premises-deployments.html">On-Premises Deployments</a></li><li class="breadcrumb-link"><a href="17636-on-premises-installation.html">On-Premises Installation</a></li><li class="breadcrumb-link"><a href="17644-sysdig-install-on-openshift--v1929--.html">Sysdig Install on OpenShift (v1929+)</a></li><li class="breadcrumb-node">Set up OpenShift Environment</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-28609975-8b4b-9368-1ae3-da55e455c659" data-permalink="17645-set-up-openshift-environment.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Set up OpenShift Environment</h1></div></div></div><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Prerequisites" class="bridgehead">Prerequisites</h7><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Overview" class="bridgehead">Overview</h7><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Access to a running OpenShift 3.11+ instance</p></li><li class="listitem"><p>Two items from your Sysdig purchase-confirmation email:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Your Sysdig license key</p></li><li class="listitem"><p>Your Sysdig <a class="link" href="http://quay.io" target="_blank">quay.io</a> pull secret</p></li></ul></div></li><li class="listitem"><p> <code class="code">octools</code> installed on your machine and communicating with the OpenShift cluster. (Note that your <code class="code">oc</code> and OpenShift versions should match to avoid errors.)</p></li></ul></div><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-DNSPreparation" class="bridgehead">DNS Preparation</h7><p>If you want more information on OpenShift's DNS requirements; see the OpenShift <a class="link" href="">documentation</a>.</p><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Option1DNSwithoutWildcard" class="bridgehead">Option 1: DNS without Wildcard</h7><p>You need to request two different DNS records from your DNS team: one for the Sysdig API/UI and another for the Sysdig collector. These records should point to your infrastructure nodes and are the two routes that will be exposed, i.e., <code class="code"> <a class="link" href="http://sysdig.api.example.com" target="_blank">sysdig.api.example.com</a> </code> and <code class="code"> <a class="link" href="http://sysdig.collector.example.com" target="_blank">sysdig.collector.example.com</a> </code>.</p><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Option2DNSwithWildcard" class="bridgehead">Option 2: DNS with Wildcard</h7><p>With wildcard DNS, you do not have to make an official request from the DNS team. Your implementation team can pick any two DNS names to use for the API/UI and Collector. These will be exposed to the infrastructure nodes once the configuration is completed. (i.e. <code class="code"> <a class="link" href="http://sysdig.api.example.com" target="_blank">sysdig.api.example.com</a> </code> and <code class="code"> <a class="link" href="http://sysdig.collector.example.com" target="_blank">sysdig.collector.example.com</a> </code>.)</p><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-SSLCertificatePreparation" class="bridgehead">SSL Certificate Preparation</h7><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step5SetUpSSLConnectivitytotheBackend" title="Step 5 Set Up SSL Connectivity to the Backend">Step 5 Set Up SSL Connectivity to the Backend</a> discusses how to implement SSL; decide ahead of time whether you will use SSL with wildcard or without.</p><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-SSLwithWildcard" class="bridgehead">SSL with Wildcard</h7><p>With wildcard SSL, you use the same certificate for both the API and the collector.</p><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-SSLwithoutWildcard" class="bridgehead">SSL without Wildcard</h7><p>You need two SSL certs, one for each DNS record.</p><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-PreparetheEnvironment" class="bridgehead">Prepare the Environment</h7><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step1DownloadandUnpacktheLatestRelease" class="bridgehead">Step 1 Download and Unpack the Latest Release</h7><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Download the latest release from <span class="underline underline"> <a class="link" href="https://github.com/draios/sysdigcloud-kubernetes/releases/latest" target="_blank">https://github.com/draios/sysdigcloud-kubernetes/releases/latest</a> </span> </p></li><li class="step"><p>Unpack the .tar ball.</p><p>The source link has the format: <code class="code">https://github.com/draios/sysdigcloud-kubernetes/archive/&lt;v1234&gt;.tar.gz. </code>To unpack it, run the following commands (replacing version number as appropriate):</p><pre class="programlisting">wget https://github.com/draios/sysdigcloud-kubernetes/archive/&lt;v1234&gt;.tar.gz
tar zxf &lt;v1234&gt;.tar.gz
cd sysdigcloud-kubernetes-&lt;1234&gt;</pre></li><li class="step"><p>Create a new project called <code class="code">sysdigcloud</code> and copy the cloned folders into it:</p><pre class="programlisting">oc new-project sysdigcloud</pre></li><li class="step"><p>Apply the correct security contexts to the namespace. (This allows you to run privileged containers in the sysdigcloud namespace)</p><pre class="programlisting">oc adm policy add-scc-to-user anyuid -n sysdigcloud -z default
oc adm policy add-scc-to-user privileged -n sysdigcloud -z default</pre></li></ol></div><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step2ConfigureBackendComponents" class="bridgehead">Step 2 Configure Backend Components</h7><p> <a class="link" href="https://raw.githubusercontent.com/draios/sysdigcloud-kubernetes/master/sysdigcloud/config.yaml" target="_blank">The ConfigMap (<code class="code">config.yaml</code>)</a> is populated with information about usernames, passwords, SSL certs, and various application-specific settings.</p><p>The steps below give the minimum edits that should be performed in a test environment.</p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p>It is necessary to review and customize the entries in <code class="code">config.yaml</code> before launching in a production environment.</p><p>See <a class="link" href="">Sysdig Install on OpenShift (v. 1929+)#Making Configuration Changes</a> for the <code class="code">oc</code> format to use for post-install edits, such as <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/206503992/Authentication+and+Authorization+On-Prem+Options" target="_blank">adding third-party authenticators</a> like LDAP.</p></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p> <span class="bold bold"><strong>Add your license key:</strong></span> </p><p>In <code class="code">config.yaml,</code> enter the key that was emailed to you in the following parameter:</p><pre class="programlisting"># Required: Sysdig Cloud license
  sysdigcloud.license: ""</pre></li><li class="step"><p> <span class="bold bold"><strong>Change the super admin name and password,</strong></span> which are the super admin credentials for the entire system. See <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/206569685/Find+the+Super+Admin+Credentials+and+API+Token" target="_blank">here</a> for details.</p><p>Find the settings in <code class="code">config.yaml</code> here:</p><pre class="programlisting"> sysdigcloud.default.user: test@sysdig.com
  # Required: Sysdig Cloud super admin user password
  # NOTE: Change upon first login
  sysdigcloud.default.user.password: test</pre></li><li class="step"><p> <span class="bold bold"><strong>Edit the collector endpoint and API URL:</strong></span>Change the placeholder to point to the DNS names you have established for Sysdig.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Remember that you must have defined one name for the collector and another for the API URL. See <a class="link" href="">Sysdig Install on OpenShift (v. 1929+)#Prerequisites</a>, above.</p></div><p>Note: Change the collector port to 443.</p><pre class="programlisting">collector.endpoint: &lt;COLLECTOR_DNS_NAME&gt;
collector.port: "443"
api.url: https://&lt;API_DNS_NAME&gt;:443</pre></li><li class="step"><p> <span class="bold bold"><strong>Recommended: edit the file to set the JVM options</strong></span> for Cassandra, Elasticsearch, and API, worker, and collector as well.</p><p>(To use the AWS implicit key, edit the JVM options as described in <a class="link" href="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" title="AWS: Integrate AWS Account and CloudWatch Metrics (Optional)">AWS: Integrate AWS Account and CloudWatch Metrics (Optional)</a>.)</p><p>For installations over 100 agents, it is recommended to allocate 8 GB of heap per JVM.</p><pre class="programlisting">  cassandra.jvm.options: "-Xms8G -Xmx8G"
  elasticsearch.jvm.options: "-Xms8G -Xmx8G"
  sysdigcloud.jvm.api.options: "-Xms4G -Xmx8G"
  sysdigcloud.jvm.worker.options: "-Xms4G -Xmx8G"
  sysdigcloud.jvm.collector.options: "-Xms4G -Xmx8G"</pre><p> <span class="bold bold"><strong>Note: If you do not wish to use SSL between the agent and the collector, use the following settings instead: </strong></span> </p><pre class="programlisting">cassandra.jvm.options: "-Xms8G -Xmx8G"
elasticsearch.jvm.options: "-Xms8G -Xmx8G"
sysdigcloud.jvm.api.options: "-Xms8G -Xmx8G -Ddraios.agents.installParams.sslEnabled=false"
sysdigcloud.jvm.worker.options: "-Xms8G -Xmx8G -Ddraios.agents.installParams.sslEnabled=false"
sysdigcloud.jvm.collector.options: "-Xms8G -Xmx8G -Ddraios.agents.installParams.sslEnabled=false"</pre></li><li class="step"><p> <span class="bold bold"><strong>Deploy the configuration maps and secrets</strong></span> for all services by running the commands:</p><p> <span class="bold bold"><strong>For Sysdig Monitor: </strong></span> </p><pre class="programlisting">oc -n sysdigcloud apply -f sysdigcloud/config.yaml</pre></li><li class="step"><p> <span class="bold bold"><strong>(For Sysdig Secure only) Edit and apply secrets for Anchore and the scanning component:</strong></span>Edit the<code class="code">yaml</code> files<code class="code">:</code> </p><p> <code class="code">scanning-secrets.yaml</code> </p><pre class="programlisting">stringData:
  scanning.mysql.password: change_me</pre><p> <code class="code">anchore-secrets yaml</code> </p><pre class="programlisting">stringData:
  anchore.admin.password: change_me
  anchore.db.password: change_me</pre><p>Then apply the files:</p><pre class="programlisting">oc -n sysdigcloud apply -f sysdigcloud/scanning-secrets.yaml
oc -n sysdigcloud apply -f sysdigcloud/anchore-secrets.yaml</pre></li><li class="step"><p> <span class="bold bold"><strong>Edit the API DNS name</strong></span> in either <code class="code">api-ingress.yaml</code> or <code class="code">api-ingress-with-secure.yaml</code> (if using Secure).</p><p>The files are located in <code class="code">sysdigcloud/</code> </p><pre class="programlisting"> spec:
   rules:
     - host: &lt;API_DNS_NAME&gt;
...

 tls:
     - hosts:
         - &lt;API_DNS_NAME&gt;
       secretName: sysdigcloud-ssl-secret</pre></li><li class="step"><p> <span class="bold bold"><strong>Edit the collector DNS name in the file </strong></span> <code class="code">openshift-collector-router.yaml</code>. Use the collector DNS name you created in the Prerequisites.</p><p>The file is located in <code class="code">sysdigcloud/openshift/</code>.</p><pre class="programlisting">spec:
  host: &lt;COLLECTOR_DNS_NAME&gt;</pre></li></ol></div><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step3Secure-OnlyEditmysql-deploymentyaml" class="bridgehead">Step 3 (Secure-Only): Edit mysql-deployment.yaml</h7><p>If using Sysdig Secure :</p><p> <span class="bold bold"><strong>Edit the MySQL deployment to uncomment the MYSQL_EXTRADB_* environment variables.</strong></span> This forces MySQL to create the necessary scanning database on startup.</p><p>File location: <code class="code">datastores/as_kubernetes_pods/manifests/mysql/mysql-deployment.yaml </code> </p><pre class="programlisting"> - name: MYSQL_EXTRADB_SCANNING_DBNAME
              valueFrom:
                configMapKeyRef:
                  name: sysdigcloud-config
                  key: scanning.mysql.dbname
            - name: MYSQL_EXTRADB_SCANNING_USER
              valueFrom:
                configMapKeyRef:
                  name: sysdigcloud-config
                  key: scanning.mysql.user
            - name: MYSQL_EXTRADB_SCANNING_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: sysdigcloud-scanning
                  key: scanning.mysql.password
</pre><p> <code class="code"></code> </p><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p>The scanning service will not start unless MySQL creates the scanning database.</p></div><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step4DeployYourQuayPullSecret" class="bridgehead">Step 4 Deploy Your Quay Pull Secret</h7><p>A specific Quay pull secret is sent via email with your license key.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p> <span class="bold bold"><strong>Edit the file <code class="code">sysdigcloud/pull-secret.yaml</code> </strong></span> and change the place holder <code class="code">&lt;PULL_SECRET&gt;</code> with the provided pull secret.</p><pre class="programlisting">vi sysdigcloud/pull-secret.yaml
 
    ---
    apiVersion: v1
    kind: Secret
    metadata:
    name: sysdigcloud-pull-secret
    data:
    .dockerconfigjson: &lt;PULL_SECRET&gt;
    type: kubernetes.io/dockerconfigjson</pre></li><li class="step"><p> <span class="bold bold"><strong>Deploy the pull secret object:</strong></span> </p><pre class="programlisting">oc -n sysdigcloud apply -f sysdigcloud/pull-secret.yaml</pre></li></ol></div><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step5SetUpSSLConnectivitytotheBackend" class="bridgehead">Step 5 Set Up SSL Connectivity to the Backend</h7><p>SSL-secured communication is used between user browsers and the Sysdig API server(s), and between the Sysdig agent and the collectors.</p><p>To set this up, you must:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Use an existing wildcard SSL certificate and key, or</p></li><li class="listitem"><p>Use existing standard certs for API and collector, or</p></li><li class="listitem"><p>Create self-signed certificates and keys for API and collector</p></li></ul></div><div dir="ltr" class="warning warning"><h3 class="title">Warning</h3><p>If you are not using wildcard SSL, you have to use two separate certificates, one for API URL and one for the collector.</p></div><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-TodisableSSLbetweenagentandcollector" class="bridgehead">To disable SSL between agent and collector:</h7><p>To disable SSL between agent and collectors, you <a class="link" href="">set a JVM option when configuring backend components</a>.</p><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Tocreateself-signedcerts" class="bridgehead">To create self-signed certs:</h7><p>Run these commands (edit to add your <code class="code">API_DNS_NAME </code>and <code class="code">COLLECTOR_DNS_NAME</code>):</p><pre class="programlisting">openssl req -new -newkey rsa:2048 -days 3650 -nodes -x509 -subj "/C=US/ST=CA/L=SanFrancisco/O=ICT/CN=&lt;API_DNS_NAME&gt;" -keyout server.key -out server.crt
openssl req -new -newkey rsa:2048 -days 3650 -nodes -x509 -subj "/C=US/ST=CA/L=SanFrancisco/O=ICT/CN=&lt;COLLECTOR_DNS_NAME&gt;" -keyout collector.key -out collector.crt</pre><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Touseanexistingwildcardcert" class="bridgehead">To use an existing wildcard cert:</h7><p>Obtain the respective <code class="code">server.crt</code> and <code class="code">server.key</code> files.</p><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-TocreateKubernetessecretsforthecerts" class="bridgehead">To create Kubernetes secrets for the certs:</h7><p> <span class="bold bold"><strong>With Wildcard</strong></span> </p><p>Uses the same certificate for both the API/UI and the collector.</p><p>Run these commands:</p><pre class="programlisting">oc -n sysdigcloud create secret tls sysdigcloud-ssl-secret --cert=server.crt --key=server.key
oc -n sysdigcloud create secret tls sysdigcloud-ssl-secret-collector --cert=server.crt --key=server.key</pre><p> <span class="bold bold"><strong>Without Wildcard</strong></span> </p><p>Uses two different certificates, one for the API/UI, and one for the collector.</p><p>Run these commands:</p><pre class="programlisting">oc -n sysdigcloud create secret tls sysdigcloud-ssl-secret --cert=server.crt --key=server.key
oc -n sysdigcloud create secret tls sysdigcloud-ssl-secret-collector --cert=collector.crt --key=collector.key</pre><h7 id="UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step6OptionalUseCACertsforExternalSSLConnections" class="bridgehead">Step 6 (Optional): Use CA Certs for External SSL Connections</h7><p>The Sysdig platform may sometimes open connections over SSL to certain external services, including:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>LDAP over SSL</p></li><li class="listitem"><p>SAML over SSL</p></li><li class="listitem"><p>OpenID Connect over SSL</p></li><li class="listitem"><p>HTTPS Proxies</p></li></ul></div><p>If the signing authorities for the certificates presented by these services are not well-known to the Sysdig Platform (e.g., if you maintain your own Certificate Authority), they are not trusted by default.</p><p>To allow the Sysdig platform to trust these certificates, use the command below to upload one or more PEM-format CA certificates. You must ensure you've uploaded all certificates in the CA approval chain to the root CA.</p><pre class="programlisting">oc -n sysdigcloud create secret generic sysdigcloud-java-certs --from-file=certs1.crt --from-file=certs2.crt </pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Prerequisites" title="Prerequisites">Prerequisites </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Overview" title="Overview">Overview</a> </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-DNSPreparation" title="DNS Preparation">DNS Preparation </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Option1DNSwithoutWildcard" title="Option 1: DNS without Wildcard">Option 1: DNS without Wildcard</a> </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Option2DNSwithWildcard" title="Option 2: DNS with Wildcard">Option 2: DNS with Wildcard </a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-SSLCertificatePreparation" title="SSL Certificate Preparation">SSL Certificate Preparation </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-SSLwithWildcard" title="SSL with Wildcard">SSL with Wildcard </a> </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-SSLwithoutWildcard" title="SSL without Wildcard">SSL without Wildcard </a> </p></li></ul></div></li></ul></div></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-PreparetheEnvironment" title="Prepare the Environment">Prepare the Environment</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step1DownloadandUnpacktheLatestRelease" title="Step 1 Download and Unpack the Latest Release">Step 1 Download and Unpack the Latest Release </a> </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step2ConfigureBackendComponents" title="Step 2 Configure Backend Components">Step 2 Configure Backend Components</a> </p></li><li class="listitem"><p> Step 3 (Secure-Only): Edit mysql-deployment.yaml  </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step4DeployYourQuayPullSecret" title="Step 4 Deploy Your Quay Pull Secret">Step 4 Deploy Your Quay Pull Secret </a> </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Step5SetUpSSLConnectivitytotheBackend" title="Step 5 Set Up SSL Connectivity to the Backend">Step 5 Set Up SSL Connectivity to the Backend </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-TodisableSSLbetweenagentandcollector" title="To disable SSL between agent and collector:">To disable SSL between agent and collector:</a> </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Tocreateself-signedcerts" title="To create self-signed certs:">To create self-signed certs: </a> </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-Touseanexistingwildcardcert" title="To use an existing wildcard cert:">To use an existing wildcard cert: </a> </p></li><li class="listitem"><p> <a class="link" href="17645-set-up-openshift-environment.html#UUID-a1da5f1a-9cda-5957-f96c-45ae81d84e1a_id_SetupOpenShiftEnvironment-TocreateKubernetessecretsforthecerts" title="To create Kubernetes secrets for the certs:">To create Kubernetes secrets for the certs: </a> </p></li></ul></div></li><li class="listitem"><p> Step 6 (Optional): Use CA Certs for External SSL Connections  </p></li></ul></div></li></ul></div></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="17644-sysdig-install-on-openshift--v1929--.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="17646-install-components-on-openshift.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
