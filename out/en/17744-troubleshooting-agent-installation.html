<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Troubleshooting Agent Installation</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d6593bb1e613.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="17742-agent-uninstall.html#UUID-bef8a1a9-507e-23ba-bc30-09e8b639350d_id_AgentUninstall-FedoraCentOSRHELAmazonAMIAmazonLinux2Distributions" title="Fedora/CentOS/RHEL/Amazon AMI/ Amazon Linux 2 Distributions"></link><link rel="next" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-DisconnectingAgents" title="Disconnecting Agents"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {
				/**
				 * @type {array}
				 */
				var supported = hljs.listLanguages();

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}

					if (language && $.inArray(language, supported) > -1) {
						var c = hljs.highlight(language, $(this).text());
						$(this)
							.empty()
							.append(c.value)
							.addClass("hljs")
							.addClass(c.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="17625-sysdig-platform.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d7f578b2-c960-970c-a969-10cebb31d199" data-permalink="17625-sysdig-platform.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Platform</a><ul><li><a href="17626-on-premises-deployments.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-b0fbda15-008f-f5ef-e82b-44edcdbddf2f" data-permalink="17626-on-premises-deployments.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> On-Premises Deployments</a><ul><li><a href="17627-architecture---system-requirements.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cd539f11-f1ce-b46c-2e31-33817e7fbcfe" data-permalink="17627-architecture---system-requirements.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Architecture &amp; System Requirements</a></li><li><a href="17636-on-premises-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-f3f2b80c-ab17-0417-e900-5e28acb4e13d" data-permalink="17636-on-premises-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Installation</a></li><li><a href="17660-on-premises-upgrades.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-56e8e98a-2ab4-6b39-ba6e-35eee1e169cc" data-permalink="17660-on-premises-upgrades.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Upgrades</a></li><li><a href="17672-find-the-super-admin-credentials-and-api-token.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cb40fc4f-b85a-8739-4a4e-0a9009419723" data-permalink="17672-find-the-super-admin-credentials-and-api-token.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find the Super Admin Credentials and API Token</a></li><li><a href="17674-upgrade-an-on-premises-license.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ec730506-5804-f830-4a75-644e44406dff" data-permalink="17674-upgrade-an-on-premises-license.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Upgrade an On-Premises License</a></li><li><a href="17675-securing-elasticsearch.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-e5a2a6fa-12cf-e145-8643-4d17b5e5e809" data-permalink="17675-securing-elasticsearch.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Elasticsearch</a></li><li><a href="17677-securing-cassandra.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-e0ca8e47-108a-cdd2-9661-7a7a53b9da47" data-permalink="17677-securing-cassandra.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Cassandra</a></li><li><a href="17678-authentication-and-authorization--on-prem-options-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-059259c5-41cc-52f1-27db-8692bce591a4" data-permalink="17678-authentication-and-authorization--on-prem-options-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (On-Prem Options)</a></li><li><a href="17700---backup-and-restore-best-practices--.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-86ef3d03-037d-7aac-2390-c43096ed0cde" data-permalink="17700---backup-and-restore-best-practices--.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Backup and Restore Best Practices**</a></li></ul></li><li><a href="17701-sysdig-agent.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ee770b85-3c82-28cf-48e0-a38a6f973bc1" data-permalink="17701-sysdig-agent.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Agent</a><ul><li><a href="17703-host-requirements-for-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-813a9695-5e30-e72f-2e2c-26c84ddecb33" data-permalink="17703-host-requirements-for-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Host Requirements for Agent Installation</a></li><li><a href="17705-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-1bbdf1e4-3277-cf2c-d247-de7a1d067e70" data-permalink="17705-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation</a></li><li><a href="17720-agent-configuration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5595fb10-5c8e-1d38-1652-275b75d701cf" data-permalink="17720-agent-configuration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Configuration</a></li><li><a href="17740-agent-upgrade.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-a2991ad8-39da-4686-6ca1-d0838e93e523" data-permalink="17740-agent-upgrade.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Upgrade</a></li><li><a href="17741---agent-stop---start---disable---remove.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-34276f78-88ad-274e-0736-c6ccf91b5aaa" data-permalink="17741---agent-stop---start---disable---remove.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Agent Stop | Start | Disable | Remove</a></li><li><a href="17742-agent-uninstall.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ead96597-570b-8e87-7eef-ce217e0b7b3b" data-permalink="17742-agent-uninstall.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Uninstall</a></li><li><a href="17744-troubleshooting-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-4c9eb77e-478d-6fe5-84d3-3e8f86cd8cb7" data-permalink="17744-troubleshooting-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Troubleshooting Agent Installation</a></li><li><a href="17745---copy-of-host-requirements-for-agent-installation--.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5fed75f2-49db-93e2-69e1-12a3100c50c6" data-permalink="17745---copy-of-host-requirements-for-agent-installation--.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Copy of Host Requirements for Agent Installation**</a></li></ul></li><li><a href="17746-administration-settings.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-79535d85-dcdb-4dfd-1b55-de1edacb346d" data-permalink="17746-administration-settings.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Administration Settings</a><ul><li><a href="17748-user-profile-and-password.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-07096ea3-1ed7-934f-683e-9d0000edc6f7" data-permalink="17748-user-profile-and-password.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User Profile and Password</a></li><li><a href="17750-user-and-team-administration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-c24fe2df-c073-159f-5ad6-cd18bc15c2d3" data-permalink="17750-user-and-team-administration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User and Team Administration</a></li><li><a href="17755-notifications-management.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-156d27b4-e0d2-ec69-bac9-5ec0500ca128" data-permalink="17755-notifications-management.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Notifications Management</a></li><li><a href="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-6d00fdd3-1f49-e49e-bb0b-556c377d07ac" data-permalink="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">AWS: Integrate AWS Account and CloudWatch Metrics (Optional)</a></li><li><a href="17771-storage--configure-aws-capture-file-storage--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d7ff24b5-cfc5-ac9d-767d-ef7dc9d2d9c5" data-permalink="17771-storage--configure-aws-capture-file-storage--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Storage: Configure AWS Capture File Storage (Optional)</a></li><li><a href="17772-find-your-customer-number.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-703bf9f7-20e0-a6e2-cecc-f5a66cbcd977" data-permalink="17772-find-your-customer-number.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find Your Customer Number</a></li><li><a href="17774-agent-installation--overview-and-key.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2d64062a-c3ab-484f-5b45-3b0ef8b3b5b8" data-permalink="17774-agent-installation--overview-and-key.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation: Overview and Key</a></li><li><a href="17775-subscription--change-number-of-licensed-agents.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5d8a57ce-6bd9-b5f6-6460-17b233e4facc" data-permalink="17775-subscription--change-number-of-licensed-agents.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Subscription: Change Number of Licensed Agents</a></li><li><a href="17779-authentication-and-authorization--saas-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-91fa12e3-2fc9-97ab-1bf8-6d9830e4ad84" data-permalink="17779-authentication-and-authorization--saas-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (SaaS)</a></li></ul></li><li><a href="17794-get-help---using-sysdig-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-712b3b75-2584-30e3-5bd9-e1e57d3d8756" data-permalink="17794-get-help---using-sysdig-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Get Help | Using Sysdig Support</a><ul><li><a href="17795-self-help.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-39aa92d8-58c3-29d4-582f-4561a368c52f" data-permalink="17795-self-help.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Self-Help</a></li><li><a href="17797-contact-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-65fd6b5e-1ab7-6714-888b-95192ae78a5d" data-permalink="17797-contact-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Contact Support</a></li><li><a href="17802-terms-of-use.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-b854f38e-12bc-b1af-1c03-372f7a4234d1" data-permalink="17802-terms-of-use.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Terms of Use</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">SP (Sysdig Platform)</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="17742-agent-uninstall.html#UUID-bef8a1a9-507e-23ba-bc30-09e8b639350d_id_AgentUninstall-FedoraCentOSRHELAmazonAMIAmazonLinux2Distributions">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-DisconnectingAgents">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">SP (Sysdig Platform)</span></li><li class="breadcrumb-link"><a href="17625-sysdig-platform.html">Sysdig Platform</a></li><li class="breadcrumb-link"><a href="17701-sysdig-agent.html">Sysdig Agent</a></li><li class="breadcrumb-node">Troubleshooting Agent Installation</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-4c9eb77e-478d-6fe5-84d3-3e8f86cd8cb7" data-permalink="17744-troubleshooting-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Troubleshooting Agent Installation</h1></div></div></div><p>This section describes methods for troubleshooting two types of issue:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Disconnecting Agents</p></li><li class="listitem"><p>Can't See Metrics After Agent Install</p></li></ul></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-DisconnectingAgents"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Disconnecting Agents</h2></div></div></div><p>If agents are disconnecting, there could be problems with addresses that need to be resolved in the agent configuration files. See also <a class="link" href="17722-understanding-the-agent-config-files.html" title="Understanding the Agent Config Files">Understanding the Agent Config Files</a>.</p><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckforDuplicateMACaddresses" class="bridgehead">Check for Duplicate MAC addresses</h6><p>The Sysdig agent will use the <code class="code">eth0</code> MAC address to identify the different hosts within an infrastructure. In a virtualized environment, you should confirm each of your VM's <code class="code">eth0</code> MAC addresses are unique.</p><p>If a unique address cannot be configured, you can supply an additional parameter in the Sysdig agent's <code class="code">dragent.yaml</code> configuration file: <code class="code">machine_id_prefix: prefix</code> </p><p>The prefix text can be any string and will be prepended to the MAC address as reported in the Sysdig Monitor web interface's Explore tables.</p><p> <span class="bold bold"><strong>Example:</strong></span> (using <code class="code">ADDITIONAL_CONF</code> rather than Kubernetes <code class="code">Configmap</code>)</p><p>Here is an example Docker run command installing the parameter via the <code class="code">ADDITIONAL_CONF</code> parameter</p><pre class="programlisting">docker run --name sysdig-agent --privileged --net host --pid host -e ACCESS_KEY=abc123-1234-abcd-4321-abc123def456 -e TAGS=tag1:value1 -e ADDITIONAL_CONF="machine_id_prefix: MyPrefix123-" -v /var/run/docker.sock:/host/var/run/docker.sock -v /dev:/host/dev -v /proc:/host/proc:ro -v /boot:/host/boot:ro -v /lib/modules:/host/lib/modules:ro -v /usr:/host/usr:ro sysdig/agent</pre><p>The resulting <code class="code">/opt/draios/etc/dragent.yaml</code> config file would look like this:</p><pre class="programlisting">customerid:abc123-1234-abcd-4321-abc123def456
tags: tag1:value1
machine_id_prefix: MyPrefix123-</pre><p>You will then see all of your hosts, provided that all the prefixes are unique. The prefix will be visible whenever the MAC address is displayed in any view.</p><p>See also: <a class="link" href="17720-agent-configuration.html" title="Agent Configuration">Agent Configuration</a>.</p><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckforConflictingMACaddressesinGKEenvironments" class="bridgehead">Check for Conflicting MAC addresses in GKE environments</h6><p>In Google Container Engine (GKE) environments, MAC addresses could be repeated across multiple hosts. This would cause some hosts running Sysdig agents not to appear in your web interface.</p><p>To address this, add a unique machine ID prefix to each config you use to <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/192348345/Agent+Install+Kubernetes+GKE+OpenShift" target="_blank">deploy the agent</a> to a given cluster (i.e. each <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/tree/master/agent_deploy/kubernetes" target="_blank">sysdig-daemonset.yaml</a> file).</p><p> <span class="bold bold"><strong>Note:</strong></span> This example uses the (<a class="link" href="">v1</a>) <code class="code">ADDITIONAL_CONF</code>, rather than (<a class="link" href="">v2</a>) <code class="code">Configmap</code> method.</p><p> <code class="code">- name: ADDITIONAL_CONF value: "machine_id_prefix: mycluster1-prefix-" </code> </p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CantSeeMetricsAfterAgentInstall"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Can't See Metrics After Agent Install</h2></div></div></div><p>If agents were successfully installed, you could log in to the Sysdig Monitor UI, but no metrics are displayed in the Explore panel, first confirm that the agent license count has not been exceeded. Then check for any proxy, firewall, or host security policies preventing proper agent communication to the Sysdig Monitor backend infrastructure.</p><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckLicenseCount" class="bridgehead">Check License Count</h6><p>If network connectivity is good, the agent will connect to the backend but will be disconnected after a few seconds if the license count has been exceeded.</p><p>To check whether you are over-subscribed, go to <span class="bold bold"><strong> <code class="code">Settings &gt; Subscription</code>.</strong></span> </p><p>See <a class="link" href="17775-subscription--change-number-of-licensed-agents.html" title="Subscription: Change Number of Licensed Agents">Subscription: Change Number of Licensed Agents</a> for details.</p><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckNetworkPolicy" class="bridgehead">Check Network Policy</h6><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-AgentConnectionPort" class="bridgehead">Agent Connection Port</h6><p>Check your service provider VPC security groups to verify that network ACLs are set to allow the agent's <span class="bold bold"><strong>outbound traffic over TCP port 6443</strong></span>.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>In earlier versions, the Sysdig Agent connected to port 6666. This behavior has been deprecated, as the Sysdig agent now connects to port 6443.</p></div><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-OutboundIPAddresses" class="bridgehead">Outbound IP Addresses</h6><p>Due to the distributed nature of the Sysdig Monitor infrastructure, the agent must be open for outbound connections to <span class="italic italic"> <a class="link" href="http://collector.sysdigcloud.com" target="_blank">collector.sysdigcloud.com</a> </span> on all outbound IP addresses.</p><p>Check <a class="link" href="https://ip-ranges.amazonaws.com/ip-ranges.json" target="_blank">Amazon’s public IP ranges file</a> to see all the potential IP addresses the Sysdig agent can use to communicate with the Sysdig backend databases.</p><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-TransparentProxies" class="bridgehead">Transparent Proxies</h6><p>While completely transparent proxies should work, non-transparent proxies (HTTP Proxies) will prevent proper communication.</p><p>You can troubleshoot basic connectivity from the Sysdig agent on your host to our backend with:</p><pre class="programlisting">ping collector.sysdigcloud.com
telnet collector.sysdigcloud.com 6443</pre><p>It should reply '<code class="code">connected</code>'.</p><p>(For on-premises installations, see <a class="link" href="17627-architecture---system-requirements.html" title="Architecture &amp; System Requirements">Architecture &amp; System Requirements</a> for more information on proxies.)</p><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-AWSMetadataEndpoint" class="bridgehead">AWS Metadata Endpoint</h6><p>AWS metadata is used for gathering information about the instance itself, such as instance id, public IP address, etc.</p><p>When running on an AWS instance, access to the following AWS metadata endpoint is also needed: 169.254.169.254</p><h6 id="UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckLocalHostPolicy" class="bridgehead">Check Local Host Policy</h6><p>The agent requires access to the following local system resources in order to gather metrics:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Read/Write access to <code class="code">/dev/sysdig</code> devices.</p></li><li class="listitem"><p>Read access to all the files under <code class="code">/proc</code> file system.</p></li><li class="listitem"><p>For container support, the Docker API endpoint <code class="code">/var/run/docker.sock</code> </p></li></ul></div><p>If any settings or firewall modifications are made, you may need to restart the agent service. In a shell on the affected instances issue the following command:</p><pre class="programlisting"><code class="code">sudo service dragent restart</code></pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-DisconnectingAgents" title="Disconnecting Agents">Disconnecting Agents </a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckforDuplicateMACaddresses" title="Check for Duplicate MAC addresses">Check for Duplicate MAC addresses</a> </p></li><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckforConflictingMACaddressesinGKEenvironments" title="Check for Conflicting MAC addresses in GKE environments">Check for Conflicting MAC addresses in GKE environments</a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CantSeeMetricsAfterAgentInstall" title="Can't See Metrics After Agent Install">Can't See Metrics After Agent Install</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckLicenseCount" title="Check License Count">Check License Count</a> </p></li><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckNetworkPolicy" title="Check Network Policy">Check Network Policy</a> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-AgentConnectionPort" title="Agent Connection Port">Agent Connection Port</a> </p></li><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-OutboundIPAddresses" title="Outbound IP Addresses">Outbound IP Addresses</a> </p></li><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-TransparentProxies" title="Transparent Proxies">Transparent Proxies</a> </p></li><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-AWSMetadataEndpoint" title="AWS Metadata Endpoint">AWS Metadata Endpoint </a> </p></li></ul></div></li><li class="listitem"><p> <a class="link" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CheckLocalHostPolicy" title="Check Local Host Policy">Check Local Host Policy</a> </p></li></ul></div></li></ul></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8">Troubleshooting Agent Installation</a></li><li><a href="#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-DisconnectingAgents">Disconnecting Agents</a></li><li><a href="#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-CantSeeMetricsAfterAgentInstall">Can't See Metrics After Agent Install</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="17742-agent-uninstall.html#UUID-bef8a1a9-507e-23ba-bc30-09e8b639350d_id_AgentUninstall-FedoraCentOSRHELAmazonAMIAmazonLinux2Distributions">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="17744-troubleshooting-agent-installation.html#UUID-96c5300a-763f-fb2e-e4fe-f4a211fd4ab8_id_TroubleshootingAgentInstallation-DisconnectingAgents">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
