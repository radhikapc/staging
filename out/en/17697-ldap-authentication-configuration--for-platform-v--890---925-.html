<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>LDAP Authentication Configuration (for Platform v. 890 - 925)</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d6593bb1e613.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="17696-ldap-authentication-configuration--for-platform-v--963---1091-.html" title="LDAP Authentication Configuration (for Platform v. 963 - 1091)"></link><link rel="next" href="17698-ldap-authentication-configuration--for-platform-v--858--.html" title="LDAP Authentication Configuration (for Platform v. 858-)"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {
				/**
				 * @type {array}
				 */
				var supported = hljs.listLanguages();

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}

					if (language && $.inArray(language, supported) > -1) {
						var c = hljs.highlight(language, $(this).text());
						$(this)
							.empty()
							.append(c.value)
							.addClass("hljs")
							.addClass(c.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="17625-sysdig-platform.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d7f578b2-c960-970c-a969-10cebb31d199" data-permalink="17625-sysdig-platform.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Platform</a><ul><li><a href="17626-on-premises-deployments.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-b0fbda15-008f-f5ef-e82b-44edcdbddf2f" data-permalink="17626-on-premises-deployments.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> On-Premises Deployments</a><ul><li><a href="17627-architecture---system-requirements.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cd539f11-f1ce-b46c-2e31-33817e7fbcfe" data-permalink="17627-architecture---system-requirements.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Architecture &amp; System Requirements</a></li><li><a href="17636-on-premises-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-f3f2b80c-ab17-0417-e900-5e28acb4e13d" data-permalink="17636-on-premises-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Installation</a></li><li><a href="17660-on-premises-upgrades.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-56e8e98a-2ab4-6b39-ba6e-35eee1e169cc" data-permalink="17660-on-premises-upgrades.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Upgrades</a></li><li><a href="17672-find-the-super-admin-credentials-and-api-token.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cb40fc4f-b85a-8739-4a4e-0a9009419723" data-permalink="17672-find-the-super-admin-credentials-and-api-token.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find the Super Admin Credentials and API Token</a></li><li><a href="17674-upgrade-an-on-premises-license.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ec730506-5804-f830-4a75-644e44406dff" data-permalink="17674-upgrade-an-on-premises-license.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Upgrade an On-Premises License</a></li><li><a href="17675-securing-elasticsearch.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-e5a2a6fa-12cf-e145-8643-4d17b5e5e809" data-permalink="17675-securing-elasticsearch.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Elasticsearch</a></li><li><a href="17677-securing-cassandra.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-e0ca8e47-108a-cdd2-9661-7a7a53b9da47" data-permalink="17677-securing-cassandra.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Cassandra</a></li><li><a href="17678-authentication-and-authorization--on-prem-options-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-059259c5-41cc-52f1-27db-8692bce591a4" data-permalink="17678-authentication-and-authorization--on-prem-options-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (On-Prem Options)</a></li><li><a href="17700---backup-and-restore-best-practices--.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-86ef3d03-037d-7aac-2390-c43096ed0cde" data-permalink="17700---backup-and-restore-best-practices--.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Backup and Restore Best Practices**</a></li></ul></li><li><a href="17701-sysdig-agent.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ee770b85-3c82-28cf-48e0-a38a6f973bc1" data-permalink="17701-sysdig-agent.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Agent</a><ul><li><a href="17703-host-requirements-for-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-813a9695-5e30-e72f-2e2c-26c84ddecb33" data-permalink="17703-host-requirements-for-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Host Requirements for Agent Installation</a></li><li><a href="17705-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-1bbdf1e4-3277-cf2c-d247-de7a1d067e70" data-permalink="17705-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation</a></li><li><a href="17720-agent-configuration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5595fb10-5c8e-1d38-1652-275b75d701cf" data-permalink="17720-agent-configuration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Configuration</a></li><li><a href="17740-agent-upgrade.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-a2991ad8-39da-4686-6ca1-d0838e93e523" data-permalink="17740-agent-upgrade.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Upgrade</a></li><li><a href="17741---agent-stop---start---disable---remove.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-34276f78-88ad-274e-0736-c6ccf91b5aaa" data-permalink="17741---agent-stop---start---disable---remove.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Agent Stop | Start | Disable | Remove</a></li><li><a href="17742-agent-uninstall.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ead96597-570b-8e87-7eef-ce217e0b7b3b" data-permalink="17742-agent-uninstall.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Uninstall</a></li><li><a href="17744-troubleshooting-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-4c9eb77e-478d-6fe5-84d3-3e8f86cd8cb7" data-permalink="17744-troubleshooting-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Troubleshooting Agent Installation</a></li><li><a href="17745---copy-of-host-requirements-for-agent-installation--.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5fed75f2-49db-93e2-69e1-12a3100c50c6" data-permalink="17745---copy-of-host-requirements-for-agent-installation--.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Copy of Host Requirements for Agent Installation**</a></li></ul></li><li><a href="17746-administration-settings.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-79535d85-dcdb-4dfd-1b55-de1edacb346d" data-permalink="17746-administration-settings.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Administration Settings</a><ul><li><a href="17748-user-profile-and-password.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-07096ea3-1ed7-934f-683e-9d0000edc6f7" data-permalink="17748-user-profile-and-password.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User Profile and Password</a></li><li><a href="17750-user-and-team-administration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-c24fe2df-c073-159f-5ad6-cd18bc15c2d3" data-permalink="17750-user-and-team-administration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User and Team Administration</a></li><li><a href="17755-notifications-management.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-156d27b4-e0d2-ec69-bac9-5ec0500ca128" data-permalink="17755-notifications-management.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Notifications Management</a></li><li><a href="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-6d00fdd3-1f49-e49e-bb0b-556c377d07ac" data-permalink="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">AWS: Integrate AWS Account and CloudWatch Metrics (Optional)</a></li><li><a href="17771-storage--configure-aws-capture-file-storage--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d7ff24b5-cfc5-ac9d-767d-ef7dc9d2d9c5" data-permalink="17771-storage--configure-aws-capture-file-storage--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Storage: Configure AWS Capture File Storage (Optional)</a></li><li><a href="17772-find-your-customer-number.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-703bf9f7-20e0-a6e2-cecc-f5a66cbcd977" data-permalink="17772-find-your-customer-number.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find Your Customer Number</a></li><li><a href="17774-agent-installation--overview-and-key.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2d64062a-c3ab-484f-5b45-3b0ef8b3b5b8" data-permalink="17774-agent-installation--overview-and-key.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation: Overview and Key</a></li><li><a href="17775-subscription--change-number-of-licensed-agents.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5d8a57ce-6bd9-b5f6-6460-17b233e4facc" data-permalink="17775-subscription--change-number-of-licensed-agents.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Subscription: Change Number of Licensed Agents</a></li><li><a href="17779-authentication-and-authorization--saas-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-91fa12e3-2fc9-97ab-1bf8-6d9830e4ad84" data-permalink="17779-authentication-and-authorization--saas-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (SaaS)</a></li></ul></li><li><a href="17794-get-help---using-sysdig-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-712b3b75-2584-30e3-5bd9-e1e57d3d8756" data-permalink="17794-get-help---using-sysdig-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Get Help | Using Sysdig Support</a><ul><li><a href="17795-self-help.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-39aa92d8-58c3-29d4-582f-4561a368c52f" data-permalink="17795-self-help.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Self-Help</a></li><li><a href="17797-contact-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-65fd6b5e-1ab7-6714-888b-95192ae78a5d" data-permalink="17797-contact-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Contact Support</a></li><li><a href="17802-terms-of-use.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-b854f38e-12bc-b1af-1c03-372f7a4234d1" data-permalink="17802-terms-of-use.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Terms of Use</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">SP (Sysdig Platform)</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="17696-ldap-authentication-configuration--for-platform-v--963---1091-.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="17698-ldap-authentication-configuration--for-platform-v--858--.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">SP (Sysdig Platform)</span></li><li class="breadcrumb-link"><a href="17625-sysdig-platform.html">Sysdig Platform</a></li><li class="breadcrumb-link"><a href="17626-on-premises-deployments.html">On-Premises Deployments</a></li><li class="breadcrumb-link"><a href="17678-authentication-and-authorization--on-prem-options-.html">Authentication and Authorization (On-Prem Options)</a></li><li class="breadcrumb-link"><a href="17690-ldap.html">LDAP</a></li><li class="breadcrumb-node">LDAP Authentication Configuration (for Platform v. 890 - 925)</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-940413ea-5ee4-2b2a-6709-a0a389bb276b" data-permalink="17697-ldap-authentication-configuration--for-platform-v--890---925-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">LDAP Authentication Configuration (for Platform v. 890 - 925)</h1></div></div></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>This article is specific to the LDAP support in the <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/13598894/On-Premises+Deployments" target="_blank">On-Premises Deployments</a> of the Sysdig software platform version 890 through 925.</p><div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><p>If you are running version 858 or older, refer to<span class="underline underline"> <a class="link" href="17698-ldap-authentication-configuration--for-platform-v--858--.html" title="LDAP Authentication Configuration (for Platform v. 858-)">this other article</a> </span> instead.</p></li><li class="listitem"><p>If you are running version 963 or newer, refer to <a class="link" href="17696-ldap-authentication-configuration--for-platform-v--963---1091-.html" title="LDAP Authentication Configuration (for Platform v. 963 - 1091)">this other article</a> instead.</p></li></ul></div></div><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-Introduction" class="bridgehead">Introduction</h7><p> <a class="link" href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol" target="_blank">LDAP</a> support in the Sysdig software platform allows user authentication using credentials in a customer’s own directory server.</p><p>This document describes how to configure LDAP authentication as well as its limitations.</p><p>LDAP can be complex to configure. Sysdig strongly recommends that you first refine your LDAP configuration in a separate test setup before applying the LDAP settings in your production environment. If you do not have a "development license" for test purposes or have misplaced your license information, contact <a class="link" href="mailto:billing@sysdig.com." target="_blank">billing@sysdig.com.</a> </p><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-SummaryofFunctionality" class="bridgehead">Summary of Functionality</h7><p>Independent of the LDAP feature, the Sysdig platform ordinarily maintains its own user database to hold not only a username and password hash but also settings for Admin privileges, Sysdig team membership, and a user’s configured Dashboards and Alerts. The LDAP feature provides a means to allow the Sysdig platform to query your separate directory server to validate username/password. Upon successful authentication, a corresponding user record in the Sysdig platform’s user database is automatically created. When the LDAP feature is in use, the user’s directory password is not stored in the Sysdig user database.</p><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-Upgrades-MigrationofSettings" class="bridgehead">Upgrades - Migration of Settings</h7><p> <span class="bold bold"><strong>Note: This section is only relevant if you have already been using LDAP support as it existed in Sysdig platform version 858 and earlier and are upgrading to version 890 or newer. If you are configuring LDAP for the first time and are running version 890 or newer, skip this section.</strong></span> </p><p>LDAP support in version 858 and older (as described in <a class="link" href="https://support.sysdig.com/hc/en-us/search/click?data=BAh7CjoHaWRsKwiWWLPGGgA6CXR5cGVJIgxhcnRpY2xlBjoGRVQ6CHVybEkiNy9oYy9lbi11cy9hcnRpY2xlcy8xMTUwMDI3OTIwODYtTERBUC1Db25maWd1cmF0aW9uBjsHVDoOc2VhcmNoX2lkSSIpZDE1ZGQxMWItY2ZiZi00MDk1LWJjMDQtYjE0OTIwZDc2YTA4BjsHRjoJcmFua2kG--abaacfd06263f6a8465b51bccad120b14588ae85" target="_blank">this article</a>) was configured exclusively via the Replicated console or <a class="link" href="">K8S ConfigMap</a>, depending on your installation type. This required the Sysdig platform to be restarted after any changes to the LDAP settings. When you upgrade your environment to version 890 or newer, your existing settings will be migrated to a new API-based configuration described below. The only LDAP-related settings that remain in the Replicated console are those to <span class="bold bold"><strong>Enable LDAP</strong></span> and to upload the optional <span class="bold bold"><strong>CA certificate</strong></span> for LDAPS connectivity. For K8S-based installs, you should leave the LDAP settings intact to ensure successful migration upon upgrade, but once running version 890 or newer, only <span class="bold bold"><strong> <code class="code">sysdigcloud.ldap.enabled</code> </strong></span> will be used and the other settings can be removed from your ConfigMap.</p><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-ConfigurationofLDAPAuthentication" class="bridgehead">Configuration of LDAP Authentication</h7><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-enablingEnablingtheLDAPFeature" class="bridgehead">Enabling the LDAP Feature</h7><p>Depending on your type of software install, the LDAP feature is enabled through the <a class="link" href="https://support.sysdig.com/hc/en-us/articles/206519903-On-Premises-Install-Guide-Replicated-" target="_blank">Replicated console</a> or <a class="link" href="">K8S configuration</a>. This article will focus on the Replicated option.</p><p>LDAP is disabled by default and <span class="bold bold"><strong>once LDAP is enabled, it cannot be disabled</strong></span>.</p><p>To enable LDAP, first click the checkbox at the bottom of the Settings tab to expand the <span class="bold bold"><strong>Advanced Settings</strong></span>.</p><div class="mediaobject"><img src="image/uuid-941294a2-782b-bcc4-5692-04d6edaf83ac-en.png" style="" alt="373574446.png"></img></div><p>Then click the checkbox at the bottom of the newly-opened section to <span class="bold bold"><strong>Enable LDAP</strong></span>. The <span class="bold bold"><strong>CA certificate</strong></span> is optional and only needed if you intend to use LDAPS (see the section below on <span class="bold bold"><strong> <code class="code"> loginConnectionSettings → server </code> </strong></span>).</p><div class="mediaobject"><img src="image/uuid-0265dcc0-c192-b210-f220-f17f319b7896-en.png" style="" alt="373574441.png"></img></div><p>At this point if you click <span class="bold bold"><strong>Save</strong></span>, the Sysdig platform will restart and further LDAP settings can be configured via the Sysdig Admin API (see below).</p><p>In addition to the LDAP-specific sections of the <span class="bold bold"><strong>Settings</strong></span> page, note that the <span class="bold bold"><strong>Default user</strong></span> settings near the top of the page are also still required.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;"><tr style="height: 250px"><td><img src="image/uuid-f3a80fd6-a30e-2f8d-7c06-8e006bc03685-en.png" style="max-height: 250px; " alt="373574435.png"></img></td></tr></table></div><p>This represents the The <a class="link" href="https://support.sysdig.com/hc/en-us/articles/115004951443-Locating-the-Super-Admin-User" target="_blank">"super" Admin user</a> that will still login using an email address, bypassing LDAP. This user is required and cannot be deleted. This login provides:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A way to access the Sysdig platform when LDAP connectivity is severed.</p></li><li class="listitem"><p>The first Admin user in the install, essential for assigning Admin rights to other users once they’ve authenticated via LDAP and their user records have been added to the Sysdig user database.</p></li><li class="listitem"><p>The user whose <a class="link" href="https://support.sysdig.com/hc/en-us/articles/205233166" target="_blank">REST API</a> Token can be used to perform further LDAP configurations via the Sysdig platform API (see below).</p></li></ul></div><p>Once other LDAP-authenticated users have been promoted to Admins, those Admins can promote other LDAP-authenticated users to Admin, and so on.</p><p>Other local, non-LDAP users that were created before LDAP was enabled can still authenticate via LDAP as long as the username portion of their email address in the Sysdig user database matches their LDAP username. For example, consider a user <span class="bold bold"><strong> <code class="code">jdoe@example.com</code> </strong></span> who had been a user in the environment before LDAP was enabled. Once LDAP is enabled, if a user <span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span> exists in the directory server and is able to authenticate successfully via LDAP, they will be permitted to log in to the Sysdig platform as the pre-existing <span class="bold bold"><strong> <code class="code">jdoe@example.com</code> </strong></span> user. Any user-specific configuration (Alerts, Dashboards, etc.) that were attached to <span class="bold bold"><strong> <code class="code">jdoe@example.com</code> </strong></span> will still be visible to this user.</p><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-apiconfigFurtherLDAPConfigurationViaAPI" class="bridgehead">Further LDAP Configuration Via API</h7><p>Once the LDAP feature is enabled, the "super" Admin user can view, update, and delete LDAP settings via the API endpoint <span class="bold bold"><strong> <code class="code">/api/admin/ldap/settings</code> </strong></span> using HTTP methods for <span class="bold bold"><strong> <code class="code">GET</code> </strong></span>, <span class="bold bold"><strong> <code class="code">POST</code> </strong></span>, and <span class="bold bold"><strong> <code class="code">DELETE</code> </strong></span>, respectively.</p><p> <span class="bold bold"><strong>NOTE</strong></span>: See the <a class="link" href="https://support.sysdig.com/hc/en-us/articles/205233166" target="_blank">REST API</a> page for general info on the API, and the the <a class="link" href="https://support.sysdig.com/hc/en-us/articles/115004951443-Locating-the-Super-Admin-User" target="_blank">Locating the "Super" Admin User</a> page for guidance on finding the token for the appropriate "super" Admin user.</p><p>A <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/login_config.sh" target="_blank"> <span class="bold bold"><strong> <code class="code">login_config</code> </strong></span> </a> helper script is available in a branch of the <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://github.com/draios/sysdig-cloud-scripts/tree/master/LDAP" target="_blank">sysdig-cloud-scripts</a> </code> </strong></span> repository for your use along with an example <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/settings_login_simple.json" target="_blank">settings_login_simple.json</a> </code> </strong></span> that can be modified for your environment. Refer to the table below for details on config options. Example command-lines are shown below the table.</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col><col></col><col></col></colgroup><thead><tr><th class="th"><p>Section</p></th><th class="th"><p>Setting</p></th><th class="th"><p>Required</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginConnectionSettings</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">server</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>URL of the directory server for the Sysdig platform to query. An example for LDAP over SSL/TLS:</p><p>ldaps://172.16.0.1:636</p><p>For cleartext LDAP:</p><p>ldap://176.16.0.1</p><p>Note that to use LDAPS, you'll also need to use the Replicated console to upload a Certificate Authority (CA) PEM-format certificate that the Sysdig platform will use to validate its SSL/TLS connection to the server. If you have a host with OpenSSL tools installed that can reach the directory server, you can obtain the certificate by running:</p><pre class="programlisting"># openssl s_client -showcerts -connect &lt;server-ip&gt;:636</pre><p>The command output will typically show the server certificate first and the CA certificate second, both in PEM format. Into a text file, paste the CA certificate portion of the output that looks like:</p><pre class="programlisting">-----BEGIN CERTIFICATE-----
[random text...]
-----END CERTIFICATE-----</pre><p>Under <span class="bold bold"><strong>CA certificate in the PEM format</strong></span> in the Replicated console, click the "Choose File" button and browse to the file you just created to select and upload it. Note that when you click <span class="bold bold"><strong>Save</strong></span>, the Sysdig platform will restart.</p><p>Note: For environments using self-signed certificates, the <span class="bold bold"><strong> <code class="code">openssl</code> </strong></span> command shown above will return only one certificate.</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginConnectionSettings</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">managerDn</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>The distinguished name of a user that the Sysdig platform can authenticate as via LDAP in order to perform further queries about the users attempting to login to the Sysdig platform. Example:</p><pre class="programlisting">cn=Administrator,cn=Users,dc=example,dc=local</pre><p>This setting is required, as the Sysdig platform does not support connection to servers via anonymous bind.</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginConnectionSettings</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">managerPassword</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>The password for the <span class="bold bold"><strong> <code class="code">managerDn</code> </strong></span>.</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginConnectionSettings</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>The distinguished name for the point in the LDAP tree below which all search queries will begin. Example:</p><pre class="programlisting">dc=example,dc=local</pre></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginFilter</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">searchBase</code> </strong></span> </p></td><td class="td"><p>No</p></td><td class="td"><p>A relative distinguished name (from the <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span>) below which queries about users should be performed. If not specified, the search will be performed across everything below the <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span>. Example:</p><pre class="programlisting">cn=Users</pre></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginFilter</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">searchFilter</code> </strong></span> </p></td><td class="td"><p>Yes</p></td><td class="td"><p>An LDAP search filter (in <a class="link" href="https://www.ietf.org/rfc/rfc2254.txt" target="_blank">RFC2254</a> format) that the Sysdig platform will use in constructing the query to identify the user record. The marker token <span class="bold bold"><strong> <code class="code">{0}</code> </strong></span> represents where the username will appear when LDAP queries are constructed. An example that targets the attribute <span class="bold bold"><strong> <code class="code">sAMAccountName</code> </strong></span> in Active Directory:</p><pre class="programlisting">(&amp;(objectClass=organizationalPerson)(sAMAccountName={0}))</pre></td></tr></tbody></table></div><p>To use the helper script, modify the <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/env.sh" target="_blank">env.sh</a> </code> </strong></span> to set the required values for <span class="bold bold"><strong> <code class="code">API_TOKEN</code> </strong></span> and <span class="bold bold"><strong> <code class="code">URL</code> </strong></span> for your environment. Once set, invoking <span class="bold bold"><strong> <code class="code">login_config</code> </strong></span> with no options will print the current configuration. If you were running Sysdig platform version 858 or older and have just upgraded to version 890 or newer, you will see your migrated settings. Otherwise the config will start out empty:</p><pre class="programlisting"># ./login_config
{
    "ldapSettings": {
        "allowApiUserCreation": false,
        "version": 1
    }
}</pre><p>To apply new LDAP settings, invoke <span class="bold bold"><strong> <code class="code">login_config</code> </strong></span> with the <span class="bold bold"><strong> <code class="code">-s</code> </strong></span> option and specify the filename containing the JSON config. If successful, the applied configuration will be echoed back by the API.</p><pre class="programlisting"># ./login_config -s settings_login_simple.json
{"ldapSettings":{"version":2,"loginConnectionSettings":{"server":"ldap://172.16.0.1","rootDn":"dc=example,dc=local","managerDn":"cn=Administrator,cn=Users,dc=example,dc=local","managerPassword":"myMgrPassword"},"loginFilter":{"searchBase":"cn=Users","searchFilter":"(&amp;(objectClass=organizationalPerson)(sAMAccountName={0}))","groupSearchBase":"","groupSearchFilter":"","groupMembershipFilter":""},"allowApiUserCreation":false}}</pre><p>Using the specific example <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/settings_login_simple.json" target="_blank">settings_login_simple.json</a> </code> </strong></span> and the minimal Active Directory configuration in the screenshot below, login to the Sysdig platform would be permitted for a user <span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span> that has <span class="bold bold"><strong> <code class="code">distinguishedName</code> </strong></span>:</p><pre class="programlisting">CN=John Doe,CN=Users,DC=example,DC=local</pre><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="1024px"><tr style="height: 748px"><td><img src="image/uuid-718d7402-4f77-e99c-aef1-beb65020f606-en.png" style="max-width: 1024px; max-height: 748px; " alt="373574429.png"></img></td></tr></table></div><p>To delete LDAP settings, invoke <span class="bold bold"><strong> <code class="code">login_config</code> </strong></span> with the <span class="bold bold"><strong> <code class="code">-d</code> </strong></span> option. <span class="bold bold"><strong>This should be used with caution, as this will prevent all LDAP users from being able to login to the Sysdig platform!</strong></span> </p><pre class="programlisting"># ./login_config -d
{"ldapSettings":{"version":3,"allowApiUserCreation":false}}</pre><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-GroupMembershipConfigurationdeprecated" class="bridgehead">Group Membership Configuration (deprecated)</h7><p>The LDAP feature as it existed in version 858 and earlier included optional additional settings that, when specified, ensured that authenticated users were also members of one or more groups before permitting them to login to the Sysdig platform. These settings are documented here for the benefit of those who used these settings in the past and have had their settings migrated to the newer API-based configuration. See below for details on how to use the <span class="bold bold"><strong> <code class="code">searchFilter</code> </strong></span> instead to achieve equivalent functionality.</p><p>For use with the <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/login_config.sh" target="_blank"> <span class="bold bold"><strong> <code class="code">login_config</code> </strong></span> </a> helper script, an example <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/settings_login_group_deprecated.json" target="_blank">settings_login_group_deprecated.json</a> </code> </strong></span> is provided that can be modified for your environment based on the table below. Example command-lines are shown below the table.</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col><col></col><col></col></colgroup><thead><tr><th class="th"><p>Section</p></th><th class="th"><p>Setting</p></th><th class="th"><p>Required</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginFilter</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">groupSearchBase</code> </strong></span> </p></td><td class="td"><p>No</p></td><td class="td"><p>A relative distinguished name (from the <span class="bold bold"><strong> <code class="code">rootDn</code> </strong></span>) below which queries about groups should be performed. Example:</p><pre class="programlisting">ou=Planets</pre></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginFilter</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">groupSearchFilter</code> </strong></span> </p></td><td class="td"><p>No</p></td><td class="td"><p>An LDAP search filter (in <a class="link" href="https://www.ietf.org/rfc/rfc2254.txt" target="_blank">RFC2254</a> format) that the Sysdig platform will use in constructing the query to identify a group to which the user must belong. An example that only permits users that are in the <span class="bold bold"><strong> <code class="code">Mars</code> </strong></span> group in Active Directory:</p><pre class="programlisting">(&amp;(cn=Mars)(objectclass=group))</pre><p>If this setting is left blank, group membership is not required, and hence any user that successfully authenticates via LDAP using only username/password will be permitted to login to the Sysdig platform.</p></td></tr><tr><td class="td"><p> <span class="bold bold"><strong> <code class="code">loginFilter</code> </strong></span> </p></td><td class="td"><p> <span class="bold bold"><strong> <code class="code">groupMembershipFilter</code> </strong></span> </p></td><td class="td"><p>No</p></td><td class="td"><p>An LDAP search filter (in <a class="link" href="https://www.ietf.org/rfc/rfc2254.txt" target="_blank">RFC2254</a> format) that the Sysdig platform will use to determine group membership. If no setting is specified, the following default filter is applied, which should work for most environments:</p><pre class="programlisting">(| (member={0}) (uniqueMember={0}) (memberUid={1}))</pre></td></tr></tbody></table></div><p>Using the specific example <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/settings_login_group_deprecated.json" target="_blank">settings_login_group_deprecated.json</a> </code> </strong></span> and the minimal Active Directory configuration in the screenshot below, login to the Sysdig platform would be permitted for this user who belongs to the <span class="bold bold"><strong> <code class="code">Mars</code> </strong></span> group.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="1024px"><tr style="height: 748px"><td><img src="image/uuid-dd2973e0-9fde-81f8-2d84-785c66bf4d03-en.png" style="max-width: 1024px; max-height: 748px; " alt="373574423.png"></img></td></tr></table></div><p>But our previous <span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span> user who is not a member would be prevented from logging in.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="800px"><tr style="height: 635px"><td><img src="image/uuid-74eb824c-82cd-167b-27da-0209c2dd5535-en.png" style="max-width: 800px; max-height: 635px; " alt="373574417.png"></img></td></tr></table></div><p>To simplify your configuration and avoid use of these deprecated options, an equivalent configuration can be achieved by making the group membership part of the <span class="bold bold"><strong> <code class="code">searchFilter</code> </strong></span>:</p><pre class="programlisting">"searchFilter": "(&amp;(memberOf=CN=Mars,OU=Planets,DC=example,DC=local)(objectClass=organizationalPerson)(sAMAccountName={0}))"</pre><p>See the example <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/settings_login_group.json" target="_blank">settings_login_group.json</a> </code> </strong></span> for an updated configuration that can be compared side-by-side with <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/settings_login_group_deprecated.json" target="_blank">settings_login_group_deprecated.json</a> </code> </strong></span>.</p><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-verifyuserTestingUserLogin" class="bridgehead">Testing User Login</h7><p>To test the login configuration, the <a class="link" href="https://support.sysdig.com/hc/en-us/articles/115004951443-Locating-the-Super-Admin-User" target="_blank">"super" Admin user</a> can confirm if a particular user would be permitted to login given current LDAP login connection settings. To do this, perform an HTTP <span class="bold bold"><strong> <code class="code">GET</code> </strong></span> to the API endpoint <span class="bold bold"><strong> <code class="code">/api/admin/ldap/settings/verify/USERNAME</code> </strong></span>. A <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/master/LDAP/verify_user.sh" target="_blank"> <span class="bold bold"><strong> <code class="code">verify_user</code> </strong></span> </a> helper script is provided to easily perform this. If invoked with the <span class="bold bold"><strong> <code class="code">-u</code> </strong></span> option and a username, and the user's login would be successful, it will return the user's information from the directory.</p><pre class="programlisting"># ./verify_user -u jdoe
{"element":"uSNCreated=12799, countryCode=0, badPwdCount=0, whenChanged=20180406232737.0Z, objectClass=top, primaryGroupID=513, givenName=John, objectGUID=..., objectSid=..., instanceType=4, whenCreated=20180406220651.0Z, dSCorePropagationData=16010101000000.0Z, sn=Doe, userAccountControl=66048, lastLogonTimestamp=131675308573317669, cn=John Doe, codePage=0, accountExpires=9223372036854775807, sAMAccountName=jdoe, sAMAccountType=805306368, userPrincipalName=jdoe@example.local, displayName=John Doe, pwdLastSet=131675260113435098, lastLogon=131682933890462204, name=John Doe, objectCategory=CN=Person,CN=Schema,CN=Configuration,DC=example,DC=local, distinguishedName=CN=John Doe,CN=Users,DC=example,DC=local, lastLogoff=0, memberOf=CN=Sysdig Viewers,CN=Users,DC=example,DC=local, logonCount=0, uSNChanged=12986"}</pre><p>If the user would not be able to login, an error message will be returned.</p><pre class="programlisting"># ./verify_user -u nothere
Could not verify user "nothere". Check LDAP login config settings and/or system log.</pre><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-CreatingLDAPUsersBeforeTheyLogin" class="bridgehead">Creating LDAP Users Before They Login</h7><p>The default behavior of the LDAP feature is to create a new record in the Sysdig user database when a user authenticates successfully via LDAP for the first time. However, it may be desirable to add such user records in advance of their first login, such as if you wish to use automation to change user permissions, assign team membership, or pre-populate Dashboard/Alert configurations.</p><p>To enable this option, <span class="bold bold"><strong> <code class="code">POST</code> </strong></span> the following top-level config element to <span class="bold bold"><strong> <code class="code">/api/admin/ldap/settings</code> </strong></span> with your other LDAP settings. A complete example config including this element is provided at <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/a2f6da32df3f99e72bac63df921e502d8d7c0d33/user_creation/create_user.sh" target="_blank">settings_login_with_user_create.json</a> </code> </strong></span>.</p><pre class="programlisting">"allowApiUserCreation": true</pre><p>Once this option is enabled, to create a user, invoke the provided helper script <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/a2f6da32df3f99e72bac63df921e502d8d7c0d33/user_creation/create_user.sh" target="_blank">create_user</a> </code> </strong></span>, with the <span class="bold bold"><strong> <code class="code">-s</code> </strong></span> option and specify a filename containing user information, such as the provided example <span class="bold bold"><strong> <code class="code"> <a class="link" href="https://raw.githubusercontent.com/draios/sysdig-cloud-scripts/a2f6da32df3f99e72bac63df921e502d8d7c0d33/user_creation/create_user.sh" target="_blank">settings_user_create.json</a> </code> </strong></span>. If successful, details about the created user record will be echoed back by the API.</p><pre class="programlisting"># ./create_user -s settings_user_create.json
{"user":{"id":7,"version":0,"username":"msmith","enabled":true,"firstName":"Mary","lastName":"Smith","status":"confirmed","termsAndConditions":true,"pictureUrl":"http://www.gravatar.com/avatar/6b17d2b356172c9966690ce93f66e8dd","dateActivated":1523405703283,"properties":{},"customerSettings":{"sysdig":{"enabled":false,"buckets":[]},"plan":{"maxAgents":1000,"onDemandAgents":0,"maxTeams":-1,"timelines":[{"from":null,"to":null,"sampling":10000000},{"from":null,"to":null,"sampling":60000000},{"from":null,"to":null,"sampling":600000000},{"from":null,"to":null,"sampling":3600000000},{"from":null,"to":null,"sampling":86400000000}],"metricsSettings":{"enforce":false,"limits":{"jmx":200,"statsd":200,"appCheck":200,"prometheus":200,"progAggregationCount":12}},"secureEnabled":false,"allocatedAgentsCount":1000,"paymentsIntegrationId":{"id":"not migrated","ttl":{"ttl":50}},"pricingPlan":"basic","overageAssessmentEligible":false}},"customer":{"id":1,"version":0,"name":"","accessKey":"1ca2a53d-e102-46a2-aec7-851426ce3c61","lastUpdated":1523391582000,"dateCreated":1523391582000},"timezone":"+00:00","systemRole":"ROLE_USER","agentInstallParams":{"collectorAddress":"172.31.6.227","accessKey":"1ca2a53d-e102-46a2-aec7-851426ce3c61","collectorPort":6443,"checkCertificate":true},"oauth":false,"resetPassword":false,"accessKey":"1ca2a53d-e102-46a2-aec7-851426ce3c61","dateCreated":1523405703311,"teamRoles":[{"userId":7,"teamId":1,"role":"ROLE_TEAM_EDIT"}]}}</pre><p>Additional details regarding this type of user creation:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <span class="bold bold"><strong> <code class="code">customer id</code> </strong></span> of <span class="bold bold"><strong> <code class="code">1</code> </strong></span> specified in the example is typical for most Sysdig software platform installations, but may be different (rarely) in some enviornments. See <a class="link" href="https://support.sysdig.com/hc/en-us/articles/115005848823-Your-Customer-Number" target="_blank">this article</a> for info on how to confirm.</p></li><li class="listitem"><p>This method allows creation of <span class="italic italic">any</span> user, even if it doesn't actually exist in the directory that is queried via LDAP.</p></li><li class="listitem"><p>Such users can be created with a simple username (e.g. <span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span>) or with an email-style postfix (as is typical for non-LDAP Sysdig user, e.g. <span class="bold bold"><strong> <code class="code">jdoe@example.com</code> </strong></span>). In this latter case only the username portion (<span class="bold bold"><strong> <code class="code">jdoe</code> </strong></span>) is used when the Sysdig platform is performing an LDAP query during attempted login.</p></li><li class="listitem"><p>While the <span class="bold bold"><strong> <code class="code">password</code> </strong></span> must be included in the config you <span class="bold bold"><strong> <code class="code">POST</code> </strong></span> to create the user, it is not used by the Sysdig platform, as authentication will always be performed via LDAP. For this same reason, if a user has been created in this way, they will not be able to login unless there is a matching user in the directory that is queried via LDAP.</p></li><li class="listitem"><p>The <span class="bold bold"><strong> <code class="code">firstName</code> </strong></span> and <span class="bold bold"><strong> <code class="code">lastName</code> </strong></span> values as specified in the example are optional and independent from any equivalent name settings in the directory that is queried via LDAP.</p></li></ul></div><h7 id="UUID-7213565c-fa4c-7bf1-dfa0-ff12f8ab2bb0_id_LDAPAuthenticationConfigurationforPlatformv890-925-limitationsLimitationsandCaveats" class="bridgehead">Limitations and Caveats</h7><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>LDAP support has been tested with Active Directory in Windows Server 2012 R2. It may work with AD versions that ship with other versions of Windows, or other directory servers that use the LDAP protocol. If you are intending to use LDAP with something other than Active Directory, please contact Sysdig Support.</p></li><li class="listitem"><p>The LDAP feature is only present in Sysdig software platform installs (not the SaaS version).</p></li><li class="listitem"><p>LDAP support cannot be disabled once enabled.</p></li><li class="listitem"><p>Only one LDAP config can exist per deployment (i.e. the platform can only query one directory server endpoint).</p></li><li class="listitem"><p>Because the Sysdig software platform is based on the same technology as the SaaS-based Sysdig service, it theoretically supports the configuration of multiple “customers” using the same install. However, the multi-customer option is not supported when the LDAP feature is enabled.</p></li><li class="listitem"><p>When LDAP support is enabled, adding users via email "invites" is not possible.</p></li><li class="listitem"><p>LDAP authentication for directory usernames that begin or end with a space character (e.g. <span class="bold bold"><strong> <code class="code">" jdoe"</code> </strong></span> or <span class="bold bold"><strong> <code class="code">"jdoe "</code> </strong></span>) are not supported.</p></li><li class="listitem"><p>Configuration entries that contain special characters (for instance, a <span class="bold bold"><strong> <code class="code">managerPassword</code> </strong></span> that contains a backslash character) are supported, but note that you will need to perform proper JSON escaping. If you attempt to post invalid JSON, the helper scripts will return an error message, at which point you can use tools such as <a class="link" href="https://jsonlint.com/" target="_blank">JSONLint</a> to narrow down the source of the problem and/or <a class="link" href="https://www.freeformatter.com/json-escape.html" target="_blank">JSON String Escape</a> to learn how to properly escape your text.</p></li><li class="listitem"><p>The LDAP feature does not attempt any ongoing “sync” back from the Sysdig platform user database to the directory server. Note how this impacts the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>If a user is deleted from the directory server, their user record will remain in the Sysdig user database until a Sysdig Admin deletes it. Of course, that user will not be able to login since they will no longer be able to authenticate successfully via LDAP.</p></li><li class="listitem"><p>If an Admin deletes a user from the Sysdig user database, but the user can still authenticate successfully via LDAP, their Sysdig user record will be recreated if they login again via LDAP.</p></li><li class="listitem"><p>If a person’s username should change in the directory server (e.g. the value for <span class="bold bold"><strong> <code class="code">sAMAccountName</code> </strong></span> in our examples above), the next time they login, a new user record will be created for them in the Sysdig user database. Settings they previously had in the Sysdig platform such as Admin rights and Alerts/Dashboard configurations will not be present for this recreated user.</p></li></ul></div></li><li class="listitem"><p>Other LDAP-centric functionality that is not currently supported (not an exhaustive list):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>The Sysdig platform does not <a class="link" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/cc978014(v=technet.10)" target="_blank">chase referrals</a> found in LDAP query responses.</p></li><li class="listitem"><p>Mapping a user in the directory server to the <a class="link" href="https://support.sysdig.com/hc/en-us/articles/115004951443-Locating-the-Super-Admin-User" target="_blank">Sysdig "super" Admin</a> (such as to avoid the need to configure the this "super" Admin user).</p></li><li class="listitem"><p>Session expiry based on configuration in the directory server (such as to set a user account to only be valid until a certain date).</p></li><li class="listitem"><p>Login policies based on configuration in the directory server (such as to restrict login to certain hours).</p></li><li class="listitem"><p>User timeout functionality (such as to remove a user from the Sysdig user database if they have not logged in for a certain amount of time).</p></li></ul></div></li><li class="listitem"><p>See <a class="link" href="17692-general-ldap-tips.html" title="General LDAP Tips">General LDAP Tips</a> for more guidance to assist with debugging or perfecting your LDAP configuration.</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <span class="bold bold"><strong> Introduction </strong></span> </p></li><li class="listitem"><p> <span class="bold bold"><strong> Summary of Functionality </strong></span> </p></li><li class="listitem"><p> <span class="bold bold"><strong> Upgrades - Migration of Settings </strong></span> </p></li><li class="listitem"><p> <span class="bold bold"><strong> Configuration of LDAP Authentication </strong></span> </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p> <span class="bold bold"><strong> Enabling the LDAP Feature </strong></span> </p></li><li class="listitem"><p> <span class="bold bold"><strong> Further LDAP Configuration Via API </strong></span> </p></li><li class="listitem"><p> <span class="bold bold"><strong> Group Membership Configuration (deprecated) </strong></span> </p></li></ul></div></li><li class="listitem"><p> <span class="bold bold"><strong> Testing User Login </strong></span> </p></li><li class="listitem"><p> <span class="bold bold"><strong> Creating LDAP Users Before They Login </strong></span> </p></li><li class="listitem"><p> <span class="bold bold"><strong> Limitations and Caveats </strong></span> </p></li></ul></div></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="17696-ldap-authentication-configuration--for-platform-v--963---1091-.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="17698-ldap-authentication-configuration--for-platform-v--858--.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
