<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Data Aggregation</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d40bfcded91c.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="26547-6853-metrics.html#UUID-3775f49b-3a68-86ba-f2ab-52ca285023db_id_Metrics-HeuristicandDeprecatedMetrics" title="Heuristic and Deprecated Metrics"></link><link rel="next" href="26547-6856-data-retention.html" title="Data Retention"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
				$(document).ready(function(){
				var lang = hljs.listLanguages();
				$('pre:not(.embedcode)').each(function(){
				if ($(this).data('language') && $.inArray($(this).data('language'), lang) > -1) {
					var code = hljs.highlight($(this).data('language'), $(this).text());
						$(this).empty().append(code.value).addClass("hljs").addClass(code.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://478h5m1yrfsa3bbe262u7muv-wpengine.netdna-ssl.com/wp-content/themes/sysdig/assets/images/logo-sysdig-black.svg" target="_blank"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="https://478h5m1yrfsa3bbe262u7muv-wpengine.netdna-ssl.com/wp-content/themes/sysdig/assets/images/logo-sysdig-black.svg" target="_blank"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Sysdig Documentation</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="26547-6853-metrics.html#UUID-3775f49b-3a68-86ba-f2ab-52ca285023db_id_Metrics-HeuristicandDeprecatedMetrics">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="26547-6856-data-retention.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">Sysdig Documentation</span></li><li class="breadcrumb-link"><a href="26547-6498-sysdig-monitor.html">Sysdig Monitor</a></li><li class="breadcrumb-link"><a href="26547-6853-metrics.html">Metrics</a></li><li class="breadcrumb-node">Data Aggregation</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-fb053459-69e6-fb86-f77b-2a4aeaf84645" data-permalink="26547-6855-data-aggregation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-12046872-72d6-9a30-c285-cacc855b32bc"><div class="titlepage"><div><div class="title"><h4 class="title">Data Aggregation</h4></div></div></div><p>Sysdig Monitor allows users to adjust the aggregation settings when graphing or creating alerts for a metric, informing how Sysdig rolls up the available data samples in order to create the chart or evaluate the alert. There are two forms of aggregation used for metrics in Sysdig: time aggregation and group aggregation.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Time aggregation is always performed before group aggregation.</p></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-12046872-72d6-9a30-c285-cacc855b32bc_id_DataAggregation-Contents"><div class="titlepage"><div><div class="title"><h5 class="title">Contents</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="26547-6855-data-aggregation.html#UUID-12046872-72d6-9a30-c285-cacc855b32bc_id_DataAggregation-TimeAggregation" title="Time Aggregation">Time Aggregation</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6855-data-aggregation.html#UUID-12046872-72d6-9a30-c285-cacc855b32bc_id_DataAggregation-GroupAggregation" title="Group Aggregation">Group Aggregation</a> </p></li><li class="listitem"><p> <a class="link" href="26547-6855-data-aggregation.html#UUID-12046872-72d6-9a30-c285-cacc855b32bc_id_DataAggregation-AggregationExamples" title="Aggregation Examples">Aggregation Examples</a> </p></li></ul></div><h6 id="UUID-12046872-72d6-9a30-c285-cacc855b32bc_id_DataAggregation-TimeAggregation" class="bridgehead">Time Aggregation</h6><p>Time aggregation comes into effect in two overlapping situations:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Charts can only render a limited number of data points. To look at a wide range of data, Sysdig Monitor may need to aggregate granular data into larger samples for visualization.</p></li><li class="listitem"><p>Sysdig Monitor rolls up historical data over time.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Sysdig retains rollups based on each aggregation type, to allow users to choose which datapoints to utilize when evaluating older data.</p></div></li></ul></div><p>By default, Sysdig agents collect and report metrics at a 10 second resolution. For time series charts covering five minutes or less, datapoints are drawn at this 10 second resolution, and any time aggregation selections will have no effect. When an amount of time greater than five minutes is displayed, data points are drawn as an aggregate for an appropriate time interval. For example, for a chart covering one hour, each datapoint would reflect a one minute interval.</p><p>At time intervals of one minute and above, charts can be configured to display different aggregates for the 10 second metrics used to calculate each datapoint.</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Aggregation Type</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p>average</p></td><td class="td"><p>The average of the retrieved metric values across the time period.</p></td></tr><tr><td class="td"><p>rate</p></td><td class="td"><p>The average value of the metric across the time period evaluated.</p></td></tr><tr><td class="td"><p>maximum</p></td><td class="td"><p>The highest value during the time period evaluated.</p></td></tr><tr><td class="td"><p>minimum</p></td><td class="td"><p>The lowest value during the time period evaluated.</p></td></tr><tr><td class="td"><p>sum</p></td><td class="td"><p>The combined sum of the metric across the time period evaluated.</p></td></tr></tbody></table></div><p>In the example images below, the <code class="code">kubernetes.deployment.replicas.available</code> metrics first uses the <code class="code">average</code> for time aggregation, and then uses the <code class="code">sum</code> for time aggregation:</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="1000px"><tr><td><img src="image/uuid-9322de58-ecbf-d7db-729a-c424f91fa751-en.png" style="max-width: 1000px; " alt="289800199.png"></img></td></tr></table></div><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="1000px"><tr><td><img src="image/uuid-2acd4c3f-d5f2-49d1-c025-5f770e948120-en.png" style="max-width: 1000px; " alt="289898500.png"></img></td></tr></table></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Rate and average are very similar, and often provide the same result. However, the calculation of each is different. If time aggregation is set to one minute, the agent is supposed to retrieve six samples (one every 10 seconds). In some cases, samples may not be there, due to disconnections or other circumstances. For this example, four samples are available.</p><p>If this was the case, the <code class="code">average</code> would be calculated by dividing by four, while the <code class="code">rate</code> would be calculated by dividing by six.</p></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Most metrics are sampled once for each time interval, resulting in average and rate returning the same value. However, there will be a distinction for any metrics not reported at every time interval (for example, some custom statsd metrics).</p></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>Rate is currently referred to as <code class="code">timeAvg</code> in the Sysdig Monitor API and advanced alerting language.</p></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>By default, average is used when displaying datapoints for a time interval.</p></div><h6 id="UUID-12046872-72d6-9a30-c285-cacc855b32bc_id_DataAggregation-GroupAggregation" class="bridgehead">Group Aggregation</h6><p>Metrics applied to a group of items (for example, several containers, hosts, or nodes) are averaged between the members of the group by default. For example, three hosts report different CPU usage for one sample interval. The three values will be averaged, and reported on the chart as a single datapoint for that metric.</p><p>There are several different types of group aggregation:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup><col></col><col></col></colgroup><thead><tr><th class="th"><p>Aggregation Type</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p>average</p></td><td class="td"><p>The average value of the interval's samples.</p></td></tr><tr><td class="td"><p>maximum</p></td><td class="td"><p>The maximum value of the interval's samples.</p></td></tr><tr><td class="td"><p>minimum</p></td><td class="td"><p>The minimum value of the interval's samples.</p></td></tr><tr><td class="td"><p>sum</p></td><td class="td"><p>The combined value of all of the interval's samples.</p></td></tr></tbody></table></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>If a chart or alert is segmented, the group aggregation settings will be utilized for both aggregation across the whole group, and aggregation within each individual segmentation.</p><p>For example, the image below shows a chart for CPU% across the infrastructure:</p><div class="mediaobject"><table style="border: 0; width: 600px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr><td><img style="max-width: 600px; " src="image/uuid-822e792e-36e9-f6d3-f7ed-52480ff0f553-en.png" alt="305168521.png"></img></td></tr></table></div><p>When segmented by <code class="code"> <a class="link" href="http://proc.name" target="_blank">proc.name</a> </code>, the chart shows one CPU% line for each process:</p><div class="mediaobject"><table style="border: 0; width: 600px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr><td><img style="max-width: 600px; " src="image/uuid-8eea7a77-e665-753a-e02f-bf76a9f14c32-en.png" alt="305397935.png"></img></td></tr></table></div><p>Each line provides the average value for every process with the same name. To see the difference, change the group aggregation type to sum:</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>The metric aggregation value showed beside the metric name is for the time aggregation. While the screenshot shows <code class="code">AVG</code>, the group aggregation is set to <code class="code">SUM</code>.</p></div><div class="mediaobject"><table style="border: 0; width: 600px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr><td><img style="max-width: 600px; " src="image/uuid-f3502dbe-a335-52fc-2d31-20a586883876-en.png" alt="305234020.png"></img></td></tr></table></div></div><h6 id="UUID-12046872-72d6-9a30-c285-cacc855b32bc_id_DataAggregation-AggregationExamples" class="bridgehead">Aggregation Examples</h6><p>The tables below provide an example of how each type of aggregation works. The first table provides the metric data, while the second displays the resulting value for each type of aggregation.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;"><tr style="height: 250px"><td><img src="image/uuid-03f924df-0524-0811-1515-5ab5824a7136-en.png" style="max-height: 250px; " alt="238157825.png"></img></td></tr></table></div><p>In the example below, the CPU% metric is applied to a group of servers called <code class="code">webserver</code>. The first chart shows metrics using <span class="italic italic">average</span> aggregation for both time and group. The second chart shows the metrics using <span class="italic italic">maximum</span> aggregation for both time and group.</p><div class="mediaobject"><table border="0" class="image-viewport" style="cellpadding: 0; cellspacing: 0;" width="675px"><tr style="height: 490px"><td><img src="image/uuid-b7395653-6bc0-e2d8-7d22-9a2729894301-en.jpg" style="max-width: 675px; max-height: 490px; " alt="5ce6e0e059e45.jpg"></img></td></tr></table></div><p>For each one minute interval, the second chart renders the highest CPU usage value found from the servers in the <code class="code">webserver</code> group and from all of the samples reported during the one minute interval. This view can be useful when searching for transient spikes in metrics over long periods of time, that would otherwise be missed with average aggregation.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>The group aggregation type is dependent on the segmentation. For a view showing metrics for a group of items, the current group aggregation setting will revert to the default setting, if the <code class="code">Segment By</code> selection is changed.</p></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-12046872-72d6-9a30-c285-cacc855b32bc">Data Aggregation</a></li><li><a href="#UUID-12046872-72d6-9a30-c285-cacc855b32bc_id_DataAggregation-Contents">Contents</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="26547-6853-metrics.html#UUID-3775f49b-3a68-86ba-f2ab-52ca285023db_id_Metrics-HeuristicandDeprecatedMetrics">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="26547-6856-data-retention.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
