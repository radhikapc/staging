<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Optional: Agent Auto-Config</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/5d6593bb1e613.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/hilitor.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="17737-optional--change-the-agent-log-level.html" title="Optional: Change the Agent Log Level"></link><link rel="next" href="17740-agent-upgrade.html" title="Agent Upgrade"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {
				/**
				 * @type {array}
				 */
				var supported = hljs.listLanguages();

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}

					if (language && $.inArray(language, supported) > -1) {
						var c = hljs.highlight(language, $(this).text());
						$(this)
							.empty()
							.append(c.value)
							.addClass("hljs")
							.addClass(c.language);
					} else {
						hljs.highlightBlock(this);
					}
				});
			});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="17625-sysdig-platform.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d7f578b2-c960-970c-a969-10cebb31d199" data-permalink="17625-sysdig-platform.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Platform</a><ul><li><a href="17626-on-premises-deployments.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-b0fbda15-008f-f5ef-e82b-44edcdbddf2f" data-permalink="17626-on-premises-deployments.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> On-Premises Deployments</a><ul><li><a href="17627-architecture---system-requirements.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cd539f11-f1ce-b46c-2e31-33817e7fbcfe" data-permalink="17627-architecture---system-requirements.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Architecture &amp; System Requirements</a></li><li><a href="17636-on-premises-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-f3f2b80c-ab17-0417-e900-5e28acb4e13d" data-permalink="17636-on-premises-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Installation</a></li><li><a href="17660-on-premises-upgrades.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-56e8e98a-2ab4-6b39-ba6e-35eee1e169cc" data-permalink="17660-on-premises-upgrades.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">On-Premises Upgrades</a></li><li><a href="17672-find-the-super-admin-credentials-and-api-token.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-cb40fc4f-b85a-8739-4a4e-0a9009419723" data-permalink="17672-find-the-super-admin-credentials-and-api-token.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find the Super Admin Credentials and API Token</a></li><li><a href="17674-upgrade-an-on-premises-license.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ec730506-5804-f830-4a75-644e44406dff" data-permalink="17674-upgrade-an-on-premises-license.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Upgrade an On-Premises License</a></li><li><a href="17675-securing-elasticsearch.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-e5a2a6fa-12cf-e145-8643-4d17b5e5e809" data-permalink="17675-securing-elasticsearch.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Elasticsearch</a></li><li><a href="17677-securing-cassandra.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-e0ca8e47-108a-cdd2-9661-7a7a53b9da47" data-permalink="17677-securing-cassandra.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Securing Cassandra</a></li><li><a href="17678-authentication-and-authorization--on-prem-options-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-059259c5-41cc-52f1-27db-8692bce591a4" data-permalink="17678-authentication-and-authorization--on-prem-options-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (On-Prem Options)</a></li><li><a href="17700---backup-and-restore-best-practices--.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-86ef3d03-037d-7aac-2390-c43096ed0cde" data-permalink="17700---backup-and-restore-best-practices--.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Backup and Restore Best Practices**</a></li></ul></li><li><a href="17701-sysdig-agent.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ee770b85-3c82-28cf-48e0-a38a6f973bc1" data-permalink="17701-sysdig-agent.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Sysdig Agent</a><ul><li><a href="17703-host-requirements-for-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-813a9695-5e30-e72f-2e2c-26c84ddecb33" data-permalink="17703-host-requirements-for-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Host Requirements for Agent Installation</a></li><li><a href="17705-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-1bbdf1e4-3277-cf2c-d247-de7a1d067e70" data-permalink="17705-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation</a></li><li><a href="17720-agent-configuration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5595fb10-5c8e-1d38-1652-275b75d701cf" data-permalink="17720-agent-configuration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Configuration</a></li><li><a href="17740-agent-upgrade.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-a2991ad8-39da-4686-6ca1-d0838e93e523" data-permalink="17740-agent-upgrade.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Upgrade</a></li><li><a href="17741---agent-stop---start---disable---remove.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-34276f78-88ad-274e-0736-c6ccf91b5aaa" data-permalink="17741---agent-stop---start---disable---remove.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Agent Stop | Start | Disable | Remove</a></li><li><a href="17742-agent-uninstall.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-ead96597-570b-8e87-7eef-ce217e0b7b3b" data-permalink="17742-agent-uninstall.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Uninstall</a></li><li><a href="17744-troubleshooting-agent-installation.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-4c9eb77e-478d-6fe5-84d3-3e8f86cd8cb7" data-permalink="17744-troubleshooting-agent-installation.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Troubleshooting Agent Installation</a></li><li><a href="17745---copy-of-host-requirements-for-agent-installation--.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5fed75f2-49db-93e2-69e1-12a3100c50c6" data-permalink="17745---copy-of-host-requirements-for-agent-installation--.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">**Copy of Host Requirements for Agent Installation**</a></li></ul></li><li><a href="17746-administration-settings.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-79535d85-dcdb-4dfd-1b55-de1edacb346d" data-permalink="17746-administration-settings.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Administration Settings</a><ul><li><a href="17748-user-profile-and-password.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-07096ea3-1ed7-934f-683e-9d0000edc6f7" data-permalink="17748-user-profile-and-password.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User Profile and Password</a></li><li><a href="17750-user-and-team-administration.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-c24fe2df-c073-159f-5ad6-cd18bc15c2d3" data-permalink="17750-user-and-team-administration.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">User and Team Administration</a></li><li><a href="17755-notifications-management.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-156d27b4-e0d2-ec69-bac9-5ec0500ca128" data-permalink="17755-notifications-management.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Notifications Management</a></li><li><a href="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-6d00fdd3-1f49-e49e-bb0b-556c377d07ac" data-permalink="17768-aws--integrate-aws-account-and-cloudwatch-metrics--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">AWS: Integrate AWS Account and CloudWatch Metrics (Optional)</a></li><li><a href="17771-storage--configure-aws-capture-file-storage--optional-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-d7ff24b5-cfc5-ac9d-767d-ef7dc9d2d9c5" data-permalink="17771-storage--configure-aws-capture-file-storage--optional-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Storage: Configure AWS Capture File Storage (Optional)</a></li><li><a href="17772-find-your-customer-number.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-703bf9f7-20e0-a6e2-cecc-f5a66cbcd977" data-permalink="17772-find-your-customer-number.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Find Your Customer Number</a></li><li><a href="17774-agent-installation--overview-and-key.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-2d64062a-c3ab-484f-5b45-3b0ef8b3b5b8" data-permalink="17774-agent-installation--overview-and-key.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Agent Installation: Overview and Key</a></li><li><a href="17775-subscription--change-number-of-licensed-agents.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-5d8a57ce-6bd9-b5f6-6460-17b233e4facc" data-permalink="17775-subscription--change-number-of-licensed-agents.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Subscription: Change Number of Licensed Agents</a></li><li><a href="17779-authentication-and-authorization--saas-.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-91fa12e3-2fc9-97ab-1bf8-6d9830e4ad84" data-permalink="17779-authentication-and-authorization--saas-.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Authentication and Authorization (SaaS)</a></li></ul></li><li><a href="17794-get-help---using-sysdig-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-712b3b75-2584-30e3-5bd9-e1e57d3d8756" data-permalink="17794-get-help---using-sysdig-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date=""><span class="glyphicon"></span> Get Help | Using Sysdig Support</a><ul><li><a href="17795-self-help.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-39aa92d8-58c3-29d4-582f-4561a368c52f" data-permalink="17795-self-help.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Self-Help</a></li><li><a href="17797-contact-support.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-65fd6b5e-1ab7-6714-888b-95192ae78a5d" data-permalink="17797-contact-support.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Contact Support</a></li><li><a href="17802-terms-of-use.html" class="topic-link section original-topic lang-en original-topic" data-origin-id="UUID-b854f38e-12bc-b1af-1c03-372f7a4234d1" data-permalink="17802-terms-of-use.html" data-topic-level="1" data-relative-prefix="" data-publication-date="">Terms of Use</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">SP (Sysdig Platform)</h1><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="top-nav-menu sm sm-simple"></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="17737-optional--change-the-agent-log-level.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="17740-agent-upgrade.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <span class="current-category">SP (Sysdig Platform)</span></li><li class="breadcrumb-link"><a href="17625-sysdig-platform.html">Sysdig Platform</a></li><li class="breadcrumb-link"><a href="17701-sysdig-agent.html">Sysdig Agent</a></li><li class="breadcrumb-link"><a href="17720-agent-configuration.html">Agent Configuration</a></li><li class="breadcrumb-node">Optional: Agent Auto-Config</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic lang-en original-topic" data-origin-id="UUID-7729ce12-a550-dfb7-fcaa-1beee015c4d6" data-permalink="17738-optional--agent-auto-config.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-53a22bf0-831f-3d33-3243-8b6030689caa"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Optional: Agent Auto-Config</h1></div></div></div><h6 id="UUID-53a22bf0-831f-3d33-3243-8b6030689caa_id_OptionalAgentAuto-Config-Introduction" class="bridgehead">Introduction</h6><p>If you want to maintain centralized control over the configuration of your Sysdig Monitor Agents, one of the following approaches is typically ideal:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Via an orchestration system, such as using <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/192348345/" target="_blank">Kubernetes DaemonSets</a> or <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/192348168/Agent+Install+Mesos+Marathon+DCOS" target="_blank">Mesos/Marathon</a>.</p></li><li class="step"><p>Using a configuration management system, such as <a class="link" href="https://github.com/chef/chef" target="_blank">Chef</a> or <a class="link" href="https://github.com/ansible/ansible" target="_blank">Ansible</a>.</p></li></ol></div><p>However, if these approaches are not viable for your environment, or to further augment your Agent configurations via central control, Sysdig Monitor provides an Auto-Config option for agents. The feature allows you to upload fragments of YAML configuration to Sysdig Monitor that will be automatically pushed and applied to some/all of your Agents based on your requirements.</p><h6 id="UUID-53a22bf0-831f-3d33-3243-8b6030689caa_id_OptionalAgentAuto-Config-EnablingAgentAuto-Config" class="bridgehead">Enabling Agent Auto-Config</h6><p>Independent of the Auto-Config feature, typical Agent configuration lives in <span class="bold bold"><strong>/opt/draios/etc</strong></span> and is derived from a combination of base config in the <span class="bold bold"><strong>dragent.default.yaml</strong></span> file and any overrides that may be present in <span class="bold bold"><strong>dragent.yaml</strong></span>. See also <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/198934553/" target="_blank">Understanding the Agent Config Files</a>.</p><p>Agent Auto-Config adds a middle layer of possible overrides in an additional file <span class="bold bold"><strong>dragent.auto.yaml</strong></span>.When present, the the order of config application from highest precedence to lowest now becomes:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>dragent.yaml</p></li><li class="step"><p>dragent.auto.yaml</p></li><li class="step"><p>dragent.default.yaml</p></li></ol></div><p>While all Agents are by default prepared to receive and make use of Auto-Config data, the file <span class="bold bold"><strong>dragent.auto.yaml</strong></span> will not be present on an Agent until you've pushed central Auto-Config data to be applied to that Agent.</p><p>Auto-Config settings are performed via Sysdig Monitor's <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Platform/pages/209059843/Developer+Documentation" target="_blank">REST API</a>. Simplified examples are available that use the <a class="link" href="https://github.com/draios/python-sdc-client" target="_blank">Python client library</a> to <a class="link" href="https://raw.githubusercontent.com/draios/python-sdc-client/master/examples/get_agents_config.py" target="_blank">get</a> or <a class="link" href="https://raw.githubusercontent.com/draios/python-sdc-client/master/examples/set_agents_config.py" target="_blank">set</a> current Auto-Config settings. Detailed examples using the REST API are shown below.</p><p>The REST endpoint for Auto-Config is <span class="bold bold"><strong>/api/agents/config</strong></span>. Use the <span class="bold bold"><strong>GET </strong></span>method to review the current configuration. The following example shows the initial empty settings that result in no <span class="bold bold"><strong>dragent.auto.yaml</strong></span> files being present on your Agents.</p><pre class="programlisting">curl -X GET \
       --header "Authorization: Bearer xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" \
       https://app.sysdigcloud.com/api/agents/config
 
 
Output:
{
    "files": []
}</pre><p>Use the <span class="bold bold"><strong>PUT</strong></span> method to centrally push YAML that will be distributed and applied to your Agents as <span class="bold bold"><strong>dragent.auto.yaml</strong></span> files. The <span class="bold bold"><strong>content</strong></span> parameter must contain syntactically-correct YAML. The <span class="bold bold"><strong>filter</strong></span> option is used to specify if the config should be sent to one agent or all of them, such as in this example to globally enable Debug logging on all Agents:</p><pre class="programlisting">curl -X PUT \
       --header "Content-Type: application/json" \
       --header "Authorization: Bearer xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" \
       https://app.sysdigcloud.com/api/agents/config -d '
{
  "files": [
    {
      "filter": "*",
      "content": "log:\n  console_priority: debug"
    }
  ]
}'</pre><pre class="programlisting"></pre><p>Alternatively, the <span class="bold bold"><strong>filter</strong></span> can specify a hardware MAC address for a single Agent that should receive a certain YAML config. All MAC-specific configs should appear at the top of the JSON object and are <span class="bold bold"><strong>not</strong></span> additive to any global Auto-Config specified with <span class="bold bold"><strong>"filter": "*"</strong></span> at the bottom. For example, when the following config is applied, the one Agent that has the <a class="link" href="https://sysdigdocs.atlassian.net/wiki/spaces/Monitor/pages/204636397/MySQL" target="_blank">MySQL Application Check</a> configured would <span class="bold bold"><strong>not</strong></span> have Debug logging enabled, but all others would.</p><pre class="programlisting">curl -X PUT \
       --header "Content-Type: application/json" \
       --header "Authorization: Bearer xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" \
       https://app.sysdigcloud.com/api/agents/config -d '
{
  "files": [
    {
      "filter": "host.mac = \"08:00:27:de:5b:b9\"",
      "content": "app_checks:\n  - name: mysql\n    pattern:\n      comm: mysqld\n    conf:\n      server: 127.0.0.1\n      user: sysdig-cloud\n      pass: sysdig-cloud-password"
    },
    {
      "filter": "*",
      "content": "log:\n  console_priority: debug"
    }
  ]
}'</pre><pre class="programlisting"></pre><p>To update the active central Auto-Config settings, simply <span class="bold bold"><strong>PUT</strong></span> a complete replacement JSON object.</p><p>All connected Agents will receive centrally-pushed Auto-Config updates that apply to them based on the <span class="bold bold"><strong>filter</strong></span> settings. Any Agent whose Auto-Config is enabled/disabled/changed based on the centrally-pushed settings will immediately restart, putting the new configuration into effect. Any central Auto-Config settings that would result in a particular Agent's Auto-Config remaining the same will <span class="bold bold"><strong>not</strong></span> trigger a restart.</p><h6 id="UUID-53a22bf0-831f-3d33-3243-8b6030689caa_id_OptionalAgentAuto-Config-DisablingAgentAuto-Config" class="bridgehead">Disabling Agent Auto-Config</h6><p>To clear all Agent Auto-Configs, use the <span class="bold bold"><strong>PUT</strong></span>method to upload the original blank config setting of <span class="bold bold"><strong>'{ "files": [] }'</strong></span>.</p><p>It is also possible to override active Auto-Config on an individual Agent. To do so, follow these steps for your Agent:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Add the following config directly to the <span class="bold bold"><strong>dragent.yaml</strong></span> file: <span class="bold bold"><strong>auto_config: false</strong></span>.</p></li><li class="step"><p>Delete the file <span class="bold bold"><strong>/opt/draios/etc/dragent.auto.yaml</strong></span>.</p></li><li class="step"><p>Restart the Agent.</p></li></ol></div><p>For such an Agent to opt-in to Auto-Config again, remove <span class="bold bold"><strong>auto_config: false </strong></span>from the <span class="bold bold"><strong>dragent.yaml </strong></span>and restart the Agent.</p><h6 id="UUID-53a22bf0-831f-3d33-3243-8b6030689caa_id_OptionalAgentAuto-Config-Restrictions" class="bridgehead">Restrictions</h6><p>To prevent the possibility of pushing Auto-Config that would damage an Agent's ability to connect, the following keys will not be accepted in the centrally-pushed YAML.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>auto_config</p></li><li class="listitem"><p>customerid</p></li><li class="listitem"><p>collector</p></li><li class="listitem"><p>collector_port</p></li><li class="listitem"><p>ssl</p></li><li class="listitem"><p>ssl_verify_certificate</p></li><li class="listitem"><p>ca_certificate</p></li><li class="listitem"><p>compression</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="17738-optional--agent-auto-config.html#UUID-53a22bf0-831f-3d33-3243-8b6030689caa_id_OptionalAgentAuto-Config-Introduction" title="Introduction">Introduction</a> </p></li><li class="listitem"><p> <a class="link" href="17738-optional--agent-auto-config.html#UUID-53a22bf0-831f-3d33-3243-8b6030689caa_id_OptionalAgentAuto-Config-EnablingAgentAuto-Config" title="Enabling Agent Auto-Config">Enabling Agent Auto-Config</a> </p></li><li class="listitem"><p> <a class="link" href="17738-optional--agent-auto-config.html#UUID-53a22bf0-831f-3d33-3243-8b6030689caa_id_OptionalAgentAuto-Config-DisablingAgentAuto-Config" title="Disabling Agent Auto-Config">Disabling Agent Auto-Config</a> </p></li><li class="listitem"><p> <a class="link" href="17738-optional--agent-auto-config.html#UUID-53a22bf0-831f-3d33-3243-8b6030689caa_id_OptionalAgentAuto-Config-Restrictions" title="Restrictions">Restrictions</a> </p></li></ul></div></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="17737-optional--change-the-agent-log-level.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="17740-agent-upgrade.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Sysdig </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
